\documentclass [11pt, a4paper]{report}
\usepackage[english]{babel}
\usepackage{multicol}
\usepackage{a4wide}
\usepackage{amsmath, amssymb, amsthm}
\usepackage{thmtools}
\usepackage{mathtools}
\usepackage[utf8]{inputenc}
\usepackage{minted}
\usepackage[all]{xypic}
%\usepackage{graphicx}
\usepackage{fancyhdr}
%\usepackage{tabularx}
%\usepackage{wrapfig}
\usepackage{color}
%\usepackage{array}
%\usepackage{textcomp}
%\usepackage{siunitx}
%\usepackage{epsfig}
\usepackage{url}
\usepackage{tikz-cd}
\usetikzlibrary{decorations.pathmorphing}
\usepackage[
  backend=biber,
  style=alphabetic]{biblatex}
\bibliography{literature}
\usepackage{csquotes}
\usepackage[colorlinks]{hyperref}

\usepackage[bb=dsserif]{mathalpha}
\usepackage{stmaryrd}

\usepackage[stable]{footmisc}
\usepackage{quiver}
\usepackage{bussproof}

\usepackage{comment}

\DeclareFontFamily{U}{min}{}
\DeclareFontShape{U}{min}{m}{n}{<-> udmj30}{}

\newcommand{\yo}{\text{\usefont{U}{min}{m}{n}\symbol{'210}}}

\makeatletter
\newcommand\figcaption{\def\@captype{figure}\caption}
\makeatother

\renewcommand{\sectionmark}[1]{ \markright{-- \thesection.\ #1}{}}

\def\A{\mathcal A}
\def\B{\mathcal B}
\def\C{\mathcal C}
\def\D{\mathcal D}
\def\E{\mathcal E}
\def\M{\mathcal M}
\def\N{\mathbb N}
\def\Z{\mathbb Z}
\def\T{\mathcal{T}}
\def\R{\mathbb{R}}
\def\X{\mathcal{X}}
\def\Y{\mathcal{Y}}

\def\Set{\mathbf{Set}}
\def\Lex{\mathbf{Lex}}
\def\LEX{\mathbf{LEX}}
\def\wLP{\mathbf{wLP}}
\def\GRP{\mathbf{GRP}}
\def\Rep{\mathbf{Rep}}
\def\REP{\mathbf{REP}}
\def\Cat{\mathbf{Cat}}
\def\CatT{\mathbf{CatT}}
\def\CAT{\mathbf{CAT}}
\def\NM{\mathbf{NM}}
\newcommand{\DFib}[1]{{\mathbf{DFib}_{#1}}}
\renewcommand{\lim}{\text{lim}}
\tikzset{
    tri/.tip={Glyph[glyph math command=triangleright, glyph length = 1.1 ex]}
}



\clubpenalty=10000
\widowpenalty=10000

\begin{comment}
\declaretheoremstyle[
  headfont=\normalfont\bfseries,
  bodyfont=\itshape,
  spaceabove=1em plus 0.75em minus 0.25em,
  spacebelow=1em plus 0.75em minus 0.25em,
  postheadspace=0.5em,
]{Thm}

\declaretheorem[
  style=Thm,
  parent=section,
  title=Theorem,
  refname={theorem,theorems},
  Refname={Theorem,Theorems}
]{thm}

\declaretheorem[
  style=Thm,
  sibling=thm,
  title=Lemma,
  refname={lemma,lemmas},
  Refname={Lemma,Lemmas}
]{lemma}

\declaretheorem[
  style=Thm,
  sibling=thm,
  title=Proposition,
  refname={proposition,propositions},
  Refname={Proposition,Propositions}
]{prop}

\declaretheorem[
  style=Thm,
  sibling=thm,
  title=Corollary,
  refname={corollary,corollaries},
  Refname={Corollary,Corollaries}
]{cor}


\declaretheoremstyle[
  headfont=\normalfont\bfseries,
  bodyfont=\normalfont,
  sibling=thm, 
  spaceabove=1em plus 0.75em minus 0.25em,
  spacebelow=1em plus 0.75em minus 0.25em,
  postheadspace=0.5em,
  qed={$\Diamond$ }%\line(1,0){1.5cm}\line(0,1){0.2cm} },
]{notThm}

    
\declaretheorem[
  style=notThm,
  title=Example,
  refname={example,examples},
  Refname={Example,Examples}
]{ex}

\declaretheorem[
  style=notThm,
  title=Definition,
  refname={definition,definitions},
  Refname={Definition,Definitions}
]{defi}

\declaretheorem[
  style=notThm,
  title=Remark,
  refname={remark,remarks},
  Refname={Remark,Remarks}
]{rem}

\declaretheorem[
  style=notThm,
  title=Notation,
  refname={notation,notations},
  Refname={Notation,Notations}
]{nota}
\end{comment}
\begin{document}

\setlength{\headheight}{13.59999pt}
\newtheorem{thm}{Theorem}[section]
\newtheorem{lemma}[thm]{Lemma}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{prop}[thm]{Proposition}
\theoremstyle{remark}
\theoremstyle{definition}

\newtheorem{defi}[thm]{Definition}
\newtheorem{rem}[thm]{Remark}
\newtheorem{ex}[thm]{Example}
\newtheorem{nota}[thm]{Notation}

%\pagecolor{black}
%\color{red}

\begin{titlepage}
{
\centering
\huge\bfseries MASARYK UNIVERSITY\\
\vspace{0.5cm}
\LARGE FACULTY OF INFORMATICS\\
\vspace{4cm}
Type Theory and its Semantics\\
\vspace{1cm}
\Large MASTER'S THESIS\\
\vspace{0.7cm}\mdseries
\LARGE VÍT JELÍNEK\\

\vfill
}
\center\large Brno, Spring 2024
\end{titlepage}

\begin{titlepage}
{
\centering
\huge\bfseries MASARYK UNIVERSITY\\
\vspace{0.5cm}
\LARGE FACULTY OF INFORMATICS\\
\vspace{4cm}
Type Theory and its Semantics\\
\vspace{1cm}
\Large MASTER'S THESIS\\
\vspace{0.7cm}\mdseries
\LARGE VÍT JELÍNEK\\

\vfill

\large\bfseries Advisor: doc. John Bourke, Ph.\,D.\\
Coadvisor: Peter LeFanu Lumsdaine, Ph.\,D.\\ }
\center\large Brno, Spring 2024
\end{titlepage}

\pagenumbering{gobble}
\section*{Declaration}
Hereby I declare that this thesis is my original authorial work, which I have worked out on my own. All sources, references, and literature used or excerpted during elaboration of this work are properly cited and listed in complete reference to the due source.
\vspace{0.5cm}

\hfill Vít Jelínek
\vfill
{
\noindent\large{\bfseries Advisor:} doc. John Bourke, Ph.\,D.\\
\large{\bfseries Coadvisor:} Peter LeFanu Lumsdaine, Ph.\,D.\\}
\newpage


\section*{Acknowledgements}
First and foremost, I have to thank John. I am very grateful for the very interesting topic about 2-categorical aspects of type theory and all the 2-categorical knowledge that he gave me. I must say that I would have never finished the thesis without all the ideas, pushing, and support that I received in the last two years. The amount of energy that he invested in me is incredible, and I value all the consultations, comments on the thesis, references, and recommendation letters a lot.

Many thanks also belong to Peter for my whole stay in Stockholm -- I felt really welcomed, and I learned so much about type theory and logic from him during all our meetings. The whole thesis would not make sense to me without his explanations of semantics of type theory. In Stockholm, I had a great time, and I am very happy for all the (not necessarily mathematical) occasions that I shared with folks around the logic group.

I am grateful to my family for their support and to Group without Vítek for being so amazing friends. 

I am also indebted to Nathanael Arkor for his unbelievably-well working \href{https://q.uiver.app}{quiver}. I would still be typesetting Proof of \ref{bimodismod} without that.

\newpage

\section*{Abstract}
We examine categories with representable maps (CwRs) -- an answer to the question `What is a (dependent) type theory?' suggested by Taichi Uemura in his PhD thesis. We prove that the 2-category of CwRs has various good 2-categorical properties -- it is an accessible 2-category with flexible limits and bicolimits. Using this, we deduce that CwRs can be freely generated by categories with specified arrows. These constructions are then used to build colimit presentations of CwRs such that their models are models of dependent type theory with some constructors -- we choose unit types and empty types.

\section*{Keywords}
type theory, semantics, 2-category theory, logic, bicolimits
\tableofcontents
\pagenumbering{arabic}
\fancypagestyle{plain}{%
\fancyhf{}
\lhead{}
\chead{}
\rhead{}
\lfoot{}
\cfoot{}
\rfoot{\thepage}
\renewcommand{\headrulewidth}{0pt}}

\pagestyle{fancy}
\fancyhf{}
\lhead[L]{}
\chead{}
\rhead[R]{\nouppercase\leftmark}
\lfoot{}
\cfoot{}
\rfoot{\thepage}
\chapter*{Introduction}
Type theory is a formal system originally proposed by Russel \cite{principles} as a foundations of mathematics to address Russel's paradox. Throughout the 20th century, type theory also found applications in constructive logic and the theory of programming languages \cite{foundations_of_pl}. More recently, Voevodsky et al. discovered unexpected connections between type theory and algebraic topology \cite{hottbook} that enable the use of formal systems for proving theorems about geometrical objects as is done, e.g. in \cite{axel}. There are many different flavours of type theory; in this thesis, we treat a version called dependent type theory or Martin-L{\"o}f type theory \cite{Martin-Lof1984-rt}.

From first-order logic, we know that the semantics of a formal system can provide many insights about the system. The same holds for type theory; using semantics, Hofmann and Streicher \cite{grp} proved that the uniqueness of identity proofs is underivable from other axioms of type theory -- the result that first hinted at the connections with algebraic topology. The task of providing semantics is for type theory quite involved as the formal system itself is much more complicated than first-order logic. There have been many approaches -- e.g. locally cartesian closed categories, comprehension categories, display map categories, categories with families, natural models, or contextual categories -- all of these having the problem that they are not parametric in the set of symbols that we use, and one has to guess the correct definition for every choice of signature (set of symbols). To tackle this issue and define semantics generally, there is a necessary prerequisite: a general definition of type theory.

Uemura, in his PhD thesis \cite{taichiThesis}, provides a possible solution to the issues from the previous paragraph. Inspired by functorial semantics of logic \cite{lawvereThesis}, he suggests a categorical approach: a type theory is a category with a certain structure (Definition \ref{cwr}), and its model is a functor preserving the structure. This thesis is devoted to examining his approach using techniques of 2-category theory. Specifically, we care about the 2-category of type theories $\Rep$; we investigate accessibility and limits and colimits that are present there. Using this, we are able to construct free type theories (CwRs) and (bi)colimits of them, and show that these constructions interact well with the formation of models, therefore enabling us to build lots of concrete examples of type theories using colimit presentations (see \cite[Section 5]{companion} for an explanation of colimit presentations).

Chapter \ref{chap:prelims} is devoted to categorical preliminaries. The reader is expected to be fluent in the categorical language, at least in the scope of \cite{emily}, and a prior exposition to 2-categories would be helpful (even though all the necessary definitions are included). We briefly cover discrete fibrations and exponentials along morphisms in the first two sections. Section \ref{sec:basics} introduces 2-categories with a focus on 2-dimensional limits.

In Chapter \ref{chap:semantics}, we briefly and informally introduce type theory and its semantics via natural models. Then, in Section \ref{sec:cwr}, we present categories with representable maps (CwRs) -- the categorical definition of type theory. We explain what models of CwRs are, and give a few remarks comparing our definitions with the definitions of Uemura. We give an important example (\ref{notamorphism}) that demonstrates that morphisms of models do not live in $\Rep$.

Chapter \ref{chap:prop} aims to deduce various 2-categorical properties of $\Rep$, and is probably the most technical part. It also assumes a basic knowledge of locally presentable and accessible categories \cite{adamek1994locally}. We build $\Rep$ in several stages from categories with known properties in such a way that the properties are preserved by construction. As a result, we obtain that $\Rep$ is an accessible 2-category with flexible limits and bicolimits. Moreover, we also obtain that we can freely construct CwRs from categories with a specified class of maps (marked categories); formally, we prove that the forgetful functor $\Rep\to\Cat_m$ has a left biadjoint $F$. Similar results are obtained by Uemura in his thesis for a $(2,1)$-categorical version of $\Rep$, but we provide many additional details, and not all constructions (Section \ref{sec:rep has exp}) are fully transferable to the 2-categorical setting. This chapter is heavily influenced by and uses \cite{BOURKE2021106519}.

Finally, Chapter \ref{chap:models} uses the results of Chapter \ref{chap:prop} to study models of type theories. We start by defining models of marked categories, and then, in Theorem \ref{bimodismod}, prove that the category of models of a marked category $\T$ is equivalent to the category of models of $F\T$. Then we show (Theorem \ref{pushouts work}) that models of a bipushout of CwRs are equivalent to a bipullback of models. Theorem \ref{bimodismod} is original, whereas Theorem \ref{pushouts work} is just a minor modification of a result by Uemura. At the end of this chapter, we use the developed theory to construct examples of type theories with known semantics. We construct CwRs such that their category of models consists of:
\begin{enumerate}
    \item natural models with unit types with $\eta$-law;
    \item natural models with empty types;
    \item natural models with inductive unit types.
\end{enumerate}

\addcontentsline{toc}{chapter}{Introduction}  
\thispagestyle{plain}{\rhead[R]{Introduction\leftmark}
}

\chapter{Categorical Preliminaries}\label{chap:prelims}
This chapter serves as an introduction to topics that are not present in the introductory textbooks on category theory such as \cite{emily, maclane}, and are necessary prerequisites for the forthcoming chapters -- discrete fibrations, exponentials along morphisms, and basics of 2-dimensional category theory. We do not give many proofs, mostly just the necessary definitions and results.

We do not focus on foundational issues, but try to stress when they appear (at least by notation). That is by $\Cat$, we mean the category of small categories and functors between them. Most of the time, we treat $\Cat$ as a 2-category. Of course, this starts after Definition \ref{2-cat} that defines 2-categories, so in Sections \ref{sec:dfib} and \ref{sec:exponentials}, $\Cat$ is just a 1-category. By $\CAT$, we mean the category of locally small categories. We use this convention -- only first letter capitalised for small objects vs whole name capitalised for big objects -- also in other contexts than ordinary categories.

Sometimes when we speak about objects of a category that do not need to be named, we use $\bullet$ for all of these. In definitions of categories, different $\bullet$s mean different objects. In diagrams in already defined categories, different $\bullet$s in a diagram \emph{can} mean different objects.

\begin{nota}Let us fix notation.
    \begin{itemize}
        \item $\mathbf{2}$ is the category $0\to1$: the linear order with two elements;
        \item $\mathbf{1}$ is the terminal category with only one object and one morphism;
        \item $\Lex$ is the category of finitely complete categories and functors that preserve these limits (lex functors). When treated as a 2-category, 2-cells are just natural transformations.
    \end{itemize}
\end{nota}
It should be mentioned that terms \emph{arrow, morphism, map} are used interchangeably throughout the thesis.
\section{(Discrete) Fibrations}\label{sec:dfib}
It is well known that for any small category $\C$, the category $\Set^{\C^{op}}$ is the free cocompletion of $\C$ under colimits (\cite[Corollary I.5.4]{sheaves}); this is meant as an analogy to statements like `for a set $X$, the monoid $X^*$ of finite words of letters from $X$ is a free monoid generated by $X$'. Explicitly, this means that the Yoneda embedding $\yo\colon\C\to\Set^{\C^{op}}$ is a functor into a cocomplete category such that given any other functor $F\colon\C\to\D$ into a cocomplete category, we have a unique up to an isomorphism cocontinuous functor $\hat{F}\colon\Set^{\C^{op}}\to\D$ such that the diagram 
$$
\begin{tikzcd}
    \C\ar[r, "F", ""{anchor=center, name=0}]\ar[rd, "{\yo}"'] & \D\\
                & \Set^{\C^{op}}\ar[u, "{\hat{F}}"']
    \arrow[from=0, to=2-2, "{\cong}"{description}, draw=none]
\end{tikzcd}
$$
commutes up to an isomorphism.

However, from 1-dimensional universal algebra, we are used to the fact that a free construction on an object $x$ constitutes of terms with variables from $x$ (possibly modulo equations), and here this does not seem to be the case (at least to the author of this thesis). As taking colimits is an operation whose input is a diagram $D\colon J\to\C$, the more natural guess (motivated by universal algebra) for a free cocompletion of $\C$ might be $\Cat/\C$ -- the category of functors into $\C$ as objects, and commutative triangles as morphisms. This category has the problem that colimits satisfy some equations that do not hold in this category. For example, a functor $c\colon\mathbf{1}\to\C$ should have the same colimit as any functor $\mathbf{2}\to\C$ that chooses an arrow with codomain $c$. However, any such two functors cannot be isomorphic objects of $\Cat/\C$ since their domains are not isomorphic categories. This issue is fixed by restricting the class of functors into $\C$:
\begin{defi}\label{def:dis fib}
    A functor $p\colon\A\to\C$ is called a \emph{discrete fibration} if for every $a\in\A$, and an arrow $f\colon c\to pa\in\C$, there is a unique arrow $g\colon a'\to a$ such that $pg=f$. The object $a'$ is denoted $f^*a$.
\end{defi}
\begin{defi}
    Let $\C$ be a category with an object $c$. We define the \emph{domain functor} $d\colon\C/c\to\C$ by $d( c'\to c):=c'$.
\end{defi}
\begin{ex}
    For any $\C$, we have a few functors that are discrete fibrations:
    \begin{itemize}
        \item $!\colon\emptyset\to\C$;
        \item $id\colon\C\to\C$;
        \item for every $c\in\C$, the domain functor $d\colon\C/c\to\C$ is a discrete fibration.
    \end{itemize}
\end{ex}
\begin{defi}
    Let $\C$ be a category. We define its \emph{category of discrete fibrations over $\C$} $\DFib{\C}$ as the full subcategory of $\Cat/\C$ spanned by discrete fibrations.
\end{defi}
\begin{nota}
    The domain functor $\Cat/\C\to\Cat$ restricted to $\DFib{\C}\to\Cat$ is also denoted $d$.
\end{nota}
\begin{ex}
    Let $A$ be a set/discrete category, then $\DFib{\C}\simeq\Set/A$.
\end{ex}
Now, we move to the connection between discrete fibrations and presheaves:
\begin{defi}
    Let $F\colon\C^{op}\to\Set$ be a presheaf. We define $\int_\C F$ its \emph{category of elements}:
    \begin{itemize}
        \item objects: pairs $(c\in\C, x\in Fc)$;
        \item morphisms $(c,x)\to(c',y)$: morphisms $f\colon c\to c'\in\C$ such that $Ff(y)=x$.
    \end{itemize} 
    We denote $\Pi\colon\!\int_\C F\to\C$ the \emph{forgetful functor} that forgets the second components.
\end{defi}
\begin{defi}\label{fibers}
    Let $p\colon\E\to\C$ be a discrete fibration between small categories. We define a presheaf $p^{-1}\colon\C^{op}\to\Set$ by
    \begin{itemize}
        \item $p^{-1}(c)=\{e\in\E:pe=c\}$;
        \item $p^{-1}(f\colon c\to c'): e\in p^{-1}(c')\mapsto f^*e.$
    \end{itemize}
\end{defi}
\begin{thm}\label{dfibs are presh}
    Let $\C$ be a small category. We have an equivalence of categories:
    $$(-)^{-1}\colon\DFib{\C}\simeq\Set^{\C^{op}}\colon\textstyle\int_\C.$$
\end{thm}
\begin{proof}
    Follows from \cite[Theorem 10.6.16]{2-dimensional}.
\end{proof}
\begin{rem}\label{fib vs indexed}
    Even though the Definition \ref{fibers} makes sense only when $p$ is a discrete fibration, the intuition that a functor $p\colon\E\to\C$ is viewed as a `collection indexed by $\C$' is borrowed and used in categorical logic in much wider contexts than discrete fibrations. Many aspects of this point of view are examined in \cite{jacBook}.
\end{rem}

Since discrete fibrations correspond to presheaves, it is interesting to see what kind of discrete fibrations correspond to representable presheaves:

Fix a $c\in\C$. By definition, the category $\int_\C\C(-,c)$ has
\begin{enumerate}
    \item objects: pairs $(d\in\C, f\colon d\to c)$;
    \item morphisms: $g\colon d\to d'$ is a morphism $(d,f)\to(d', f')$ precisely when $\C(g,c)(f')=f'g$ is equal to $f$.
\end{enumerate}
Therefore, we have:
\begin{prop}
    A discrete fibration into $\C$ is isomorphic to one of the form $\int_\C\C(-,c)$ if and only if it is isomorphic to $d\colon\C/c\to\C$.
\end{prop}
There are many variants of fibrations in category theory. In this thesis, we make use also of two other types:
\begin{defi}
    A functor $p\colon\E\to\C$ is an \emph{isofibration} if for every isomorphism $f\colon c\cong p(e)$, there is an isomorphism (not necessarily unique) $g\colon e'\cong e\in\E$ such that $p(g)=f$; such $g$ is called a \emph{lift} of $f$. An isofibration with unique lifts is called a discrete isofibration.
\end{defi}
\begin{prop}\label{pullback fibration}
All the three types of fibrations are pullback-stable: Given a pullback square of categories and functors 
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGJ1bGxldCJdLFswLDEsIlxcYnVsbGV0Il0sWzEsMSwiXFxidWxsZXQiXSxbMSwwLCJcXGJ1bGxldCJdLFswLDEsIkciLDJdLFsxLDJdLFszLDIsIkYiXSxbMCwzXSxbMCwyLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	\A & \B \\
	\C & \D
	\arrow["H", from=1-1, to=1-2]
	\arrow["G"', from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["F", from=1-2, to=2-2]
	\arrow["K"', from=2-1, to=2-2]
\end{tikzcd}\]
such that $F$ is a (discrete) (iso-)fibration, the functor $G$ is also a (discrete) (iso-)fibration.
\end{prop}
\begin{proof}
    We prove it just for discrete fibrations as the other two cases are analogous. Assume, $f\colon c\to G(c',b')=c'$ is an arrow in $\C$. This yields $Kf\colon Kc\to KG(c',b')=FH(c',b')\in\D$. Since $F$ is a discrete fibration, we have a unique lift $g\in\B$ of $Kf$. Then $(g,f)\in\A$ is the desired unique lift of $f$.
\end{proof}

\section{Exponentials along Morphisms}\label{sec:exponentials}
One of the basic constructions with sets is taking products of many objects. Explicitly, given a set $A$ together with sets $(B_a)_{a\in A}$, we can form their product $\prod_{a\in A}B_a$. In this section, we explain a categorical analogy of this construction. 

The first idea that comes to mind is the notion of product in a category, say $\C$, i.e. whenever we have a set $A$ together with objects $(B_a)_{a\in A}$, we can consider their product in $\C$. Products may or may not exist in $\C$ -- the category $\C$ may or may not admit this analogy of the construction with sets.

A weak point of the previous paragraph is that the collection of objects $(B_a)$ was indexed by a set, and not by another object of $\C$. Of course, objects of $\C$ can be very far from some collections that can be used for indexing, nevertheless, we can imitate indexing in the spirit of Remark \ref{fib vs indexed}. 

The universal property of products then can be rephrased as: functions $C\to\prod_{a\in A}B_a$ are in a bijection with functions $A\times C\to \bigsqcup_{a\in A}B_a $ satisfying that the image of $(a,c)$ is in $B_a$ -- that is commutative triangles
$$
\begin{tikzcd}
    A\times C\ar[r]\ar[rd] & \bigsqcup_{a\in A}B_a \ar[d]\\
    & A,
\end{tikzcd}
$$
where the unlabelled arrows are projections.

Before introducing the new categorical concept, we fix some notation.
\begin{nota}
    Let $\C$ be a category with pullbacks, and $f\colon c\to c'\in\C$ a morphism. We denote $f^*\colon\C/c'\to\C/c$ the functor that sends an arrow $g\colon d\to c'$ to its pullback along $f$. Moreover, we write $f^*d$ for the domain of $f^*g$. That is, we have the following pullback square:
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJmXipkIl0sWzAsMSwiYyJdLFsxLDEsImMnLiJdLFsxLDAsImQiXSxbMCwxLCJmXipnIiwyXSxbMSwyLCJmIiwyXSxbMywyLCJnIl0sWzAsM10sWzAsMiwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	{f^*d} & d \\
	c & {c'.}
	\arrow[from=1-1, to=1-2]
	\arrow["{f^*g}"', from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["g", from=1-2, to=2-2]
	\arrow["f"', from=2-1, to=2-2]
\end{tikzcd}\]
\end{nota}
\begin{defi}
    Let $\C$ be a category with pullbacks. An arrow $f\colon c\to c'$ is \emph{exponentiable} if the functor $f^*\colon\C/c'\to\C/c$ has a right adjoint $\prod_f\colon\C/c\to\C/c'$. 
\end{defi}
\begin{nota}
    We adopt the same convention as with pullbacks for domains of morphisms. That is having $g\colon d\to c$, we write $\prod_fg\colon\prod_fd\to c'$.
\end{nota}
\begin{defi}
    A morphism of the form $\prod_fg$ is an \emph{exponential along $f$}.
\end{defi}
\begin{rem}
    Some texts (e.g. \cite{Uemura_2023}) use terms dependent products or pushforwards instead of exponentials along morphisms.
\end{rem}
\begin{ex}\hfill
    \begin{itemize}
    \item Every isomorphism is exponentiable.
        \item In $\Set$, every morphism is exponentiable: given $$\begin{tikzcd}
            B\ar[d, "g"]\\
            A\ar[r, "f"] & C,
        \end{tikzcd}$$
        we define $h:=\prod_fg\colon\prod_fB\to C$ by $$h^{-1}(c):=\prod_{a\in f^{-1}(c)}g^{-1}(a).$$
        \item More generally, every category of the form $\Set^{\C^{op}}$ for a small $\C$ has all arrows exponentiable \cite[Theorem IV.7.2]{sheaves}. Therefore also every category of the form $\DFib{\C}$.
        \item Not every morphism in $\Cat$ is exponentiable \cite{shulman_exponentiable}. 
    \end{itemize}
\end{ex}
We can see that in the case of sets, by setting $C=1$, we obtain the ordinary product as hinted in the beginning of this section.
\begin{defi}
    A lex category where every morphism is exponentiable is called \emph{locally cartesian closed}.
\end{defi}
The last concept that we mention is preservation of exponentials. There are various possibilities for the definition. We choose one of the more abstract approaches as it is useful in later parts of the thesis.

\begin{defi}\label{def:BC}
    Suppose, we have a square of categories and functors 
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXEEiXSxbMSwwLCJcXEIiXSxbMCwxLCJcXEMiXSxbMSwxLCJcXEQiXSxbMCwxLCJmIl0sWzAsMiwiZyIsMl0sWzIsMywiaCIsMl0sWzEsMywiayJdLFsxLDIsIlxcdmFycGhpIiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwibGV2ZWwiOjJ9XV0=
\begin{equation}\label{square}
    \begin{tikzcd}
	\A & \B \\
	\C & \D
	\arrow["f", from=1-1, to=1-2]
	\arrow["g"', from=1-1, to=2-1]
	\arrow["\varphi"', shorten <=4pt, shorten >=4pt, Rightarrow, from=1-2, to=2-1]
	\arrow["k", from=1-2, to=2-2]
	\arrow["h"', from=2-1, to=2-2]
\end{tikzcd}
\end{equation}
with a natural transformation, and adjunctions $(g\dashv m,\eta_g,\epsilon_g), (k\dashv n,\eta_k, \epsilon_k)$, then the following natural transformation is called the \emph{mate} of the transformation $\varphi\colon kf\Rightarrow hg$: 
% https://q.uiver.app/#q=WzAsNixbMiwwLCJcXEEiXSxbNCwwLCJcXEIiXSxbMiwyLCJcXEMiXSxbNCwyLCJcXEQiXSxbMCwyLCJcXEMiXSxbNiwwLCJcXEIiXSxbMCwxLCJmIiwyXSxbMCwyLCJnIl0sWzIsMywiaCJdLFsxLDMsImsiLDJdLFs0LDAsIm0iXSxbNCwyLCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxLDUsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzMsNSwibiIsMl0sWzEsMiwiIiwxLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwibGV2ZWwiOjJ9XSxbMCwxMSwiXFxlcHNpbG9uX2ciLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MTAsInRhcmdldCI6MjB9fV0sWzEyLDMsIlxcZXRhX2siLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MTB9fV1d
\[\begin{tikzcd}
	&& \A && \B && \B \\
	\\
	\C && \C && \D.
	\arrow["f"', from=1-3, to=1-5]
	\arrow["g", from=1-3, to=3-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, Rightarrow, no head, from=1-5, to=1-7]
	\arrow[shorten <=11pt, shorten >=11pt, Rightarrow, from=1-5, to=3-3]
	\arrow["k"', from=1-5, to=3-5]
	\arrow["m", from=3-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, Rightarrow, no head, from=3-1, to=3-3]
	\arrow["h", from=3-3, to=3-5]
	\arrow["n"', from=3-5, to=1-7]
	\arrow["{\epsilon_g}", shorten <=4pt, shorten >=9pt, Rightarrow, from=1-3, to=1]
	\arrow["{\eta_k}", shorten <=9pt, shorten >=4pt, Rightarrow, from=0, to=3-5]
\end{tikzcd}\]
Assume that $\varphi$ is an isomorphism. Then, we say that the \emph{square \ref{square} satisfies the Beck-Chevalley condition} if the mate of $\varphi$ is also an isomorphism.
\end{defi}

\begin{defi}
    Let $F\colon\C\to\D$ be a lex functor between lex categories, and $f\colon c'\to c$ an exponentiable morphism. As $F$ preserves limits, we have a natural isomorphism
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXEMvYyJdLFsyLDAsIlxcRC9GYyJdLFswLDIsIlxcQy9jJyJdLFsyLDIsIlxcRC9GYycuIl0sWzAsMSwiRi9jIl0sWzAsMiwiZl4qIiwyXSxbMiwzLCJGL2MnIiwyXSxbMSwzLCIoRmYpXioiXSxbMSwyLCJcXGNvbmciLDEseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9LCJsZXZlbCI6Miwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
\[\begin{tikzcd}
	{\C/c} && {\D/Fc} \\
	\\
	{\C/c'} && {\D/Fc'.}
	\arrow["{F/c}", from=1-1, to=1-3]
	\arrow["{f^*}"', from=1-1, to=3-1]
	\arrow["\cong"{description}, draw=none, from=1-3, to=3-1]
	\arrow["{(Ff)^*}", from=1-3, to=3-3]
	\arrow["{F/c'}"', from=3-1, to=3-3]
\end{tikzcd}\]
We say that $F$ \emph{preserves exponentials along $f$} if $Ff$ is also exponentiable and the square above satisfies the Beck-Chevalley condition.
\end{defi}
\section{Basics of 2-Category Theory}\label{sec:basics}
Ordinary category theory has proved fruitful in the study of mathematical objects (such as groups, topological spaces, automata,\ldots). As categories are also mathematical objects, we can apply categorical techniques to category theory itself. However, methods of ordinary category theory are not sufficient for this purpose as they are not expressive enough. For example, the category $\mathbf{Lex}$ is a category of category-like structures that has a forgetful functor $U$ into $\Cat$ (forgetting the existence of limits). On top of preserving objects and morphisms of $\mathbf{Lex}$, this functor also interacts well with natural transformations between lex functors -- we would like to say that $U$ preserves also natural transformations. However, nothing like that is expressible in the language of category theory. In this section, we state the very basics of 2-category theory -- a language that enables us to speak about categories whose object are categories with structure.

Two dimensional category theory is a very rich area, and there is no chance to properly present it to a reader in this introductory chapter. For an interested reader, we have a few references: Many 2-categorical ideas implicitly appear throughout the book \cite{emily}, however, they are not of the focus. More complete account is given in \cite[Chapter 7]{Borceux_1994}. Many concepts and ideas are nicely (though quite informally) explained in \cite{companion}. Lastly, \cite{2-dimensional} is a book solely about 2-categories that expects no previous knowledge of the topic -- it is quite complete, and a reader can find there very detailed definitions and proofs.

\subsection{Basic Definitions}
\begin{defi}\label{2-cat}
A \emph{2-category} $\C$ consists of
\begin{enumerate}
    \item a collection of objects $ob\,\C$;
    \item for every two objects $c,c'\in\C$, a hom-category $\C(c,c')$ -- its objects are called \emph{1-cells} (morphisms, arrows), and its morphisms are called \emph{2-cells};
    \item for every object $c$, a 1-cell $id_c\in\C(c,c)$;
    \item for every objects $a,b,c\in\C$, a composition functor $\C(b,c)\times\C(a,b)\to\C(a,c)$.
\end{enumerate}
Moreover, we require that composition is (strictly) associative and unital.
\end{defi}
\begin{defi}
    A 2-category is a $(2,1)$-\emph{category} if all its 2-cells are invertible. For a 2-category $\C$, we denote $(2,1)$-$\C$ the $(2,1)$-category that forgets all non-invertible 2-cells of $\C$.
\end{defi}

\begin{ex}\hfill
    \begin{itemize}
        \item Every category $\C$ can be regarded as a 2-category with discrete hom-categories.
        \item $\Cat$ has as objects small categories, 1-cells are functors, and 2-cells are natural transformations. The fact that composition is a functor, not a mere function, corresponds to the fact that on top of vertical composition of natural transformations -- inside $\Cat(c,c')$ -- we have also horizontal composition of natural transformations given by the functorial action of the composition functor.
        \item Similarly, $\Lex$ consists of lex categories, lex functors, and natural transformations.
    \end{itemize}
\end{ex}
\begin{rem}
    There are other other possible definitions of 2-dimensional categories (not necessary for this thesis). Definition \ref{2-cat} correspond to $\Cat$-enriched categories (see, e.g. \cite[Example 3.3.12]{cathtpy}). The definition can be weakened in the sense that associativity and unitality of composition does not hold strictly, but it holds up to an invertible 2-cell. These weak 2-categories are called bicategories and treated, e.g, in \cite{2-dimensional,companion,Borceux_1994}.
    
    Another possibility are double categories: that is, categories internal to $\Cat$ (treated e.g. in \cite[Section 12.3]{2-dimensional}). These have objects, horizontal and vertical morphisms, and squares with horizontal and vertical morphisms as a boundary.
\end{rem}
For every 1-category, we have its opposite 1-category. With 2-categories, we can do similar constructions, though the situation is a bit more delicate:
\begin{nota}
    Let $\C$ be a 2-category. We denote
    \begin{itemize}
        \item $\C^{op}$ the 2-category with reversed 1-cells;
        \item $\C^{co}$ the 2-category with reversed 2-cells;
        \item $\C^{coop}$ the 2-category with both 1-cells and 2-cells reversed.
    \end{itemize}
\end{nota}
\begin{defi} 
A \emph{2-functor} $F\colon\C\to\D$ between 2-categories consists of an assignment of objects $F_0\colon ob\,\C\to ob\,\D$ together with, for every $c,c'\in\C$, a functor $F_{c,c'}\colon\C(c,c')\to\D(F_0c,F_0c')$. Moreover, we require that the functors between hom-categories respect composition functors and identities.
\end{defi}
\begin{ex}\hfill
    \begin{itemize}
        \item 2-functors between ordinary categories are just ordinary functors.
        \item Forgetting finite limits is a 2-functor $\Lex\to\Cat$.
        \item For every small category $\C$, we have a 2-functor $(-)^{\C}\colon\Cat\to\Cat$:
            \begin{itemize}
                \item a category $\D$ is sent to $\D^\C$;
                \item a functor $F\colon\D\to\D'$ is sent to the postcomposition functor $F_*\colon\D^\C\to\D'^\C$;
                \item similarly, a natural transformation $\alpha\colon F\Rightarrow G\colon\D\to\D'$ is sent to a natural transformation $\alpha_*\colon F_*\Rightarrow G_*$ given by postcomposition with $\alpha$.
            \end{itemize}
            The notation with star is quite common in literature, more suggestive (but also lengthy) notation for $F_*$ would be $F\cdot-$.
        \item The construction of presheaves can be organised into a 2-functor $\Set^{(-)}\colon\Cat^{coop}\to\CAT$:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXEMiXSxbMCwyLCJcXEQiXSxbMiwwLCJcXFNldF57XFxDXntvcH19Il0sWzIsMiwiXFxTZXRee1xcRF57b3B9fS4iXSxbMCwxLCJGIiwyLHsiY3VydmUiOjJ9XSxbMCwxLCJHIiwwLHsiY3VydmUiOi0yfV0sWzMsMiwie0Zee29wfX1eKiIsMCx7ImN1cnZlIjotM31dLFszLDIsIntHXntvcH19XioiLDIseyJjdXJ2ZSI6M31dLFs0LDUsIlxcYWxwaGEiLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzUsNiwiIiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjQwLCJ0YXJnZXQiOjQwfSwibGV2ZWwiOjEsInN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNyw2LCJ7XFxhbHBoYV57b3B9fV4qIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	\C && {\Set^{\C^{op}}} \\
	\\
	\D && {\Set^{\D^{op}}.}
	\arrow[""{name=0, anchor=center, inner sep=0}, "F"', curve={height=12pt}, from=1-1, to=3-1]
	\arrow[""{name=1, anchor=center, inner sep=0}, "G", curve={height=-12pt}, from=1-1, to=3-1]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{{F^{op}}^*}", curve={height=-18pt}, from=3-3, to=1-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{{G^{op}}^*}"', curve={height=18pt}, from=3-3, to=1-3]
	\arrow[shorten <=19pt, shorten >=19pt, maps to, from=1, to=2]
	\arrow["\alpha"', shorten <=5pt, shorten >=5pt, Rightarrow, from=0, to=1]
	\arrow["{{\alpha^{op}}^*}", shorten <=7pt, shorten >=7pt, Rightarrow, from=3, to=2]
\end{tikzcd}\]
The functor ${F^{op}}^*$ is precomposition by $F^{op}$. Similarly, for 2-cells.
\item Both the previous items can be generalised to representable 2-functors: for any object $c$ of a 2-category $\C$, we have 2-functors $\C(c,-)\colon\C\to\Cat$, and $\C(-,c)\colon\C^{op}\to\Cat$.
    \end{itemize}
\end{ex}
\noindent 2-categories themselves can be also organised into a 2-category:
\begin{defi}
Let $F,G\colon\C\to\D$ be 2-functors. A \emph{2-natural transformation} $\alpha\colon F\Rightarrow G$ is a natural transformation between the underlying 1-functors of $F$ and $G$ such that for any 2-cell % https://q.uiver.app/#q=WzAsMixbMCwwLCJjIl0sWzEsMCwiYyciXSxbMCwxLCJmIiwyLHsiY3VydmUiOjJ9XSxbMCwxLCJnIiwwLHsiY3VydmUiOi0yfV0sWzMsMiwiXFxnYW1tYSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
$\begin{tikzcd}
	c & {c'}
	\arrow[""{name=0, anchor=center, inner sep=0}, "f"', curve={height=12pt}, from=1-1, to=1-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "g", curve={height=-12pt}, from=1-1, to=1-2]
	\arrow["\gamma", shorten <=3pt, shorten >=3pt, Rightarrow, from=1, to=0]
\end{tikzcd}\in\C$,
the diagram
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJGYyJdLFswLDIsIkZjJyJdLFsyLDAsIkdjIl0sWzIsMiwiR2MnIl0sWzAsMSwiRmYiLDAseyJjdXJ2ZSI6LTJ9XSxbMCwxLCJGZyIsMix7ImN1cnZlIjoyfV0sWzAsMiwiXFxhbHBoYV9jIl0sWzIsMywiR2ciLDIseyJjdXJ2ZSI6Mn1dLFsxLDMsIlxcYWxwaGFfe2MnfSIsMl0sWzIsMywiR2YiLDAseyJjdXJ2ZSI6LTJ9XSxbNSw0LCJGXFxnYW1tYSIsMix7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XSxbNyw5LCJHXFxnYW1tYSIsMix7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	Fc && Gc \\
	\\
	{Fc'} && {Gc'}
	\arrow["{\alpha_c}", from=1-1, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "Ff", curve={height=-12pt}, from=1-1, to=3-1]
	\arrow[""{name=1, anchor=center, inner sep=0}, "Fg"', curve={height=12pt}, from=1-1, to=3-1]
	\arrow[""{name=2, anchor=center, inner sep=0}, "Gg"', curve={height=12pt}, from=1-3, to=3-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, "Gf", curve={height=-12pt}, from=1-3, to=3-3]
	\arrow["{\alpha_{c'}}"', from=3-1, to=3-3]
	\arrow["F\gamma"', shorten <=5pt, shorten >=5pt, Rightarrow, from=1, to=0]
	\arrow["G\gamma"', shorten <=5pt, shorten >=5pt, Rightarrow, from=2, to=3]
\end{tikzcd}\]
commutes.
\end{defi}
\begin{nota}
    We denote $2$-$\CAT$ the 2-category of 2-categories, 2-functors, and 2-natural transformations.
\end{nota}
Even though we treat $2$-$\CAT$ here just as a 2-category, it has also a 3-dimensional structure:
\begin{defi}\label{modification}
    Let \[\begin{tikzcd}
	\C && {\D,}
	\arrow[""{name=0, anchor=center, inner sep=0}, "F", curve={height=-12pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "G"', curve={height=12pt}, from=1-1, to=1-3]
	\arrow["\alpha"', shift right=4, shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
	\arrow["\beta", shift left=4, shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
\end{tikzcd}\]
    be a diagram in 2-$\CAT$. A \emph{modification} $\Gamma\colon\alpha\Rrightarrow\beta$ consists of for every object $c\in\C$, a 2-cell $\Gamma_c\colon\alpha_c\Rightarrow\beta_c$ in $\D$ such that 
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJGYyJdLFswLDIsIkZjJyJdLFsyLDAsIkdjIl0sWzIsMiwiR2MnIl0sWzAsMSwiRmYiLDJdLFswLDIsIlxcYWxwaGFfYyIsMCx7ImN1cnZlIjotMn1dLFswLDIsIlxcYmV0YV9jIiwyLHsiY3VydmUiOjJ9XSxbMiwzLCJHZiJdLFsxLDMsIlxcYmV0YV97Yyd9IiwyLHsiY3VydmUiOjJ9XSxbMSwzLCJcXGFscGhhX3tjJ30iLDAseyJjdXJ2ZSI6LTJ9XSxbNSw2LCJcXEdhbW1hX2MiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzksOCwiXFxHYW1tYV97Yyd9IiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	Fc && Gc \\
	\\
	{Fc'} && {Gc'}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\alpha_c}", curve={height=-12pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\beta_c}"', curve={height=12pt}, from=1-1, to=1-3]
	\arrow["Ff"', from=1-1, to=3-1]
	\arrow["Gf", from=1-3, to=3-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{\beta_{c'}}"', curve={height=12pt}, from=3-1, to=3-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{\alpha_{c'}}", curve={height=-12pt}, from=3-1, to=3-3]
	\arrow["{\Gamma_c}", shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
	\arrow["{\Gamma_{c'}}", shorten <=3pt, shorten >=3pt, Rightarrow, from=3, to=2]
\end{tikzcd}\]
    commutes for every $f\colon c\to c'\in\C$.
\end{defi}
\begin{ex}
    Similarly to 1-category theory, any 1-cell $f\colon c\to c'$ in a 2-category $\C$ induces a 2-natural transformation $f^*\colon\C(c',-)\Rightarrow\C(c,-)$.  Moreover, given a 2-cell $\alpha\colon f\Rightarrow g$, we have a modification $\alpha^*\colon f^*\Rrightarrow g^*$.
\end{ex}
\subsection{Limits}
We want to shift the definition of limits so that it interacts also with 2-cells. That is for binary products we would like to have an isomorphism $\C(c,a\times b)\cong\C(c,a)\times\C(c,b)$ of categories, not a mere bijection of sets. For example, the 2-category generated by
% https://q.uiver.app/#q=WzAsMixbMCwwLCJjIl0sWzIsMCwiZCwiXSxbMCwxLCJmIiwyLHsiY3VydmUiOjJ9XSxbMCwxLCJmIiwwLHsiY3VydmUiOi0yfV0sWzMsMiwiXFxhbHBoYSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	c && {d,}
	\arrow[""{name=0, anchor=center, inner sep=0}, "f"', curve={height=12pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "f", curve={height=-12pt}, from=1-1, to=1-3]
	\arrow["\alpha", shorten <=3pt, shorten >=3pt, Rightarrow, from=1, to=0]
\end{tikzcd}\]
where $\alpha^2=id_f$, has 1-categorical products, but it does not have a 2-categorical product $d\times d$. Moreover, for the study of 2-categorical properties, we need to generalise the notion of limits even more to capture universal properties like in the following situation:

Consider a slice category $\C/c$. We have a natural transformation
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXEMvYyJdLFswLDEsIlxcQyJdLFsxLDAsIlxcbWF0aGJmMSJdLFswLDEsImQiLDJdLFswLDIsIiEiXSxbMiwxLCJjIl0sWzMsMiwiIiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	{\C/c} & \mathbf1 \\
	\C
	\arrow["{!}", from=1-1, to=1-2]
	\arrow[""{name=0, anchor=center, inner sep=0}, "d"', from=1-1, to=2-1]
	\arrow["c", from=1-2, to=2-1]
	\arrow[shorten <=5pt, shorten >=5pt, Rightarrow, from=0, to=1-2]
\end{tikzcd}\]
such that given any other natural transformation 
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXEEiXSxbMSwxLCJcXEMsIl0sWzIsMCwiXFxtYXRoYmYxIl0sWzAsMSwiRiIsMl0sWzAsMiwiISJdLFsyLDEsImMiXSxbMywyLCJcXGFscGhhIiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	\A && \mathbf1 \\
	& {\C,}
	\arrow["{!}", from=1-1, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "F"', from=1-1, to=2-2]
	\arrow["c", from=1-3, to=2-2]
	\arrow["\alpha"', shorten <=8pt, shorten >=8pt, Rightarrow, from=0, to=1-3]
\end{tikzcd}\]
we have a unique functor $\overline{F}\colon\D\to\C/c$ such that 
% https://q.uiver.app/#q=WzAsNyxbMCwwLCJcXEEiXSxbMSwxLCJcXEMiXSxbMiwwLCJcXG1hdGhiZjEiXSxbMywwLCJcXEEiXSxbNCwwLCJcXEMvYyJdLFs0LDEsIlxcQy4iXSxbNSwwLCJcXG1hdGhiZjEiXSxbMCwxLCJGIiwyXSxbMCwyLCIhIl0sWzIsMSwiYyJdLFszLDQsIlxcb3ZlcmxpbmV7Rn0iXSxbNCw1LCJkIiwyXSxbNCw2LCIhIl0sWzYsNSwiYyJdLFs3LDIsIlxcYWxwaGEiLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzExLDYsIiIsMix7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XSxbOSwxMSwiPSIsMSx7ImxhYmVsX3Bvc2l0aW9uIjo0MCwic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
\[\begin{tikzcd}
	\A && \mathbf1 & \A & {\C/c} & \mathbf1 \\
	& \C &&& {\C.}
	\arrow["{!}", from=1-1, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "F"', from=1-1, to=2-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "c", from=1-3, to=2-2]
	\arrow["{\overline{F}}", from=1-4, to=1-5]
	\arrow["{!}", from=1-5, to=1-6]
	\arrow[""{name=2, anchor=center, inner sep=0}, "d"', from=1-5, to=2-5]
	\arrow["c", from=1-6, to=2-5]
	\arrow["\alpha"', shorten <=8pt, shorten >=8pt, Rightarrow, from=0, to=1-3]
	\arrow["{=}"{description, pos=0.4}, draw=none, from=1, to=2]
	\arrow[shorten <=5pt, shorten >=5pt, Rightarrow, from=2, to=1-6]
\end{tikzcd}\]
This seems very much as a property of some kind of limits, but $\C/c$ cannot be, in general, a limit of a diagram valued just in the subcategory of $\Cat$ given by $\mathbf{1}\xrightarrow{x}\C$.\footnote{For example, categories with one object are closed under 1-categorical limits in $\Cat$, but they are not closed under slice categories. A suggestion from Tomáš Perutka.} 

Let us mention that if we considered powers by categories as limits, we could construct the slice as the following pullback:
\[\begin{tikzcd}
	\C/c & {\C^{\mathbf2}} \\
	\C & {\C\times \C.}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["{(\mathbf{dom},\mathbf{cod})}", from=1-2, to=2-2]
	\arrow["{(id_\C,c)}"', from=2-1, to=2-2]
\end{tikzcd}\]
The definition of limits is therefore generalised as follows:

\begin{defi}
Let $J$ be a small indexing 2-category, $W\colon J\to\Cat$ a 2-functor called a \emph{weight}, and $D\colon J\to\C$ a diagram in a 2-category $\C$. The category $[J, \Cat](W, \C(-,D))$ of 2-natural transformations and modifications is called the \emph{category of cones over $D$ weighted by $W$}. A \emph{limit of $D$ weighted by $W$} (or just a \emph{2-limit} for short) is an object $\lim_WD\in\C$ together with an isomorphism of categories 2-natural in $c$:
\begin{equation}\label{weighted limit definition}
    \C(c,\lim_WD)\cong [J, \Cat](W, \C(c,D)).
\end{equation}
\end{defi}
\begin{defi}
    A 2-limit is called \emph{conical} if its weight is constantly $\mathbf{1}$.
\end{defi}
Let us unpack a bit the definition of a conical limit. An arrow $c\to\lim_{\mathbf{1}}D$ should be the same as a 2-natural transformation $\alpha\in[J, \Cat](\mathbf{1}, \C(c,D))$. That is a collection of arrows $\alpha_j\colon \mathbf{1}\to\C(c, Dj)$ such that for every $f\colon j\to j'$, we have $Df_*\alpha_j=\alpha_j'$ (by naturality). In other words, a collection of arrows $\alpha_j\colon c\to Dj$ such that $Df\alpha_j=\alpha_{j'}$, i.e. an ordinary cone known from limits in 1-category theory. 

Now, consider a general $W$ and $\C=\Cat$. Then components of $\alpha\in[J, \Cat](W, \Cat(c,D))$ are functors $Wj\to (Dj)^c$. By cartesian closed structure of $\Cat$, this is the same as functors $c\to Dj^{Wj}$. Thus we again obtain a `cone over the diagram $D$'; just every object is in the diagram `as many times as is its weight'. 

Having the isomorphism \ref{weighted limit definition}, we can plug in $c=\lim_WD$ and $id_{\lim_WD}$. This yields a limiting cone on the right-hand side.
\begin{ex}[\textbf{/Definition}]\label{ex:limits} We mention a few special cases relevant for the thesis:
\begin{itemize}
    \item All 1-categorical limits can be considered as conical limits indexed by discrete 2-categories.    
    \item Lax limits of arrows are indexed by $\mathbf{2}$, and have the weight $\{1\}\hookrightarrow\{0\to1\}$. Let $F\colon\C\to\D$ be a functor. Then its lax limit $L$ has the universal property that functors $\A\to L$ are the same as a pair of horizontal functors making the following square commute:
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXHsxXFx9Il0sWzEsMCwiXFxDYXQoXFxBLFxcQykiXSxbMCwxLCJcXHswXFx0bzFcXH0iXSxbMSwxLCJcXENhdChcXEEsXFxEKS4iXSxbMCwxXSxbMCwyLCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsyLDNdLFsxLDMsIkZfKiJdXQ==
\[\begin{tikzcd}
	{\{1\}} & {\Cat(\A,\C)} \\
	{\{0\to1\}} & {\Cat(\A,\D).}
	\arrow[from=1-1, to=1-2]
	\arrow[hook, from=1-1, to=2-1]
	\arrow["{F_*}", from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
\end{tikzcd}\]
    These amount to a functor $G\colon\A\to\C$ and a natural transformation $\alpha$ between two functors $\A\to\D$ such that the codomain of $\alpha$ is $F_*G=FG$. We can see that if $\C=\mathbf{1}$, we obtain exactly the universal property of slice categories mentioned in the beginning of this section. 
    
    Generally, one can easily verify that the lax limit of $F$ can be described as the category with 
    \begin{itemize}
        \item objects $(c\in\C, d\in\D, f\colon c\to Fd)$;
        \item arrows $(c,d,f)\to(c',d',f')$ are pairs $(g\colon c\to c', h\colon d\to d')$ such that $f'\cdot g=Fh\cdot f$.
    \end{itemize}
    \item Powers are limits indexed by $\mathbf{1}$. In $\Cat$, these are functor categories. A special case are powers by $\mathbf{2}$. Their limiting cone is of the form $\Cat(\mathbf{2}, \C(c^2,c))$, i.e. two arrows and a 2-cell between them. We usually name the arrows $\mathbf{dom}$ and $\mathbf{cod}$; the 2-cell is then $\mathbf{dom}\Rightarrow\mathbf{cod}$.
    \item Inserters are indexed by a parallel pair of arrows, and their weight is % https://q.uiver.app/#q=WzAsMixbMCwwLCJcXHtcXHN0YXJcXH0iXSxbMSwwLCJcXHswXFx0bzFcXH0iXSxbMCwxLCIxIiwyLHsiY3VydmUiOjJ9XSxbMCwxLCIwIiwwLHsiY3VydmUiOi0yfV1d
\[\begin{tikzcd}
	{\{\star\}} & {\{0\to1\}.}
	\arrow["1"', curve={height=12pt}, from=1-1, to=1-2]
	\arrow["0", curve={height=-12pt}, from=1-1, to=1-2]
\end{tikzcd}\]    
    In other words, an inserter of a parallel pair of arrows $f,g\colon c\to c'$ in a 2-category is a universal arrow $h\colon l\to c$ equipped with a 2-cell $\alpha\colon hf\Rightarrow hg$.
    \item Equifiers are indexed by 
% https://q.uiver.app/#q=WzAsMyxbMSwwLCJcXGJ1bGxldCJdLFszLDAsIlxcYnVsbGV0LCJdLFswLDAsIkoiXSxbMCwxLCIiLDIseyJjdXJ2ZSI6NH1dLFswLDEsIiIsMCx7ImN1cnZlIjotNH1dLFsyLDAsIjo9IiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzQsMywiIiwwLHsib2Zmc2V0Ijo0LCJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzQsMywiIiwyLHsib2Zmc2V0IjotNCwic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	J & \bullet && {\bullet,}
	\arrow["{:=}"{description}, draw=none, from=1-1, to=1-2]
	\arrow[""{name=0, anchor=center, inner sep=0}, curve={height=24pt}, from=1-2, to=1-4]
	\arrow[""{name=1, anchor=center, inner sep=0}, curve={height=-24pt}, from=1-2, to=1-4]
	\arrow[shift right=4, shorten <=6pt, shorten >=6pt, Rightarrow, from=1, to=0]
	\arrow[shift left=4, shorten <=6pt, shorten >=6pt, Rightarrow, from=1, to=0]
\end{tikzcd}\]
    and their weight is
    % https://q.uiver.app/#q=WzAsMixbMCwwLCJcXHtcXHN0YXJcXH0iXSxbMiwwLCJcXHswXFx0bzFcXH0iXSxbMCwxLCIxIiwyLHsiY3VydmUiOjR9XSxbMCwxLCIwIiwwLHsiY3VydmUiOi00fV0sWzMsMiwiIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	{\{\star\}} && {\{0\to1\}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "1"', curve={height=24pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "0", curve={height=-24pt}, from=1-1, to=1-3]
	\arrow[shorten <=6pt, shorten >=6pt, Rightarrow, from=1, to=0]
\end{tikzcd}\]
    (both generating 2-cells are mapped to the same 2-cell between $0$ and $1$). Explicitly, an equifier of 2-cells $\alpha,\beta\colon f\Rightarrow g\colon c\to c'$ is a universal arrow $h\colon l\to c$ such that $\alpha h=\beta h$.
\end{itemize}
\end{ex}
Using 2-limits, discrete (iso)fibrations can be internalised into 2-categories.
\begin{defi}\label{disfib usage}
    A morphism $p\colon e\to b$ is a \emph{discrete fibration in a 2-category $\C$} if the diagram
    % https://q.uiver.app/#q=WzAsMyxbMSwxLCJlIl0sWzEsMiwiYiJdLFswLDAsImVeXFxtYXRoYmYyIl0sWzAsMSwicCJdLFsyLDAsIlxcbWF0aGJme2NvZH0iXSxbMiwxLCJwXFxjZG90XFxtYXRoYmZ7ZG9tfSIsMix7ImN1cnZlIjozfV0sWzUsMCwiIiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwfX1dXQ==
\[\begin{tikzcd}
	{e^\mathbf2} \\
	& e \\
	& b
	\arrow["{\mathbf{cod}}", from=1-1, to=2-2]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{p\cdot\mathbf{dom}}"', curve={height=18pt}, from=1-1, to=3-2]
	\arrow["p", from=2-2, to=3-2]
	\arrow[shorten <=5pt, Rightarrow, from=0, to=2-2]
\end{tikzcd}\]
    exhibits $e^\mathbf{2}$ as a lax limit of $p$. 
\end{defi}
\begin{rem}
This can be reformulated as: For every 2-cell % https://q.uiver.app/#q=WzAsMyxbMCwxLCJlIl0sWzAsMiwiYi4iXSxbMSwwLCJjIl0sWzAsMSwicCIsMl0sWzIsMCwiZiIsMl0sWzIsMSwiZyIsMCx7ImN1cnZlIjotMn1dLFs1LDAsIiIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMH19XV0=
\[\begin{tikzcd}
	& c \\
	e \\
	{b,}
	\arrow["f"', from=1-2, to=2-1]
	\arrow[""{name=0, anchor=center, inner sep=0}, "g", curve={height=-12pt}, from=1-2, to=3-1]
	\arrow["p"', from=2-1, to=3-1]
	\arrow[shorten <=4pt, Rightarrow, from=0, to=2-1]
\end{tikzcd}\]
there is a unique 2-cell $f'\Rightarrow f$ such that
% https://q.uiver.app/#q=WzAsNixbMywwLCJlIl0sWzMsMSwiYi4iXSxbNCwwLCJjIl0sWzAsMCwiZSJdLFswLDEsImIiXSxbMSwwLCJjIl0sWzAsMSwicCIsMl0sWzIsMCwiZiIsMl0sWzIsMSwiZyIsMCx7ImN1cnZlIjotMn1dLFszLDQsInAiLDJdLFs1LDMsImYiLDIseyJjdXJ2ZSI6Mn1dLFs1LDQsImciLDAseyJjdXJ2ZSI6LTN9XSxbNSwzLCJmJyIsMCx7ImN1cnZlIjotMn1dLFs4LDAsIiIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMH19XSxbMTEsMywiPSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMH0sInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxMiwxMCwiIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dLFsxMSwwLCI9IiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
\[\begin{tikzcd}
	e & c && e & c \\
	b &&& {b.}
	\arrow["p"', from=1-1, to=2-1]
	\arrow[""{name=0, anchor=center, inner sep=0}, "f"', curve={height=12pt}, from=1-2, to=1-1]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{f'}", curve={height=-12pt}, from=1-2, to=1-1]
	\arrow[""{name=2, anchor=center, inner sep=0}, "g", curve={height=-18pt}, from=1-2, to=2-1]
	\arrow["p"', from=1-4, to=2-4]
	\arrow["f"', from=1-5, to=1-4]
	\arrow[""{name=3, anchor=center, inner sep=0}, "g", curve={height=-12pt}, from=1-5, to=2-4]
	\arrow["{=}", draw=none, from=2, to=1-1]
	\arrow[shorten <=3pt, shorten >=3pt, Rightarrow, from=1, to=0]
	\arrow["{=}", draw=none, from=2, to=1-4]
	\arrow[shorten <=4pt, Rightarrow, from=3, to=1-4]
\end{tikzcd}\]
We can see that in the case of $\Cat$, this gives us that $p$ is a discrete fibration from Definition \ref{def:dis fib} by setting $c=\mathbf{1}$. It is also quite easily seen that the condition for $c=\mathbf{1}$ implies the condition for any category $c$.
\end{rem}
\begin{rem}
    For discrete isofibrations, we have the same diagrams, but with $e^I$ instead of $e^{\mathbf{2}}$, and an invertible 2-cells inside.
\end{rem}
As is the case with ordinary limits, many 2-limits can be constructed via simpler ones:
\begin{ex}\label{powers are powerful}\hfill
\begin{itemize}
    \item Equifiers can be constructed using powers by $\mathbf{2}$ and equalisers:
    Given a diagram
% https://q.uiver.app/#q=WzAsMixbMCwwLCJjIl0sWzIsMCwiYycsIl0sWzAsMSwiZiIsMCx7ImN1cnZlIjotMn1dLFswLDEsImciLDIseyJjdXJ2ZSI6Mn1dLFsyLDMsIlxcYWxwaGEiLDIseyJvZmZzZXQiOjQsInNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XSxbMiwzLCJcXGJldGEiLDAseyJvZmZzZXQiOi00LCJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV1d
\[\begin{tikzcd}
	c && {c',}
	\arrow[""{name=0, anchor=center, inner sep=0}, "f", curve={height=-12pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "g"', curve={height=12pt}, from=1-1, to=1-3]
	\arrow["\alpha"', shift right=4, shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
	\arrow["\beta", shift left=4, shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
\end{tikzcd}\]
its equifier is the equaliser of the following diagram:
% https://q.uiver.app/#q=WzAsMixbMCwwLCJjIl0sWzEsMCwiYydee1xcbWF0aGJmMn0uIl0sWzAsMSwiXFxvdmVybGluZXtcXGFscGhhfSIsMCx7Im9mZnNldCI6LTJ9XSxbMCwxLCJcXG92ZXJsaW5le1xcYmV0YX0iLDIseyJvZmZzZXQiOjJ9XV0=
\[\begin{tikzcd}
	c & {c'^{\mathbf2}.}
	\arrow["{\overline{\alpha}}", shift left=2, from=1-1, to=1-2]
	\arrow["{\overline{\beta}}"', shift right=2, from=1-1, to=1-2]
\end{tikzcd}\]
    By $\overline{\alpha}$, we mean the unique 1-cell that is equal to $\alpha$ after postcomposition with the canonical 2-cell $\mathbf{dom}\Rightarrow\mathbf{cod}\colon c'^{\mathbf{2}}\rightarrow c'$.
    \item Inserter of a parallel pair $f,g\colon c\to c'$ can be constructed as the following pullback:
    % https://q.uiver.app/#q=WzAsNCxbMCwxLCJjIl0sWzEsMSwiYydcXHRpbWVzIGMnLiJdLFsxLDAsImMnXntcXG1hdGhiZjJ9Il0sWzAsMCwiXFxidWxsZXQiXSxbMCwxLCIoZixnKSIsMl0sWzIsMSwiKFxcbWF0aGJme2RvbX0sXFxtYXRoYmZ7Y29kfSkiXSxbMywwXSxbMywyXSxbMywxLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	\bullet & {c'^{\mathbf2}} \\
	c & {c'\times c'.}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["{(\mathbf{dom},\mathbf{cod})}", from=1-2, to=2-2]
	\arrow["{(f,g)}"', from=2-1, to=2-2]
\end{tikzcd}\]
\end{itemize}
\end{ex}
\begin{prop}\label{2-complete}
    Let $\C$ be a 2-category with all products, equalisers, and powers by $\mathbf{2}$. Then $\C$ has all 2-limits.
\end{prop}
\begin{proof}
    From the previous example, we know that $\C$ has also inserters and equifiers. By \cite[Proposition 4.4]{Kelly1989ElementaryOO}, it has all powers. Now, every 2-limit is an equaliser of products of powers by \cite[construction 3.2]{Kelly1989ElementaryOO}.
\end{proof}
The following important class of 2-limits first appeared in \cite{BIRD19891}:
\begin{defi}
    A 2-category has \emph{flexible limits} if it has products, inserters, equifiers, and splitting of idempotents.
\end{defi}
\begin{rem}
    Splititng of idempotents are conical limits indexed by the free idempotent -- the 1-category with one object and multiplicative monoid $\mathbb Z_2$ as its hom-set.
\end{rem}

Regarding the preservation of 2-limits, we have standard definitions and results:
\begin{defi}
    A 2-functor $F\colon\C\to\D$ \emph{preserves a 2-limit} $\lim_WD$ if $F$ applied to the limiting cone $W\Rightarrow\C(\lim_WD,D)$ is a limiting cone for $F\lim_WFD$.
\end{defi}
\begin{defi}
    Let $L\colon\C\leftrightarrows\D\colon R$ be 2-functors. They form a \emph{2-adjunction} if we have an isomorphism $\D(Lc,d)\cong\C(c,Rd)$ 2-natural in both $c,d$.
\end{defi}
\begin{prop}
    Let $F$ be a representable or a 2-adjoint, then $F$ preserves 2-limits.
\end{prop}
\begin{proof}
    See \cite[Section 3.2]{kelly_enriched}.
\end{proof}
Of course, everything written in this section dualises to 2-colimits.
\subsection{Weak Aspects}
Not every construction between 2-categories that acts on objects, 1-cells, and 2-cells is a 2-functor. We can see this behaviour for discrete fibrations. For any natural transformation
% https://q.uiver.app/#q=WzAsMixbMCwwLCJcXEMiXSxbMiwwLCJcXEQsIl0sWzAsMSwiRiIsMCx7ImN1cnZlIjotM31dLFswLDEsIkciLDIseyJjdXJ2ZSI6M31dLFsyLDMsIlxcYWxwaGEiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV1d
\[\begin{tikzcd}
	\C && {\D,}
	\arrow[""{name=0, anchor=center, inner sep=0}, "F", curve={height=-18pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "G"', curve={height=18pt}, from=1-1, to=1-3]
	\arrow["\alpha", shorten <=5pt, shorten >=5pt, Rightarrow, from=0, to=1]
\end{tikzcd}\]
we have the natural transformation
% https://q.uiver.app/#q=WzAsMixbMCwwLCJcXERGaWJ7XFxDfSJdLFsyLDAsIlxcREZpYntcXER9LiJdLFsxLDAsIkZeKiIsMix7ImN1cnZlIjozfV0sWzEsMCwiR14qIiwwLHsiY3VydmUiOi0zfV0sWzMsMiwiXFxhbHBoYV4qIiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	{\DFib{\C}} && {\DFib{\D}.}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{F^*}"', curve={height=18pt}, from=1-3, to=1-1]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{G^*}", curve={height=-18pt}, from=1-3, to=1-1]
	\arrow["{\alpha^*}"', shorten <=5pt, shorten >=5pt, Rightarrow, from=1, to=0]
\end{tikzcd}\]
Pulling back along $F$ is a functor by \ref{pullback fibration}. Component of the natural transformation $\alpha^*$ at $H\colon\A\to\D$ is constructed using the universal property of pullbacks:
% https://q.uiver.app/#q=WzAsNSxbMSwzLCJcXEMiXSxbMywzLCJcXEQsIl0sWzEsMSwiRl4qXFxBIl0sWzMsMSwiXFxBIl0sWzAsMCwiR14qXFxBIl0sWzAsMSwiRiIsMl0sWzIsMCwiRl4qSCIsMl0sWzMsMSwiSCJdLFsyLDNdLFsyLDEsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFs0LDAsIkdeKkgiLDIseyJjdXJ2ZSI6M31dLFs0LDMsIlxccGknIiwwLHsiY3VydmUiOi0zfV0sWzQsMiwiIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d
\[\begin{tikzcd}
	{G^*\A} \\
	& {F^*\A} && \A \\
	\\
	& \C && {\D,}
	\arrow[dashed, from=1-1, to=2-2]
	\arrow["{\pi'}", curve={height=-18pt}, from=1-1, to=2-4]
	\arrow["{G^*H}"', curve={height=18pt}, from=1-1, to=4-2]
	\arrow[from=2-2, to=2-4]
	\arrow["{F^*H}"', from=2-2, to=4-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=4-4]
	\arrow["H", from=2-4, to=4-4]
	\arrow["F"', from=4-2, to=4-4]
\end{tikzcd}\]
where the arrow $\pi'$ is constructed using the fact that $H$ is a discrete fibration: We denote $\pi\colon G^*\A\to\A$ the pullback projection. Now, we have a unique natural transformation $\pi'\Rightarrow\pi$ such that 
% https://q.uiver.app/#q=WzAsOCxbMSwyLCJcXEMiXSxbMywyLCJcXEQiXSxbMywwLCJcXEEiXSxbMCwyLCJHXipcXEEiXSxbNCwyLCJHXipcXEEiXSxbNSwyLCJcXEMiXSxbNiwyLCJcXEQuIl0sWzYsMCwiXFxBIl0sWzAsMSwiRiIsMix7ImN1cnZlIjoyfV0sWzIsMSwiSCJdLFszLDAsIkdeKkgiLDJdLFszLDIsIlxccGkiXSxbMCwxLCJHIiwwLHsiY3VydmUiOi0yfV0sWzQsNSwiR14qSCIsMl0sWzUsNiwiRiIsMl0sWzcsNiwiSCJdLFs0LDcsIlxccGkiLDAseyJjdXJ2ZSI6LTJ9XSxbNCw3LCJcXHBpJyIsMix7ImN1cnZlIjoyfV0sWzgsMTIsIlxcYWxwaGEiLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzE3LDE2LCIiLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzE3LDE1LCI9IiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzksMTYsIj0iLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTEsMTIsIj0iLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
\[\begin{tikzcd}
	&&& \A &&& \A \\
	\\
	{G^*\A} & \C && \D & {G^*\A} & \C & {\D.}
	\arrow[""{name=0, anchor=center, inner sep=0}, "H", from=1-4, to=3-4]
	\arrow[""{name=1, anchor=center, inner sep=0}, "H", from=1-7, to=3-7]
	\arrow[""{name=2, anchor=center, inner sep=0}, "\pi", from=3-1, to=1-4]
	\arrow["{G^*H}"', from=3-1, to=3-2]
	\arrow[""{name=3, anchor=center, inner sep=0}, "F"', curve={height=12pt}, from=3-2, to=3-4]
	\arrow[""{name=4, anchor=center, inner sep=0}, "G", curve={height=-12pt}, from=3-2, to=3-4]
	\arrow[""{name=5, anchor=center, inner sep=0}, "\pi", curve={height=-12pt}, from=3-5, to=1-7]
	\arrow[""{name=6, anchor=center, inner sep=0}, "{\pi'}"', curve={height=12pt}, from=3-5, to=1-7]
	\arrow["{G^*H}"', from=3-5, to=3-6]
	\arrow["F"', from=3-6, to=3-7]
	\arrow["{=}"', draw=none, from=0, to=5]
	\arrow["{=}", draw=none, from=2, to=4]
	\arrow["\alpha"', shorten <=3pt, shorten >=3pt, Rightarrow, from=3, to=4]
	\arrow[shorten <=4pt, shorten >=4pt, Rightarrow, from=6, to=5]
	\arrow["{=}"', draw=none, from=6, to=1]
\end{tikzcd}\]
Thus, we can consider discrete fibrations as an assignment of objects, 1-cells, and 2-cells $\Cat^{coop}\rightsquigarrow\CAT$. However, this assignment is not a 2-functor as, in general, we do not have $F^*F'^*=(F'F)^*$ -- pullbacks are not unique; they are unique up to a natural isomorphism. Therefore, we have only an isomorphism $F^*F'^*\cong(F'F)^*$. Assignments between 2-categories such that preservation of composition of 1-cells holds only up to an isomorphism are called \emph{pseudofunctors}. We do not define these here formally (see \cite[Definition 4.1.2]{2-dimensional}) as we do not need them, but there are other weak versions of 2-categorical notions that are necessary for this thesis:
\begin{defi}
A \emph{pseudonatural transformation} $\phi$ between 2-functors $F,G\colon\C\to\D$ is 
\begin{itemize}
    \item a collection of 1-cells $\phi_c\colon Fc\to Gc$ for $c\in\C$;
    \item a collection of invertible 2-cells
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJGYyJdLFsyLDAsIkdjIl0sWzAsMiwiRmMnIl0sWzIsMiwiR2MnIl0sWzAsMSwiXFxwaGlfYyJdLFswLDIsIkZmIiwyXSxbMiwzLCJcXHBoaV97Yyd9IiwyXSxbMSwzLCJHZiJdLFsxLDIsIlxccGhpX3tmfSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH0sImxldmVsIjoyfV1d
\[\begin{tikzcd}
	Fc && Gc \\
	\\
	{Fc'} && {Gc'}
	\arrow["{\phi_c}", from=1-1, to=1-3]
	\arrow["Ff"', from=1-1, to=3-1]
	\arrow["{\phi_{f}}", shorten <=11pt, shorten >=11pt, Rightarrow, from=1-3, to=3-1]
	\arrow["Gf", from=1-3, to=3-3]
	\arrow["{\phi_{c'}}"', from=3-1, to=3-3]
\end{tikzcd}\]
    for $f\colon c\to c'$.
\end{itemize} 
    These are compatible with identities, composition, and 2-cells (see strong transformation in \cite[Definition 4.2.1]{2-dimensional} for details). 
    
    A \emph{modification between pseudonatural transformations} $\Gamma\colon\phi\Rrightarrow\rho$ is a collection of 2-cells $\Gamma_c\colon\phi_c\Rightarrow\rho_c$ satisfying
    % https://q.uiver.app/#q=WzAsOCxbNCwwLCJGYyJdLFs2LDAsIkdjIl0sWzQsMiwiRmMnIl0sWzYsMiwiR2MnIl0sWzAsMCwiRmMiXSxbMiwwLCJHYyJdLFswLDIsIkZjJyJdLFsyLDIsIkdjJyJdLFswLDEsIlxccGhpX2MiXSxbMCwyLCJGZiIsMl0sWzIsMywiXFxwaGlfe2MnfSIsMCx7ImN1cnZlIjotMn1dLFsxLDMsIkdmIl0sWzEsMiwiXFxwaGlfe2Z9IiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwibGV2ZWwiOjJ9XSxbMiwzLCJcXHJob197Yyd9IiwyLHsiY3VydmUiOjJ9XSxbNCw1LCJcXHBoaV9jIiwwLHsiY3VydmUiOi0yfV0sWzQsNSwiXFxyaG9fYyIsMix7ImN1cnZlIjoyfV0sWzQsNiwiRmYiLDJdLFs1LDcsIkdmIl0sWzYsNywiXFxyaG9fe2MnfSIsMl0sWzUsNiwiXFxyaG9fZiIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH0sImxldmVsIjoyfV0sWzEwLDEzLCJcXEdhbW1hX3tjJ30iLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzE0LDE1LCJcXEdhbW1hX2MiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzE3LDksIj0iLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
\[\begin{tikzcd}
	Fc && Gc && Fc && Gc \\
	\\
	{Fc'} && {Gc'} && {Fc'} && {Gc'}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\phi_c}", curve={height=-12pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\rho_c}"', curve={height=12pt}, from=1-1, to=1-3]
	\arrow["Ff"', from=1-1, to=3-1]
	\arrow["{\rho_f}", shorten <=11pt, shorten >=11pt, Rightarrow, from=1-3, to=3-1]
	\arrow[""{name=2, anchor=center, inner sep=0}, "Gf", from=1-3, to=3-3]
	\arrow["{\phi_c}", from=1-5, to=1-7]
	\arrow[""{name=3, anchor=center, inner sep=0}, "Ff"', from=1-5, to=3-5]
	\arrow["{\phi_{f}}"', shorten <=11pt, shorten >=11pt, Rightarrow, from=1-7, to=3-5]
	\arrow["Gf", from=1-7, to=3-7]
	\arrow["{\rho_{c'}}"', from=3-1, to=3-3]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{\phi_{c'}}", curve={height=-12pt}, from=3-5, to=3-7]
	\arrow[""{name=5, anchor=center, inner sep=0}, "{\rho_{c'}}"', curve={height=12pt}, from=3-5, to=3-7]
	\arrow["{\Gamma_c}", shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
	\arrow["{=}", draw=none, from=2, to=3]
	\arrow["{\Gamma_{c'}}", shorten <=3pt, shorten >=3pt, Rightarrow, from=4, to=5]
\end{tikzcd}\]
for every $f\colon c\to c'$.
\end{defi}
\begin{rem}
    If for every $f$, $\phi_f=id$, we obtain 2-natural transformations and modifications as defined before.
\end{rem}
\begin{rem}
    Had we defined pseudofunctors, we could have generalised the definition of a pseudonatural transformation to a morphism of pseudofunctors. With these definitions in hand, category of elements can be seen as a pseudonatural equivalence of pseudofunctors $\Set^{(-)^{op}}\Rightarrow\DFib{(-)}\colon\Cat^{coop}\to\CAT$ \cite[Theorem 2.3.2]{LOREGIAN2020496}. This justifies usage of the same notation for pulling-back and precompositions.
\end{rem}
\begin{nota}
    Let $\C$ be a 2-category. We denote $Ps(\C, \Cat)$ the 2-category of 2-functors, pseudonatural transformations, and modifications.
\end{nota}
With these weak transformations, we can weaken other 2-categorical notions:
\begin{defi}
Let $J$ be a small indexing 2-category, $W\colon J\to\Cat$ a 2-functor called a \emph{weight}, and $D\colon J\to\C$ a diagram in a 2-category $\C$. The category $Ps(J, \Cat)(W, \C(-,D))$ is called the \emph{category of cones over $D$ weighted by $W$}. A \emph{bilimit of $D$ weighted by $W$} is an object $\lim_WD\in\C$ together with an equivalence of categories pseudonatural in $c$:
$$ \C(c,\lim_WD)\simeq Ps(J, \Cat)(W, \C(c,D)).$$
\end{defi}
\begin{defi}
    Let $U\colon\C\to\D$ be a 2-functor. Its \emph{left biadjoint} consists of an assignment $F\colon ob\,\D\to ob\,\C$ together with a collection of arrows $\eta_d\colon d\to UFd$ such that the functor
% https://q.uiver.app/#q=WzAsNyxbMCwxLCJGZCJdLFsxLDEsImMiXSxbMywxLCJkIl0sWzQsMSwiVUZkIl0sWzUsMSwiVWMiXSxbMCwwLCJcXEMoRmQsYykiXSxbNCwwLCJcXEQoZCxVYykiXSxbMCwxLCJmIiwwLHsiY3VydmUiOi0yfV0sWzAsMSwiZyIsMix7ImN1cnZlIjoyfV0sWzEsMiwiIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFsyLDMsIlxcZXRhX2QiXSxbMyw0LCJVZiIsMCx7ImN1cnZlIjotMn1dLFszLDQsIlVnIiwyLHsiY3VydmUiOjJ9XSxbNSw2XSxbNyw4LCJcXGFscGhhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dLFsxMSwxMiwiVVxcYWxwaGEiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV1d
\[\begin{tikzcd}
	{\C(Fd,c)} &&&& {\D(d,Uc)} \\
	Fd & c && d & UFd & Uc
	\arrow[from=1-1, to=1-5]
	\arrow[""{name=0, anchor=center, inner sep=0}, "f", curve={height=-12pt}, from=2-1, to=2-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "g"', curve={height=12pt}, from=2-1, to=2-2]
	\arrow[shorten <=10pt, shorten >=10pt, maps to, from=2-2, to=2-4]
	\arrow["{\eta_d}", from=2-4, to=2-5]
	\arrow[""{name=2, anchor=center, inner sep=0}, "Uf", curve={height=-12pt}, from=2-5, to=2-6]
	\arrow[""{name=3, anchor=center, inner sep=0}, "Ug"', curve={height=12pt}, from=2-5, to=2-6]
	\arrow["\alpha", shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
	\arrow["U\alpha", shorten <=3pt, shorten >=3pt, Rightarrow, from=2, to=3]
\end{tikzcd}\]
is an equivalence of categories for every $c,d$.
\end{defi}
\begin{rem}
    As with ordinary adjunctions, there are many possible equivalent definitions. In fact, $F$ can be extended to a pseudofunctor and the equivalences $\C(Fd,c)\simeq\D(d,Uc)$ can be organised into a pseudonatural equivalence \cite[Theorem 9.17]{field_theory}.
\end{rem}

\chapter{Semantics of Dependent Type Theory}\label{chap:semantics}
In this chapter, we briefly describe dependent type theory and natural models -- one of approaches to its semantics. Then we introduce categories with representable maps -- a proposal for categorical definition of type theory.

\section{Dependent Type Theory}\label{sec:dtt}
Type theory is a formal system that provides a framework that enables us to speak about collections and their elements. In the context of type theory, collections are called types and elements are terms. Contrary to set theory, there is usually a clear syntactic distinction between types and terms, and every term has assigned a unique type. There are many possible variants (e.g. simply typed lambda calculus \cite[Chapter 2]{jacBook}, System F \cite[Chapter 8]{jacBook}, or dependent type theory \cite{ssdt}) that have different flavours. The common denominator of these variants (at least the three ones mentioned) is that they are extensions of multisorted universal algebra. That is, they have types (sorts) and terms together with rules that allow us to build more complicated terms out of simpler ones via constructors -- in universal algebra, we say operation symbols --, and they allow us to speak about equalities. Where type theory differs is that it allows also type constructors and variable binding.

\subsection{Demonstration of Concepts on Categories}
Dependent type theory aims to syntactically describe collections (types) parameterised by other collections. To provide an example in the spirit of the thesis, we can have a collection of objects of a category that is parameterised by the collection of all categories. Moreover, we want to be able to iterate this process -- a collection of arrows between two objects is a collection twice parameterised by the collection of objects, and these are parameterised by the collection of categories. In type theory, we write this using judgements like 
\begin{align*}
    &\C\colon\Cat\vdash ob\,\C\; Ty
    &\C\colon\Cat,x\colon ob\,\C, y\colon ob\,\C\vdash \C(x,y)\; Ty.
\end{align*}
On the right-hand side of the turnstile, we write the information that we want to communicate -- $\C(x,y)$ is a collection (type). On the left-hand side, we write the context in which we communicate this information -- $\C$ is a category with objects $x,y$. We think of $\C,x,y$ as of free variables of the expression $\C(x,y)$. After substituting concrete values for these, we can obtain a non-parameterised collections like $\vdash\mathbf{2}(0, 1)\; Ty$. A non-parameterised collection is called a \emph{type in the empty context}.

Since our collections are parameterised, their elements have to parameterised as well. In type theory, we use $x\colon A$ instead of $x\in A$. An example of a judgement expressing such a parameterised element is the identity morphism:
$$\C\colon\Cat,x\colon ob\,\C\vdash id_{\C,x}\colon\C(x,x).$$

Judgements provide information about syntax together with an assurance that the syntax is well-formed. This is done using derivation trees -- we have some base judgements, e.g. 
\begin{prooftree}
        \AxiomC{}
        \UnaryInfC{$\Gamma\vdash \Cat\; Ty$}
\end{prooftree}
($\Cat$ is a collection in every context), and rules that tell us, how to produce new judgements out of the old ones, e.g.
\begin{multicols}{2}
    \begin{prooftree}
        \AxiomC{$\Gamma\vdash \C\colon\Cat$}
        \UnaryInfC{$\Gamma\vdash ob\,\C\; Ty$}
    \end{prooftree}    
    \begin{prooftree}
        \AxiomC{$\Gamma\vdash A\; Ty$}
        \UnaryInfC{$\Gamma,x\colon A\vdash x\colon A$.}
    \end{prooftree}
\end{multicols}

Judgements are then defined as strings derivable without any premises. An example of a non-derivable judgement might be $x\colon ob\,\C\vdash\C(x,y)\; Ty$ (unless $\C$ and $y$ are symbols in our syntax).

For example, using the three rules mentioned above, we can perform the derivation
\begin{prooftree}
    \AxiomC{}
    \UnaryInfC{$\vdash \Cat\; Ty$}
    \UnaryInfC{$\C\colon\Cat\vdash\C\colon\Cat$}
    \UnaryInfC{$\C\colon\Cat\vdash ob\,\C\; Ty$}
\end{prooftree}
ensuring that $\C\colon\Cat\vdash ob\,\C\; Ty$ is a derivable judgement.

\subsection{General Remarks}
There is no formal generally accepted definition of (dependent) type theory; therefore we cannot provide one (one of the attempts to answer this question is provided in Definition \ref{cwr}). For the purpose of sections \ref{sec:dtt} and \ref{sec:nm}, by type theory, we mean a formal system that has at least
\begin{itemize}
    \item types;
    \item terms;
    \item contexts consisting of term variables with assigned types;
    \item equalities between types and terms.
\end{itemize}
Moreover, this data should satisfy
\begin{itemize}
    \item every term has an assigned type;
    \item equalities (denoted by $\equiv$ to distinguish equalities on the meta level and in the type theory) are equivalences and behave as congruences with respect to all the structure, e.g. if $A\equiv B$ and $a\colon A$, then $a\colon B$;
    \item given a type in a context $\Gamma\vdash A$, we can extend the context, and obtain a new context $\Gamma,x\colon A$ where $x$ is a new variable;
    \item whenever a variable $x\colon A$ appears in a context, it is also a term of its type in that context.
\end{itemize} 
This is formalised using judgements, derivation trees, and mutual induction. To see a formal setup, see \cite[Part 2]{ssdt}.

There are many possible versions of type theory depending on the symbols that we choose to include to our language. These symbols are usually organised into \emph{type constructors} that describe how to form new types, how to introduce terms of the new types, and what properties the terms have. We demonstrate this on two examples: unit types -- that is types with a single element -- and $\Pi$-types.

\begin{defi}\label{unit types}\hfill
\begin{itemize}
    \item A \emph{type theory has unit types} if we have symbols $\mathbb1,\star$ together with the following rules:
\begin{multicols}{2}
    \begin{prooftree}
        \AxiomC{}
        \RightLabel{$\mathbb{1}$-form}
        \UnaryInfC{$\Gamma\vdash \mathbb{1}\; Ty$}
    \end{prooftree}
    \begin{prooftree}
        \AxiomC{}
        \RightLabel{$\mathbb{1}$-intro}
        \UnaryInfC{$\Gamma\vdash\star : \mathbb{1}$}
    \end{prooftree}      
\end{multicols}
\begin{prooftree}
    \AxiomC{$\Gamma\vdash t : \mathbb{1}$}
    \RightLabel{$\mathbb{1}$-$\eta$}
    \UnaryInfC{$\Gamma\vdash t\equiv\star : \mathbb{1}$.}
\end{prooftree}

    \item A \emph{type theory has $\Pi$-types} if we have symbols $\Pi,\lambda,App$ together with the following rules:
    \begin{figure}[!htb]
    \centering
    \makebox[0cm][c]{%
    \begin{minipage}{.6\textwidth}
        \centering
        \begin{prooftree}
            \AxiomC{$\Gamma,x\colon A\vdash B(x)\; Ty$}
            \RightLabel{$\Pi$-form}
            \UnaryInfC{$\Gamma\vdash \Pi_{x\colon\!A}B(x)\; Ty$}
        \end{prooftree}%
        \begin{prooftree}
            \AxiomC{$\Gamma\vdash a\colon A$}
            \AxiomC{$\Gamma\vdash f\colon\Pi_{x\colon\!A} B(x)$}
            \RightLabel{$\Pi$-elim}
            \BinaryInfC{$\Gamma\vdash App(f,a) : B(a)$}
        \end{prooftree}    
    \end{minipage}
    \begin{minipage}{0.5\textwidth}
        \centering
        \begin{prooftree}
            \AxiomC{$\Gamma,x\colon A\vdash b(x)\colon B(x)\; Ty$}
            \RightLabel{$\Pi$-intro}
            \UnaryInfC{$\Gamma\vdash\lambda x.b(x) : \Pi_{x\colon\!A}B(x)$}
        \end{prooftree}%
        \begin{prooftree}
            \AxiomC{$\Gamma,x\colon A\vdash b(x)\colon B(x)\; Ty$}
            \RightLabel{$\Pi$-comp}
            \UnaryInfC{$\Gamma,x\colon A\vdash App(\lambda y.b(y), x)\equiv b(x)\colon B(x)$}
        \end{prooftree}  
    \end{minipage}
    }%
    \begin{prooftree}
    \AxiomC{$\Gamma\vdash f : \Pi_{x\colon\!A}B(x)$}
    \RightLabel{$\Pi$-$\eta$}
    \UnaryInfC{$\Gamma\vdash f\equiv \lambda x.App(f,x): \Pi_{x\colon\!A}B(x)$.}
\end{prooftree}
\end{figure}
\end{itemize}
\end{defi}
\begin{rem}
    The corresponding notation for $\Pi$-types and exponentials along arrows is not arbitrary. Interested reader is referred to \cite{HofLCCC}.
\end{rem}

The last concept that we need to touch upon are substitutions between contexts. Since types and terms can contain free variables, we can plug in terms into them, and obtain new types and terms. We have seen an example above when we obtained $\mathbf{2}(0,1)$ from $\C(x,y)$. However, substitutions can be complicated, and we can plug in terms that have free variables themselves. A resulting object then does not live in the empty context. This process of plugging in is called substituting along a substitution.

\begin{defi}
    A \emph{substitution} $\Gamma\rightarrow\Delta=(x_1\colon A_1,\ldots, x_n\colon A_n)$ is defined as a sequence of terms $(t_1,\ldots, t_n)$ such that $\Gamma\vdash t_i\colon A_i(t_{i-1}/x_{i-1},\ldots t_1/x_1)$ for every $i$.
\end{defi}
By the notation $A_i(t_{i-1/}x_{i-1},\ldots t_1/x_1)$, we mean the string that is obtained by syntactically substituting all $t_j$s for $x_j$s.

\begin{ex}\hfill
    \begin{itemize}
        \item Above, we have seen a substitution along $()\rightarrow (\C\colon\Cat,x\colon ob\,\C, y\colon ob\,\C)$ given by terms $(\mathbf2, 0, 1)$.
        \item Assume we have also a type $\Set$ together with symbols $Disc$ representing the inclusion of sets into categories, $el$ representing the type of elements of a set, and an equation $ob\,Disc(S)=el(S)$. Then we have a substitution $$(S\colon\Set, p\colon el(S))\rightarrow(\C\colon\Cat,x\colon ob\,\C, y\colon ob\,\C)$$ given by $(Disc(S), p, p)$. Substituting along this substitution yields a judgement $$S\colon\Set, p\colon el(S)\vdash Disc(X)(p,p)\; Ty.$$
    \end{itemize}
\end{ex}
Substitution can be composed (syntactically), and for every context, we have the identical substitution (the terms are just variables used in the context). Thus, contexts with substitutions form a category.

\section{Natural Models}\label{sec:nm}
Semantics of dependent type theory is usually approached from the perspective of the category of contexts. That is, to provide a model, we start with a category $\C$ that is viewed as the category of contexts. In general, we do not know anything special about the category of contexts, except that we have the empty context that serves as a terminal object of that category. Therefore, we require that $\C$ has a terminal object as well. 

Now, we need to deal with terms and types, i.e. for every context $\Gamma$, we have a set $Ty(\Gamma)$ of all types in the context $\Gamma$, and, similarly, we have a set $Tm(\Gamma)$. Given a substitution $\sigma\colon\Delta\to\Gamma$ and a type $A\in Ty(\Gamma)$, we can substitute into $A$ and obtain a type $A(\sigma)\in Ty(\Delta)$. This makes $Ty$ a presheaf, and, analogously, $Tm$ is presheaf as well.

Typing can be seen as an operation $p_{\Gamma}\colon Tm(\Gamma)\to Ty(\Gamma)$. Moreover, given a substitution $\sigma\colon\Delta\to\Gamma$, and a term $t\in Ty(\Gamma)$, we can first type it, and the substitute $\sigma$ or the other way round. In both cases, we should obtain the same type in the context $\Delta$. So, $p\colon Tm\to Ty$ is a natural transformation (as we think of $p$ as a morphism and not a 2-cell, we also employ the notation for 1-cells throughout Section \ref{sec:nm}).

The final aspect that we capture is context extension. Whenever, we have $A\in Ty(\Gamma)$, we are looking for a new context $\Gamma,x\colon A$. Moreover, we require that a term of the context $\Gamma,x\colon A$ (a list of terms of appropriate types that can depend on the previous terms) is the same as a term of $\Gamma$ together with a term of $A$. Formally, we obtain that the $\yo (\Gamma,x\colon A)$ fits the pullback square
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXHlvKFxcR2FtbWEseFxcY29sb24gQSkiXSxbMCwxLCJcXHlvKFxcR2FtbWEpIl0sWzEsMSwiVHkiXSxbMSwwLCJUbSJdLFswLDFdLFsxLDIsIkEiLDJdLFszLDIsInAiXSxbMCwzXSxbMCwyLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	{\yo(\Gamma,x\colon A)} & Tm \\
	{\yo(\Gamma)} & Ty
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["p", from=1-2, to=2-2]
	\arrow["A"', from=2-1, to=2-2]
\end{tikzcd}\]
in the category $Set^{\C^{op}}$. The horizontal morphism in the pullback square then corresponds (by Yoneda lemma) to a term in $Tm(\Gamma,x\colon A)$ -- the variable $x$ with its type $A$. The vertical morphism correspond to the substitution that forgets the last variable.

\begin{defi}
    A natural transformation $\alpha\colon F\to G$ of presheaves over $\C$ is called \emph{representable} if for every $\Gamma\in\C$ and $A\in F(\Gamma)$, the pullback of the diagram
    $$
    \begin{tikzcd}
        & F\ar[d, "\alpha", ]\\
        \yo\Gamma\ar[r, "A"'] & G
    \end{tikzcd}
    $$
is a representable presheaf.
\end{defi}
\begin{defi}
    A \emph{natural model} of type theory in a category with a terminal object $\C$ is a representable natural transformation $p\colon Tm\to Ty$.
\end{defi}
\begin{rem}
    Natural models were introduced in \cite[Definition 3]{awodey2017natural} and they are equivalent to categories with families (for a proof, see \cite[Proposition 2]{awodey2017natural}; for definition of categories with families, see \cite[Definition 3.1]{ssdt}). The distinction between them is that natural models are more categorical, whereas categories with families are closer to syntax.
\end{rem}
\begin{ex}\label{rep nat mod}
For any morphism $f\colon c\to c'$ in a category with finite limits $\C$, we have a natural model $\yo(f)\colon\yo(c)\to\yo(c')$. It is obviously a natural transformation of presheaves, and $\yo$ preserves limits, therefore any pullback of $\yo(f)$ along a map $\yo(d)\to\yo(c')$ is actually computed in $\C$.
\end{ex}
In Section \ref{sec:dfib}, we have seen that presheaves and their maps are equivalent to discrete fibrations. In fact, representability of a natural transformation has a very nice counterpart after this translation:
\begin{prop}
    A natural model $p\colon Tm\to Ty\in\Set^{\C^{op}}$ is the same (under the equivalence from Theorem \ref{dfibs are presh}) as a morphism of discrete fibrations that has a right adjoint.
\end{prop}
\begin{proof}
    See \cite[Corollary 3.13]{Uemura_2023}.
\end{proof}
Therefore, we can equivalently depict a natural model as
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJUbSJdLFsyLDAsIlR5Il0sWzEsMiwiXFxDLiJdLFswLDEsInAiLDIseyJjdXJ2ZSI6Mn1dLFswLDJdLFsxLDJdLFsxLDAsIlIiLDIseyJjdXJ2ZSI6Mn1dLFszLDYsIiIsMix7ImxldmVsIjoxLCJzdHlsZSI6eyJuYW1lIjoiYWRqdW5jdGlvbiJ9fV0sWzQsNSwiPSIsMSx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH0sInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==
\[\begin{tikzcd}
	Tm && Ty \\
	\\
	& {\C.}
	\arrow[""{name=0, anchor=center, inner sep=0}, "p"', curve={height=12pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, from=1-1, to=3-2]
	\arrow[""{name=2, anchor=center, inner sep=0}, "R"', curve={height=12pt}, from=1-3, to=1-1]
	\arrow[""{name=3, anchor=center, inner sep=0}, from=1-3, to=3-2]
	\arrow["\dashv"{anchor=center, rotate=90}, draw=none, from=0, to=2]
	\arrow["{=}"{description}, draw=none, from=1, to=3]
\end{tikzcd}\]
The vertical functors (discrete fibrations) take a term (resp. type) in a context and forget the term (resp. context). The functor $p$ performs typing and the functor $R$ context extensions, i.e. $R(\Gamma\vdash A\; Ty)=\Gamma,x\colon A\vdash x\colon A$.

\begin{rem}
     In the proposition above, the right adjoint does not have to interact with the functors into $\C$.
\end{rem}

Before we mention semantics of constructors, we need to define polynomial functors:
\begin{defi}
    Let $p\colon Tm\to Ty$ be an exponentiable arrow in a lex category $\C$. Then its associated \emph{polynomial functor} $P_p\colon\C\to\C$ is defined as the composite
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXEMiXSxbMSwwLCJcXEMvVG0iXSxbMiwwLCJcXEMvVHkiXSxbMywwLCJcXEMuIl0sWzAsMSwiVG1cXHRpbWVzLSIsMl0sWzEsMiwiXFxQaV9wIiwyXSxbMiwzLCJkIiwyXV0=
\[\begin{tikzcd}
	\C & {\C/Tm} & {\C/Ty} & {\C.}
	\arrow["{Tm\times-}"', from=1-1, to=1-2]
	\arrow["{\Pi_p}"', from=1-2, to=1-3]
	\arrow["d"', from=1-3, to=1-4]
\end{tikzcd}\]
\end{defi}

Awodey proves (\cite[Proposition 8]{awodey2017natural}) that a natural model has $\Pi$-types if and only if we have morphisms $\Pi\colon P_p(Ty)\to Ty$ and $\lambda\colon P_p(Tm)\to Tm$ such that
% https://q.uiver.app/#q=WzAsNCxbMCwxLCJQX3AoVHkpIl0sWzEsMSwiVHkuIl0sWzEsMCwiVG0iXSxbMCwwLCJQX3AoVG0pIl0sWzAsMSwiXFxQaSIsMl0sWzIsMSwicCJdLFszLDAsIlBfcChwKSIsMl0sWzMsMiwiXFxsYW1iZGEiXSxbMywxLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\begin{equation}\label{pi square}
\begin{tikzcd}
	{P_p(Tm)} & Tm \\
	{P_p(Ty)} & {Ty}
	\arrow["\lambda", from=1-1, to=1-2]
	\arrow["{P_p(p)}"', from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow["p", from=1-2, to=2-2]
	\arrow["\Pi"', from=2-1, to=2-2]
\end{tikzcd}    
\end{equation}

is a pullback in $\DFib{\C}$.

Throughout his paper, he gives other examples of constructors on natural models defined in the language of
\begin{itemize}
    \item representable maps;
    \item finite limits;
    \item exponentials along representable maps.
\end{itemize}

\section{Functorial Semantics}\label{sec:cwr}
Uemura used the preceding observations to develop a functorial semantics of type theories: Since we can describe models of type theories using representable maps, finite limits, and exponentials along representable maps, we can define type theories as categories equipped with this structure. Models are then functors into $\DFib{\C}$ preserving the structure.

\begin{defi}\label{cwr}
    A \emph{category with representable maps} (CwR) is a category $\C$ with finite limits together with a class $R\subseteq\C^{\to}$ of arrows called \emph{representable maps} such that:
    \begin{itemize}
        \item $R$ is closed under composition and contains all isomorphisms;
        \item all arrows in $R$ are exponentiable;
        \item arrows in $R$ are pullback-stable, i.e. if $f\colon c\to d$ is in $R$ and $g\colon e\to d$ is an arrow, then the map $g^* f\colon g^*c\to e$ is also in $R$.
    \end{itemize}
\end{defi}
Whenever we want to point out that an arrow in a CwR a representable, we use:
\begin{nota}
    We write $f\colon c\rightarrowtriangle d$ to stress that $f$ is representable.
\end{nota}

\begin{rem}\label{intuition}
Let us comment a bit on the intuition behind CwRs.
Small categories with representable maps should be understood as type theories. Objects of such categories correspond to judgement forms, e.g. $\vdash \_\; Ty$ (to be a type) or $\vdash\_\; Tm$ (to be a term; usually written as $\vdash\_:$), and morphisms correspond to derivations. We use finite limits to create judgement forms that consist of more judgement forms. In a simple example, the product projection $\pi_1\colon j\times j'\to j$ corresponds to the following derivation:
    \begin{prooftree}
    \AxiomC{$\Gamma\vdash x\; j$}
    \AxiomC{$\Gamma\vdash y\;j'$}
    \RightLabel{$\pi_1$}
    \BinaryInfC{$\Gamma\vdash x\; j$.}
\end{prooftree}
We demonstrate other aspects of CwRs with an example that should be kept in mind for the rest of this thesis. Assume a CwR $\C$ with a representable arrow $p:Tm\rightarrowtriangle Ty$. That is, we have a judgement form saying that something is a term and that something is a type. Moreover, we can assign a type $p(t)$ to each term $t$. In other words, we can perform the following derivation:
\begin{prooftree}
    \AxiomC{$\Gamma\vdash t\; Tm$}
    \RightLabel{$p$}
    \UnaryInfC{$\Gamma\vdash p(t)\; Ty$.}
\end{prooftree}
Usually, this is written in type theory as 
\begin{prooftree}
    \AxiomC{$\Gamma\vdash t:A$}
    \RightLabel{$p$}
    \UnaryInfC{$\Gamma\vdash A\; Ty$.}
\end{prooftree}

Terminal object $1$ stands for the empty judgement. This does not make much sense on its own, but we use these for modelling derivations without any premises, e.g. the derivation
\begin{prooftree}
        \AxiomC{}
        \RightLabel{$\mathbb{1}$-form}
        \UnaryInfC{$\Gamma\vdash \mathbb{1}\; Ty$}
\end{prooftree}
is modelled by an arrow $\mathbb 1\colon 1\to Ty$.

Representable morphisms denote what kind of judgement forms can be in contexts, e.g. a judgement form $j$ can be in a context if the map $!\colon j\to 1$ is representable. Exponentials along representable maps correspond to variable binding, i.e. moving a judgement (that can be in a context) inside a context. 

As $p$ is representable, we can bind term variables with a specified type, and move them into a context. In $\C$, we have the arrow $\pi_2\colon Ty\times Tm\to Tm$. The exponential along $p$ takes this to an arrow $\prod_p(\pi_2)\colon\prod_p(Ty\times Tm)\to Ty$. The corresponding derivations are:
\begin{multicols}{2}
    \begin{prooftree}
        \AxiomC{$\Gamma\vdash A\; Ty$}
        \AxiomC{$\Gamma\vdash t : B$}
        \RightLabel{$\pi_2$}
        \BinaryInfC{$\Gamma\vdash t : B$}
    \end{prooftree}    
    \begin{prooftree}
        \AxiomC{$\Gamma, x:B\vdash A(x)\; Ty$}
        \RightLabel{$\prod_p(\pi_2)$}
        \UnaryInfC{$\Gamma\vdash B\; Ty$.}
    \end{prooftree}
\end{multicols}

One very important aspect of type theory is substitution, e.g. given $\Gamma, x:B\vdash A(x)\; Ty$, and an element $\Gamma\vdash b:B$, we should be able to derive $\Gamma\vdash A(b)\; Ty$. This is represented in $\C$ using the adjunction structure on $\prod$:

Consider our arrow $\pi_2\colon Ty\times Tm\to Tm$ in $\C/Tm$. After applying both $\prod_p$ and $p^*$, the counit of $p^*\dashv \prod_p$ is an arrow $\varepsilon_{\pi_2}\colon p^*(\prod_p(\pi_2))\to\pi_2$ in $\C/Tm$. The syntactical intuition is the following:

% https://q.uiver.app/#q=WzAsNixbMiwxLCJUbSJdLFsxLDAsIlxcYnVsbGV0Il0sWzIsMCwiVHlcXHRpbWVzIFRtIl0sWzAsMCwiXFxHYW1tYSx4OkJcXHZkYXNoIEEoeClcXDsgVHlcXGhzcGFjZXswLjNjbX1cXEdhbW1hXFx2ZGFzaCBiOkIiXSxbMiwyLCJcXEdhbW1hXFx2ZGFzaCBiOkIiXSxbMywwLCJcXEdhbW1hXFx2ZGFzaCBBKGIpXFw7IFR5XFxoc3BhY2V7MC4zY219XFxHYW1tYVxcdmRhc2ggYjpCIl0sWzEsMCwicF4qKFxccHJvZF9wXFxwaV8yKSIsMix7ImxhYmVsX3Bvc2l0aW9uIjozMH1dLFsxLDIsIlxcdmFyZXBzaWxvbl97XFxwaV8yfSJdLFsyLDAsIlxccGlfMiJdLFszLDQsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbMyw1LCIiLDAseyJjdXJ2ZSI6LTUsInN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw0LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d
\[\begin{tikzcd}
	{\Gamma,x:B\vdash A(x)\; Ty\hspace{0.3cm}\Gamma\vdash b:B} & \bullet & {Ty\times Tm} & {\Gamma\vdash A(b)\; Ty\hspace{0.3cm}\Gamma\vdash b:B} \\
	&& Tm \\
	&& {\Gamma\vdash b:B}.
	\arrow[curve={height=-30pt}, maps to, from=1-1, to=1-4]
	\arrow[maps to, from=1-1, to=3-3]
	\arrow["{\varepsilon_{\pi_2}}", from=1-2, to=1-3]
	\arrow["{p^*(\prod_p\pi_2)}"', from=1-2, to=2-3]
	\arrow["{\pi_2}", from=1-3, to=2-3]
	\arrow[maps to, from=1-4, to=3-3]
\end{tikzcd}\]

The last concept that we want to touch upon in this remark is judgemental equality. We consider not just an equality within a judgement (e.g. equality of terms or types), but we consider an equality within a derivation, i.e. whenever we have two derivations with equal judgement forms of premises and conclusion, we can ask for them to be equal. As derivations categorically correspond to arrows, equalities correspond to equalities of arrows. Let us demonstrate this with $\eta$-law of the unit type:
\begin{prooftree}
    \AxiomC{$\Gamma\vdash t : \mathbb{1}$}
    \RightLabel{$\mathbb{1}$-$\eta$}
    \UnaryInfC{$\Gamma\vdash t\equiv\star : \mathbb{1}$.}
\end{prooftree}

To model this in $\C$, we must have an object $j$ that corresponds to the judgement $\vdash \_:\mathbb 1$, and an arrow $star\colon j\to j$ corresponding to the derivation
\begin{prooftree}
    \AxiomC{$\Gamma\vdash t : \mathbb{1}$}
    \RightLabel{$star$}
    \UnaryInfC{$\Gamma\vdash \star : \mathbb{1}$.}
\end{prooftree}
The category $\C$ then models $\eta$-law if and only if $star = id_j$.

Since in every rule, every judgement has the same ambient context, the context does not provide any useful information. Therefore, all the rules could have been equivalently presented in the empty context.
\end{rem}

\begin{ex}We mention two trivial examples of CwRs, and then one that is very important for the rest of the thesis:
    \begin{itemize}
        \item Any category with finite limits can be made into a CwR. It suffices to say that representable maps are precisely isomorphisms.
        \item If we have a locally cartesian closed category, then we can get a CwR by marking all morphisms as representable.
        \item Let $\C$ be an arbitrary category, then we have a CwR structure on $\DFib{\C}$ where representable morphisms are precisely those that admit a right adjoint (as ordinary functors -- we do not require the left adjoint to be a morphism of discrete fibrations). Since $\DFib{\C}$ is locally cartesian closed, we know that all its arrows are exponentiable and it has finite limits. As identities are left adjoints and left adjoints compose, the only condition that needs to be verified is pullback-stability. This can be quite easily seen from the equivalent condition that pullbacks along maps from slice categories (these correspond to representable presheaves) are again slice categories: Let 
        % https://q.uiver.app/#q=WzAsNCxbMCwwLCJEIl0sWzAsMSwiRCciXSxbMSwwLCJFIl0sWzEsMSwiRSciXSxbMCwxLCJnIiwyXSxbMCwyXSxbMiwzLCJmIl0sWzEsM10sWzAsMywiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	E & F \\
	{E'} & {F'}
	\arrow["g"', from=1-1, to=2-1]
	\arrow[from=1-1, to=1-2]
	\arrow[-tri, "f", from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
\end{tikzcd}\]
be a pullback square with $f$ representable. To prove that $g$ is representable as well, we need to show that for any pullback square
% https://q.uiver.app/#q=WzAsNCxbMSwwLCJEIl0sWzEsMSwiRCciXSxbMCwwLCJFIl0sWzAsMSwiXFxDL2MiXSxbMCwxLCJnIiwyXSxbMiwwXSxbMiwzXSxbMywxXV0=
\[\begin{tikzcd}
	D & E \\
	{\C/c} & {E',}
	\arrow["g"', from=1-2, to=2-2]
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=2-1, to=2-2]
 	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
\end{tikzcd}\]
the object $D$ is isomorphic to the domain functor from a slice category of $\C$. However, this is immediate as pullback squares compose and $f$ is representable. 
    \end{itemize}
\end{ex}
\begin{rem}
    From now on, whenever we mention $\DFib{\C}$ as a CwR (or just a category with a specified set of arrows), we consider representable maps as defined in the example above.%TODO: does it deserve a definition?
\end{rem}
Having defined CwRs, we should also define their morphisms:
\begin{defi}
    A \emph{morphism of CwRs} $F\colon\C\to\D$ is a functor that preserves all the structure of CwRs:
    \begin{itemize}
        \item finite limits;
        \item representable maps;
        \item exponentials along representable maps.
    \end{itemize}
\end{defi}

\begin{defi}
    We define $\Rep$ to be the $2$-category such that:
    \begin{itemize}
        \item its objects are small categories with representable maps;
        \item morphisms are their morphisms;
        \item $2$-cells are natural transformations such that their naturality squares at representable morphisms are pullbacks.
    \end{itemize}
\end{defi}
\begin{defi}\label{model}
    Let $\T$ be a CwR and $\C$ an arbitrary category with a terminal object. Then a \emph{model of $\T$ in $\C$} is a functor $M\in \REP(\T, \DFib{\C})$. In this case, we call $\C$ the \emph{category of contexts of the model} $M$.
\end{defi}

Having defined a model as a functor, we would like to say that a morphism of models is a natural transformation. However, the situation is a bit more complicated as we also allow to model our type theories in various categories of contexts. Therefore, a morphism of models will reflect this and consist of a functor between categories of contexts together with a suitable natural transformation:
\begin{defi}\label{modelmorphism}
    Let $\T$ be a CwR and $M\colon\T\to\DFib{\C}, N\colon\T\to\DFib{\D}$ its models. Then a \emph{morphism of models} $M\to N$ is a pair $(F,\alpha)$ of a terminal-object preserving functor $F\colon\C\to\D$ and a natural transformation
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXFQiXSxbMiwwLCJcXERGaWJ7Q30iXSxbMiwyLCJcXERGaWJ7RH0iXSxbMCwxLCJNIl0sWzAsMiwiTiIsMl0sWzIsMSwiRl4qIiwyXSxbMywyLCJcXGFscGhhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	\T && {\DFib{\C}} \\
	\\
	&& {\DFib{\D}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "M", from=1-1, to=1-3]
	\arrow["N"', from=1-1, to=3-3]
	\arrow["{F^*}"', from=3-3, to=1-3]
	\arrow["\alpha", shorten <=9pt, shorten >=9pt, Rightarrow, from=0, to=3-3]
\end{tikzcd}\]
    satisfying the Beck-Chevalley condition for representable arrows in $\T$: suppose $r\colon t\rightarrowtriangle t'$ is a representable arrow in $\T$ and denote $\pi$ projections from pullbacks. Then (after identifying a discrete fibration with its domain) we require that the outer square in
% https://q.uiver.app/#q=WzAsNixbMCwwLCJNdCJdLFsxLDAsIkZeKk50Il0sWzAsMSwiTXQnIl0sWzEsMSwiRl4qTnQnIl0sWzIsMCwiTnQiXSxbMiwxLCJOdCciXSxbMCwxLCJcXGFscGhhX3QiXSxbMCwyLCJNciIsMl0sWzIsMywiXFxhbHBoYV97dCd9IiwyXSxbMSwzLCJGXipOciJdLFsxLDQsIlxccGkiXSxbNCw1LCJOciJdLFszLDUsIlxccGkiLDJdXQ==
\[\begin{tikzcd}
	Mt & {F^*Nt} & Nt \\
	{Mt'} & {F^*Nt'} & {Nt'}
	\arrow["{\alpha_t}", from=1-1, to=1-2]
	\arrow["Mr"', from=1-1, to=2-1]
	\arrow["\pi", from=1-2, to=1-3]
	\arrow["{F^*Nr}", from=1-2, to=2-2]
	\arrow["Nr", from=1-3, to=2-3]
	\arrow["{\alpha_{t'}}"', from=2-1, to=2-2]
	\arrow["\pi"', from=2-2, to=2-3]
\end{tikzcd}\]
satisfies the Beck-Chevalley condition.
\end{defi}
\begin{rem}
    The Beck-Chevalley condition corresponds to the preservation of context extensions.
\end{rem}
\begin{rem}\label{modelCat}
The notion of model from Definition \ref{model} is not the only reasonable choice. Since any model $M\colon\T\to\DFib{\C}$ preserves terminal objects, we can recover $\C$ as the image of the terminal object in $\T$. Therefore, we can equivalently say that a morphism of models is a functor $M\colon\T\to\Cat$ that satisfies some conditions, e.g. $M(!\colon t\to 1)\colon Mt\to M1$ is a discrete fibration. Now, we could just say that a morphism of models is a natural transformation satisfying the Beck-Chevalley condition for representable arrows in $\T$. Even though these definitions would be probably cleaner, we stick to the approach above as it is closer to the classical approaches to semantics of type theory (especially natural models). Another advantage of Definition \ref{model} is that it makes models a notion living in $\REP$. 
\end{rem}
\begin{rem}\label{taichis_morphism_is_our_morphism}
Uemura \cite{Uemura_2023, taichiThesis} defines morphisms of models in the sense of Remark \ref{modelCat} (even though he defines models as in \ref{model}): a morphism $(F, \alpha)$ of models $M\colon\T\to\DFib{\C}, N\colon\T\to\DFib{\D}$ is 
\begin{itemize}
    \item a terminal-object preserving functor $F\colon\C\to\D$;
    \item for every $t\in\T$, a functor $\alpha_t\colon dMt\to dNt$ such that the following square commutes:
    $$\begin{tikzcd}
        dMt\ar["{\alpha_t}", r]\ar["Mt"', d] & dNt\ar["Nt", d]\\
        \C\ar["F", r] & \D.
    \end{tikzcd}$$
\end{itemize}
This data is subject to the following conditions:
\begin{itemize}
    \item (naturality) for every $r\colon t\to t'\in\T$, we have the following commutative square:
    $$
    \begin{tikzcd}
        dMt\ar["\alpha_t", r]\ar["dMr"', d] & dNt\ar["dNr", d]\\
        dMt'\ar["\alpha_{t'}", r] & dNt';
    \end{tikzcd}
    $$
    \item for a representable map $r\colon t\rightarrowtriangle t'$, the square above satisfies the Beck-Chevalley condition.
\end{itemize}
    We outline why this definition is equivalent to \ref{modelmorphism}:

    Given a morphism of models in the sense of \ref{modelmorphism}, we obtain a morphism of models in the sense of this remark by postcomposing with pullback projections (as is done in the definition \ref{modelmorphism} in the part about the Beck-Chevalley condition).

    Conversely, consider a morphism of models $(F, \alpha=\{\alpha_t\}_{t\in\T})$ in the sense of this remark. This yields morphisms $\overline{\alpha_t}\colon Mt\to F^*Nt\in\DFib{\C}$:
% https://q.uiver.app/#q=WzAsNSxbMCwwLCJkTXQiXSxbMSwyLCJcXEMiXSxbMiwyLCJcXEQiXSxbMiwxLCJkTnQiXSxbMSwxLCJGXipkTnQiXSxbMCwxLCJNdCIsMix7ImN1cnZlIjoyfV0sWzEsMiwiRiIsMl0sWzMsMiwiTnQiLDJdLFs0LDEsIkZeKk50Il0sWzAsMywiXFxhbHBoYV90IiwwLHsiY3VydmUiOi0yfV0sWzQsM10sWzAsNCwiXFxvdmVybGluZXtcXGFscGhhX3R9IiwwLHsibGFiZWxfcG9zaXRpb24iOjYwLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
\[\begin{tikzcd}
	dMt \\
	& {F^*dNt} & dNt \\
	& \C & \D.
	\arrow["{\overline{\alpha_t}}"{pos=0.6}, dashed, from=1-1, to=2-2]
	\arrow["{\alpha_t}", curve={height=-12pt}, from=1-1, to=2-3]
	\arrow["Mt"', curve={height=12pt}, from=1-1, to=3-2]
	\arrow[from=2-2, to=2-3]
	\arrow["{F^*Nt}", from=2-2, to=3-2]
	\arrow["Nt"', from=2-3, to=3-3]
	\arrow["F"', from=3-2, to=3-3]
\end{tikzcd}\]
    These obviously satisfy the Beck-Chevalley condition. Checking that they form a natural transformation is a routine yoga with pullbacks.
\end{rem}

A disadvantage of the definition of a morphism of models is that it is not a notion living in the 2-category $\REP$. Given a functor $F:\C\to\D$ that preserves the terminal object of $\C$, it can happen that $F^*\colon\DFib{\D}\to\DFib{\C}$ does not preserve representable arrows:
\begin{ex}\label{notamorphism}
In this example, we switch to the point of view of presheaves instead of discrete fibrations.

Since $\mathbf{2}=\{0\overset{f}{\to} 1\}$ is a complete category, we know that the natural transformation $$\mathbf{2}(-,0)\xrightarrow{f\cdot -}\mathbf{2}(-,1)$$ is representable in $\Set^\mathbf{2}$, see Example \ref{rep nat mod}.

    Now, let $\C$ be the following category:
\[\begin{tikzcd}
	\arrow["s", loop left]0 & 1,
	\arrow[from=1-1, to=1-2]
\end{tikzcd}\] where the only non-displayed morphisms are identities, and $F\colon\C\to\mathbf{2}$ be the only identity-on-objects functor. Then $F$ preserves the terminal object of $\C$ and we will show that $$\mathbf{2}(F-,0)\xrightarrow{f\cdot F-}\mathbf{2}(F-,1)$$ is not a representable arrow in $\Set^{\C^{op}}$:

Let us denote $G\colon\C^{op}\to\Set$ the pullback of the following diagram:
% https://q.uiver.app/#q=WzAsMyxbMSwwLCJcXEQoRi0sMCkiXSxbMSwxLCJcXEQoRi0sMSkiXSxbMCwxLCJcXEMoLSwgMSkiXSxbMCwxLCJmXFxjZG90IEYtIl0sWzIsMV1d
\[\begin{tikzcd}
	& {\mathbf{2}(F-,0)} \\
	{\C(-, 1)} & {\mathbf{2}(F-,1)}.
	\arrow["{f\cdot F-}", from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
\end{tikzcd}\]
The natural transformation $f\cdot F-$ is in fact the following square:
% https://q.uiver.app/#q=WzAsNCxbMSwwLCJcXEQoRjEsIDApPVxcZW1wdHkiXSxbMCwwLCJcXEQoRjAsMCk9XFx7aWRfMFxcfSJdLFsxLDEsIlxcRChGMSwxKT1cXHtpZF8xXFx9Il0sWzAsMSwiXFxEKEYwLDEpPVxce2ZcXH0iXSxbMCwxXSxbMCwyLCIoZlxcY2RvdCBGLSlfMSJdLFsyLDNdLFsxLDMsIihmXFxjZG90IEYtKV8wIiwyXV0=
\[\begin{tikzcd}
	{\mathbf{2}(F0,0)=\{id_0\}} & {\mathbf{2}(F1, 0)=\emptyset} \\
	{\mathbf{2}(F0,1)=\{f\}} & {\mathbf{2}(F1,1)=\{id_1\}}.
	\arrow["{(f\cdot F-)_0}"', from=1-1, to=2-1]
	\arrow[from=1-2, to=1-1]
	\arrow["{(f\cdot F-)_1}", from=1-2, to=2-2]
	\arrow[from=2-2, to=2-1]
\end{tikzcd}\]
Therefore, $G1\cong\emptyset$ and $G0\cong \{\star\}$. However, as $\C(-,1)$ is constantly $\{\star\}$ and $\C(-,0)$ is either $\emptyset$ or a two element set, we see that $G$ is not isomorphic to any representable functor and hence ${F^{op}}^*$ does not preserve representable arrows.
\end{ex}

Finally, we can define the category of models:
\begin{defi} \label{mod_rep}
Let $\T$ be a CwR. Then $Mod_{\Rep}(\T)$ -- its \emph{category of models} -- consists of the following:
\begin{itemize}
    \item objects are models;
    \item 1-cells are morphisms of models;
    \item the identity on a model $M\colon\T\to\DFib{\C}$ is $(1_\C, 1_M)$;
    \item given two consecutive morphisms of models
    % https://q.uiver.app/#q=WzAsNCxbMCwyLCJcXFQiXSxbMiwwLCJcXERGaWJ7XFxDfSJdLFsyLDIsIlxcREZpYntcXER9Il0sWzIsNCwiXFxERmlie1xcRX0iXSxbMCwxLCJNIl0sWzAsMiwiTiJdLFsyLDEsIkZeKiIsMl0sWzAsMywiTyIsMl0sWzMsMiwiR14qIiwyXSxbNCwyLCJcXGFscGhhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwfX1dLFs1LDMsIlxcYmV0YSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMH19XV0=
\[\begin{tikzcd}
	&& {\DFib{\C}} \\
	\\
	\T && {\DFib{\D}} \\
	\\
	&& {\DFib{\E},}
	\arrow[""{name=0, anchor=center, inner sep=0}, "M", from=3-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "N", from=3-1, to=3-3]
	\arrow["O"', from=3-1, to=5-3]
	\arrow["{F^*}"', from=3-3, to=1-3]
	\arrow["{G^*}"', from=5-3, to=3-3]
	\arrow["\alpha", shorten <=6pt, shorten >=6pt, Rightarrow, from=0, to=3-3]
	\arrow["\beta", shorten <=10pt, shorten >=10pt, Rightarrow, from=1, to=5-3]
\end{tikzcd}\]
    their composite has an underlying functor $GF$, and the natural transformation is
% https://q.uiver.app/#q=WzAsNCxbMCwyLCJcXFQiXSxbMiwwLCJcXERGaWJ7XFxDfSJdLFsyLDIsIlxcREZpYntcXER9Il0sWzIsNCwiXFxERmlie1xcRX0iXSxbMCwxLCJNIl0sWzAsMiwiTiJdLFsyLDEsIkZeKiIsMl0sWzAsMywiTyIsMl0sWzMsMiwiR14qIiwyXSxbMywxLCIoR0YpXioiLDIseyJjdXJ2ZSI6NX1dLFs0LDIsIlxcYWxwaGEiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzUsMywiXFxiZXRhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dLFsyLDksIlxcY29uZyIsMSx7ImxhYmVsX3Bvc2l0aW9uIjoxMCwic2hvcnRlbiI6eyJ0YXJnZXQiOjIwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
\[\begin{tikzcd}
	&& {\DFib{\C}} \\
	\\
	\T && {\DFib{\D}} \\
	\\
	&& {\DFib{\E}},
	\arrow[""{name=0, anchor=center, inner sep=0}, "M", from=3-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "N", from=3-1, to=3-3]
	\arrow["O"', from=3-1, to=5-3]
	\arrow["{F^*}"', from=3-3, to=1-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{(GF)^*}"', curve={height=60pt}, from=5-3, to=1-3]
	\arrow["{G^*}"', from=5-3, to=3-3]
	\arrow["\alpha", shorten <=6pt, shorten >=6pt, Rightarrow, from=0, to=3-3]
	\arrow["\beta", shorten <=10pt, shorten >=10pt, Rightarrow, from=1, to=5-3]
	\arrow["\cong"{description, pos=0.1}, draw=none, from=3-3, to=2]
\end{tikzcd}\]
where the isomorphism comes from composability of pullback squares.
\end{itemize}
\end{defi}

\begin{rem}
We could define $Mod_{\Rep}(\T)$ as a 2-category. A 2-cell $$\Gamma\colon(F,\alpha)\Rightarrow(G, \beta)\colon M\to N$$ consists of a natural transformation $\Gamma\colon F\Rightarrow G$ such that
    % https://q.uiver.app/#q=WzAsNixbMCwwLCJcXFQiXSxbMiwwLCJcXERGaWJ7Q30iXSxbMiwyLCJcXERGaWJ7RH0iXSxbMywwLCJcXFQiXSxbNSwyLCJcXERGaWJ7RH0iXSxbNSwwLCJcXERGaWJ7Q30iXSxbMCwxLCJNIl0sWzAsMiwiTiIsMl0sWzIsMSwiRl4qIiwyXSxbMyw0LCJOIiwyXSxbNCw1LCJHXioiLDEseyJjdXJ2ZSI6LTJ9XSxbMyw1LCJNIl0sWzQsNSwiRl4qIiwxLHsiY3VydmUiOjJ9XSxbNiwyLCJcXGFscGhhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dLFs4LDksIj0iLDEseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTEsNCwiXFxiZXRhIiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjQwfX1dLFsxMCwxMiwiXFxHYW1tYV4qIiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	\T && {\DFib{\C}} & \T && {\DFib{\C}} \\
	\\
	&& {\DFib{D}} &&& {\DFib{D}}.
	\arrow[""{name=0, anchor=center, inner sep=0}, "M", from=1-1, to=1-3]
	\arrow["N"', from=1-1, to=3-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{F^*}"', from=3-3, to=1-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "N"', from=1-4, to=3-6]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{G^*}" near end, curve={height=-12pt}, from=3-6, to=1-6]
	\arrow[""{name=4, anchor=center, inner sep=0}, "M", from=1-4, to=1-6]
	\arrow[""{name=5, anchor=center, inner sep=0}, "{F^*}"' near end, curve={height=12pt}, from=3-6, to=1-6]
	\arrow["\alpha", shorten <=9pt, shorten >=9pt, Rightarrow, from=0, to=3-3]
	\arrow["{=}"{description}, draw=none, from=1, to=2]
	\arrow["\beta"', shorten <=9pt, shorten >=19pt, Rightarrow, from=4, to=3-6]
	\arrow["{\Gamma^*}"', shorten <=5pt, shorten >=5pt, Rightarrow, from=3, to=5]
\end{tikzcd}\]
However, in this thesis, we do not examine 2-categorical aspects of $Mod_{\Rep}(\T)$ and, therefore, we treat it just as a 1-category.
\end{rem}
Having defined the category of models, we can ask how to construct CwRs such that their category of models is some chosen one? For example, how to define a CwR $\C$ such that its models are natural models with $\Pi$-types? Since the characterisation of natural models with $\Pi$-types from the end of Section \ref{sec:nm}, we would like to say that $\C$ is freely generated by a representable map $p$ together with two ordinary maps $\Pi,\lambda$ such that Square \ref{pi square} is a pullback. We build the technology to explain that it is possible and what it means in the following two chapters.

\chapter{Properties of $\Rep$}\label{chap:prop}
In this chapter, we construct $\Rep$ in several stages using (bi)pullbacks; we follow \cite[Section 5.3.2]{taichiThesis}, but we add many additional details. This allows us to deduce its properties from the properties of functors and categories appearing in the pullbacks. Specifically, we care about accessibility and bi(co)completeness. The present section is very much inspired by \cite[Section 6]{BOURKE2021106519}.
\section{Toolbox}
We present a few results needed in the upcoming constructions.

This proposition is from \cite[Corollary 1]{JoyalStreetPseudopullbacks}:
\begin{prop}\label{pull is bipull}
    Let $c\to d\leftarrow e$ be a cospan in a 2-category such that at least one of its legs is an isofibration. Then its pullback is also its bipullback.
\end{prop}
We also need a piece of Gabriel-Ulmer duality \cite[Section 1.C]{adamek1994locally}:
\begin{thm}\label{gab-ulm}
    We have a functor
    \[
    \begin{tikzcd}
        \mathbf{Lex}^{op}\ar["Mod", r] & \mathbf{LFP}
    \end{tikzcd}
    \]
    that takes a small category with finite limits $\C$ and returns its category of models -- the locally finitely presentable category $\mathbf{LEX(\C,\Set)}$.
\end{thm}

And we use the closedness of accessible 2-categories and 2-categories with flexible limits under certain constructions. 
\begin{defi}
Let $\lambda$ be a regular cardinal. A 2-category $\C$ with powers by $\mathbf{2}$ is called \emph{$\lambda$-accessible} if its underlying 1-category is $\lambda$-accessible, and $\lambda$-filtered colimits commute with powers by $\mathbf{2}$ in $\C$. A 2-category is \emph{accessible} if it is $\lambda$-accessible for some $\lambda$.

We denote $\mathbf{wLP}$ the 2-category whose
\begin{itemize}
    \item objects are accessible 2-categories with flexible limits, and filtered colimits;
    \item morphisms are 2-functors preserving flexible limits, and filtered colimits;
    \item 2-cells are 2-natural transformations.
\end{itemize} 
\end{defi}
\begin{rem}
    The name $\mathbf{wLP}$ refers to weak locally presentable categories.
\end{rem}
\begin{rem}
The presented definition of an accessible 2-category is slightly stronger than the one in \cite{BOURKE2021106519}, where an accessible 2-category does not necessarily have powers by $\mathbf{2}$. However, all the categories that we consider have powers by $\mathbf{2}$, and then the definitions are equivalent; see Proposition 3.6(2) in the paper above.
\end{rem}
\begin{nota}
    We name a few useful 2-categories:
    \begin{itemize}
        \item $Comp:=\begin{tikzcd}&\bullet\ar[d]\ar[dl]\\ \bullet  \arrow[r] & \bullet \end{tikzcd};$
\begin{comment}
    \item $Comp_{ps}:=\begin{tikzcd}
	& \bullet \\
	\bullet & \bullet
	\arrow[""{name=0, anchor=center, inner sep=0}, from=1-2, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
	\arrow["\cong"{description}, draw=none, from=0, to=2-2]
 \end{tikzcd};$

\end{comment}        
        \item $Cosp:=\begin{tikzcd}&\bullet\ar[d]\\ \bullet  \arrow[r] & \bullet \end{tikzcd};$
        \item $Adj$ to be the free adjunction;
        \item $f\!Adj$ to be the free pseudo-fibered adjunction having a strictly fibered left adjoint:
% https://q.uiver.app/#q=WzAsMyxbMCwwLCIwIl0sWzAsMiwiMS4iXSxbMiwxLCIyIl0sWzAsMSwibCIsMix7ImN1cnZlIjoyfV0sWzEsMCwiciIsMix7ImN1cnZlIjoyfV0sWzEsMiwiXFxwaV8xIiwyXSxbMCwyLCJcXHBpXzAiXSxbMyw0LCIiLDAseyJsZXZlbCI6MSwic3R5bGUiOnsibmFtZSI6ImFkanVuY3Rpb24ifX1dLFs2LDUsIlxcdmFycGhpXFw7IFxcY29uZyAiLDEseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
\[\begin{tikzcd}
	0 \\
	&& 2 \\
	{1.}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\pi_0}", from=1-1, to=2-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "l"', curve={height=12pt}, from=1-1, to=3-1]
	\arrow[""{name=2, anchor=center, inner sep=0}, "r"', curve={height=12pt}, from=3-1, to=1-1]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{\pi_1}"', from=3-1, to=2-3]
	\arrow["\dashv"{anchor=center}, draw=none, from=1, to=2]
	\arrow["{\varphi\; \cong }"{description}, draw=none, from=0, to=3]
\end{tikzcd}\]Explicitly, we are freely generating a 2-category by the data
        \begin{itemize}
            \item objects: $0,1,2$;
            \item morphisms: $l\colon0\to1, \pi_1\colon1\to2, r\colon1\to0$ (we denote $\pi_0:=\pi_1l$);
            \item 2-cells: $\varphi\colon\pi_1\Rightarrow\pi_0r, \varphi^{-1}\colon\pi_0r\Rightarrow\pi_1,\eta\colon id_{0}\Rightarrow rl, \varepsilon\colon lr\Rightarrow id_1$
        \end{itemize}
        that is subject to the equations:
        \begin{itemize}
            \item $\varphi$ is an isomorphism: $\varphi\cdot\varphi^{-1}=id_{\pi_0r}, \varphi^{-1}\cdot\varphi=id_{\pi_1}$;
            \item triangle identities for $\eta$, and $\varepsilon$;
            \item compatibility of $\eta$, and $\varepsilon$ with $\varphi$:
            $\pi_0\eta=\varphi l, \pi_1\varepsilon=\varphi^{-1}$.
        \end{itemize}
    \end{itemize}
\end{nota}
\begin{thm}\label{lp}\hfill
\begin{enumerate}
    \item The 2-category $\mathbf{wLP}$ is closed under bilimits in 2-$\CAT$.
    \item All the 2-categories $\mathbf{Ps}(Comp, \Cat)$, $\mathbf{Ps}(Cosp, \Cat)$, $\mathbf{Ps}(Adj, \Cat)$, $\mathbf{Ps}(\mathbf{2}, \Cat)$, and $\mathbf{Ps}(f\!Adj, \Cat)$ are in $\mathbf{wLP}$. Both flexible limits and directed colimits are computed pointwise in these 2-categories, moreover, evaluations jointly reflect them.
    \item Let $i\colon J\to J'$ be an inclusion (injective on objects and faithful 2-functor) of $Cosp\to Comp$, $Comp\to f\!Adj$, or $\mathbf{2}\to Adj$ (picking the left adjoints), then $i^*\colon \mathbf{Ps}(J', \Cat)\to \mathbf{Ps}(J, \Cat)$ is an isofibration. Moreover, $i^*$ preserves flexible limits, and directed colimits.
\end{enumerate}
\end{thm}
\begin{proof}
    The first part of the theorem follows from the proof of \cite[Proposition 4.4]{BOURKE2021106519}. For the other two, see Section 3.3, and Theorem 5.8 in the same paper.
\end{proof}
\begin{rem}\label{cellular}
    In general, the 2-categories $\C$ such that \cite[Theorem 5.8]{BOURKE2021106519} applies and yields that $Ps(\C,\Cat)$ is in $\wLP$ are 2-categories, whose underlying 1-category is free on a graph. This is the reason, why we define $f\!Adj$ to be the free pseudo-fibered adjunction, and not an ordinary fibered adjunction.
\end{rem}

\section{Construction of $\Rep$}\label{construction of rep}
In every stage that follows (except the very first), we consider a pullback that approximates $\Rep$, and then prove the following:
\begin{enumerate}
    \item at least one of the legs is an isofibration, therefore the pullback is actually a bipullback by \ref{pull is bipull};
    \item all the mentioned 2-categories are accessible and the 2-functors between them are accessible as well;
    \item all the 2-categories have flexible limits and the 2-functors preserve them.
\end{enumerate}
As a result, the new `approximation' is also accessible with flexible limits by \ref{lp}.
\subsection{Stage 1: Categories with Marked Arrows and Squares -- $\Cat_{m,sq}$}
First, we use Theorem \ref{gab-ulm} to construct the 1-category $\Cat_{m,sq}$ of categories with a wide subcategory and a chosen subcategory of squares.
\begin{defi}
    Let $\C$ be a category. Its subcategory $M$ is called \emph{wide} if its collection of objects is that of $\C$. Arrows in $M$ are referred to as \emph{marked}.
\end{defi}

%\begin{defi}
%	A \emph{marked category with squares} is a triple $(\C, M, S)$ such that $\C$ is a category, $M$ is a wide subcategory, and $S$ is a collection of {\color{blue} commutative} squares in $\C$ closed under {\color{blue} horizontal???} composition and identities {\color{blue} this means that if two opposite arrows in a square are identities, then the square is in $S$}.
%\end{defi}
\begin{defi}
	A \emph{marked category with squares} is a triple $(\C, M, S)$ such that $\C$ is a category, $M$ is a wide subcategory of $\C$, and $S$ is a wide subcategory of the category of arrows in $\C$.
\end{defi}
\begin{rem}
	Defining $S$ as a subcategory of arrows means more than just having a subcollection of squares. 
	As a subcategory, it inherits also the composition operation.
	Moreover, for every square, we have its domain and codomain, i.e. two chosen arrows on the opposite sides of the square. 
	If we depict all the squares such that the domain will be on the left and codomain on the right, we can say that our squares are closed under horizontal pasting of squares.
	This means also nullary composition, i.e. every square having the horizontal arrows identities is chosen.
\end{rem}
\begin{nota}
	Whenever we use the symbol $\rightarrowtriangle$ for an arrow, we mean that the depicted arrow is marked.
	Similarly, we write 
    $$
    \begin{tikzcd}
        \bullet\ar[r] \ar[d] & \bullet\ar[d]\\
        \bullet\ar[r] &\bullet,
		\arrow["\mathcal{S}"{anchor=center, style = {font=\normalsize}}, draw=none, from=1-1, to=2-2]
    \end{tikzcd}
    $$
	to stress that the depicted square is among the chosen squares.
\end{nota}

A (small) category $\C$ can be described as a set $ C_0$ of objects together with a set $C_1$ of arrows together with functions:
\begin{itemize}
    \item $d,c\colon C_1\to C_0$ choosing the domain and codomain of a morphism;
    \item $i\colon C_0\to C_1$ assigning the identity morphism to each object;
    \item $m\colon C_1\times_{C_0}C_1\to C_1$ that maps a pair of composable arrows to their composite.
\end{itemize}
Moreover, several equations, expressing that domains and codomains interact well with compositions and identities (e.g. $i$ is a section of both $d,c$), and that composition is associative and unital, should hold. For details, see e.g. \cite[Definition 7.1.1]{jacBook}. Therefore, a category can be described as a model of the category with finite limits freely generated by the above data. Let us denote $Th(Cat)$ (the theory of categories) that free category.

Marked categories with squares can be described in a similar (but more complicated) manner. 
We need:
\begin{itemize}
	\item The whole structure for modelling categories, i.e. sets $C_0, C_1$, and maps $d_c,c_c\colon C_1\to C_0,i_c\colon C_0\to C_1,m_c\colon C_1\times_{C_0}C_1\to C_1$ satisfying the equations for categories.
	\item The structure for modelling marked arrows, i.e. a set $M_1$, inclusion $\iota_m\colon M_1\rightarrowtail C_1$, 
		and maps $d_m,c_m\colon M_1\to C_0,i_m\colon C_0\to M_1,m_m\colon M_1\times_{C_0}M_1\to M_1$ that satisfy the equations for categories,
		and are compatible with the categorical structure (e.g. $d_c\iota_m=d_m$).
	\item The structure for modelling squares. This consists of a new set $S$, categorical structure on squares and arrows ($d_s,c_s\colon S\to C_1,i_s\colon C_1\to S,m_s\colon S\times_{C_1}S\to S$), 
		and an inclusion $\iota_s\colon S\rightarrowtail (C_1\times_{C_0}C_1)\times_{C_1}(C_1\times_{C_0}C_1)$ of squares into the commuting squares that commutes with the 'natural' categorical structure on commuting squares given by pasting of squares. 
	For example, we require that $d_s=\pi_1\cdot\pi_1\cdot\iota_s$.
\end{itemize}
As before, a marked category with squares is a model of the category with finite limits freely generated by the above data. We denote this category by $Th(Cat_{m,sq})$.

Using this description and Theorem \ref{gab-ulm}, we see that both $\Cat$ and $\Cat_{m,sq}$
are finitely locally presentable; hence they contain all limits and are accessible 1-categories. 
Moreover, we have a lex morphism $Th(Cat)\to Th(Cat_{m,sq})$ that picks the underlying category. 
Therefore, we know that the forgetful functor $\Cat_{m,sq}\to\Cat$, which forgets the marked arrows and squares, preserves limits and directed colimits. This comes in handy in later constructions.

\begin{nota}
	We denote by $U_c\colon\Cat_{m,sq}\to\Cat$ the forgetful functor described in the previous paragraph that forgets marked arrows and squares.
\end{nota}

Now, we need to move to the 2-dimensional setting. First, we prove that $\Cat_{m,sq}$ has powers by $\mathbf{2}$ and that these commute with filtered colimits. 
This yields accessibility in the 2-categorical sense. 
Then we prove that it has also copowers by $\mathbf{2}$. 
As a result, we obtain that all 1-limits are actually 2-limits by \cite[Section 3]{Kelly1989ElementaryOO}. 
Since it has all conical limits indexed by 1-categories as well as powers by $\mathbf{2}$, this all yields that it is actually complete as a 2-category by Proposition \ref{2-complete}.

\begin{defi}\label{def:2Cat_m,sq}
	The $2$-category $\Cat_{m,sq}$ has its underlying 1-category $\Cat_{m,sq}$ described above. 
Its 2-cells $\alpha\colon F\Rightarrow G\colon (\C,M,S)\to (\D,N,T)$ are natural transformations satisfying that every naturality square at a marked arrow $f$ is a chosen square in $T$ whose domain is $Ff$ and codomain $Gf$.
\end{defi}
\begin{rem}
	The $2$-category $\Cat_{m,sq}$ is well-defined because squares are composable and preserved by morphisms in $\Cat_{m,sq}$.
\end{rem}
\begin{lemma}
	The 2-category $\Cat_{m,sq}$ has powers by $\mathbf{2}$, and these are preserved by $U_c$.
\end{lemma}
\begin{proof}
Let $(\C,M,S)$ be a marked category. We define $(\C,M,S)^{\mathbf{2}}$ as the following marked category with squares:
\begin{itemize}
    \item its objects are arrows in $\C$;
    \item its arrows $f\to g$ are commutative squares
    $$
    \begin{tikzcd}
        \bullet\ar[r] \ar[d, "f"'] & \bullet\ar[d, "g"]\\
        \bullet\ar[r] &\bullet;
    \end{tikzcd}
    $$
    \item marked arrows are commutative squares in $S$ whose both hotizontal components are marked:
    $$
        \begin{tikzcd}
        \bullet\ar[r, -tri] \ar[d, "f"'] & \bullet\ar[d, "g"]\\
        \bullet\ar[r, -tri] &\bullet;
		\arrow["\mathcal{S}"{anchor=center, style = {font=\normalsize}}, draw=none, from=1-1, to=2-2]
    \end{tikzcd}
    $$
	\item a commutative square 
    $$
    \begin{tikzcd}
        f\ar[r] \ar[d] & g\ar[d]\\
        h\ar[r] &k;
    \end{tikzcd}
    $$
		in $(\C, M, S)^\mathbf{2}$ is chosen if and only if it is a cube in $\C$ with front and back squares being in $S$:
		% https://q.uiver.app/#q=WzAsOCxbMCwxLCJcXGJ1bGxldCJdLFswLDMsIlxcYnVsbGV0Il0sWzIsMSwiXFxidWxsZXQiXSxbMiwzLCJcXGJ1bGxldCJdLFsxLDAsIlxcYnVsbGV0Il0sWzMsMCwiXFxidWxsZXQiXSxbMywyLCJcXGJ1bGxldCJdLFsxLDIsIlxcYnVsbGV0Il0sWzAsMV0sWzAsMl0sWzIsM10sWzEsM10sWzQsMF0sWzUsMl0sWzQsNV0sWzUsNl0sWzYsM10sWzQsN10sWzcsNl0sWzcsMV1d
\[\begin{tikzcd}
	& \bullet && \bullet \\
	\bullet && \bullet \\
	& \bullet && \bullet \\
	\bullet && \bullet.
	\arrow[from=1-2, to=1-4]
	\arrow["f"', from=1-2, to=2-1]
	\arrow[from=1-2, to=3-2, ""{name=bleft}]
	\arrow[from=1-4, to=3-4, ""{name=bright}]
	\arrow["\mathcal{S}"{anchor=center, style = {font=\huge}, pos=0.6}, draw=none, from=bleft, to=bright]
	\arrow["g"', from=1-4, to=2-3, crossing over]
	\arrow[from=2-1, to=2-3, crossing over]
	\arrow[from=2-1, to=4-1, ""{name=fleft}]
	\arrow[from=3-2, to=3-4]
	\arrow[from=2-3, to=4-3, crossing over, ""{name=fright}]
	\arrow["h"', from=3-2, to=4-1]
	\arrow["k"', from=3-4, to=4-3]
	\arrow[from=4-1, to=4-3]
	\arrow["\mathcal{S}"{fill=white, description, style = {font=\huge}, pos=0.7}, draw=none, from=fleft, to=fright]
\end{tikzcd}\]
	It should be stressed that we are still following the convention that a domain of a square is drawn on the left -- therefore its domain is the left square with $f$ and $h$.
\end{itemize}
The limiting cone is the same as in $\Cat$, and so is the proof that this construction works, so we omit it.
\end{proof}

\begin{lemma}
	The 2-category $\Cat_{m,sq}$ is an accessible 2-category with filtered colimits.
\end{lemma}
\begin{proof}
	From the discussion before \ref{def:2Cat_m,sq}, we know that the last missing piece is commutativity of powers by $\mathbf{2}$, and directed colimits. However, both are computed in $\Cat$, and they commute there, hence they commute also in $\Cat_{m,sq}$.
\end{proof}

\begin{lemma}
	The 2-category $\Cat_{m,sq}$ has copowers by $\mathbf{2}$.
\end{lemma}
\begin{proof}
Let $(\C,M,S)$ be a marked category. We define $(\C,M,S)\cdot{\mathbf{2}}$ as the following marked category:
\begin{itemize}
    \item its objects are pairs $(c\in\C, x\in\mathbf{2})$;
    \item its arrows $(c,x)\to(c',x')$ are pairs of arrows $(f\colon c\to c',g\colon x\to x')$;
    \item its marked subcategory consists of pairs such that their first component is in $M$, and the second is an identity;
	\item its squares are generated under composites from the following three types:
		\begin{itemize}
			\item for every chosen square in $\C$
    $$
        \begin{tikzcd}
        a\ar[r] \ar[d] & b\ar[d]\\
        c\ar[r] &d,
		\arrow["\mathcal{S}"{anchor=center, style = {font=\normalsize}}, draw=none, from=1-1, to=2-2]
    \end{tikzcd}
    $$
			the following square is chosen in $(\C,M,S)\cdot\mathbf{2}$:
    $$
        \begin{tikzcd}
		(a,0)\ar[r] \ar[d] & (b,0)\ar[d]\\
		(c,0)\ar[r] &(d,0);
		\arrow["\mathcal{S}"{anchor=center, style = {font=\normalsize}}, draw=none, from=1-1, to=2-2]
    \end{tikzcd}
    $$
			\item the same as in the previous item, just with ones in the second component;
			\item for every marked arrow $f\colon c\rightarrowtriangle d$ in $\C$, the following square is chosen:
    $$
        \begin{tikzcd}
			{(c,0)}\ar[r, "{(c, \leq)}"] \ar[d, "{(f,0)}"'] & {(c,1)}\ar[d, "{(f,1)}"]\\
			{(d,0)}\ar[r, "{(d,\leq)}"'] & {(d,1)}.
		\arrow["\mathcal{S}"{anchor=center, style = {font=\normalsize}}, draw=none, from=1-1, to=2-2]
    \end{tikzcd}
    $$
		\end{itemize}
\end{itemize}
The colimiting cocone and the proof of correctness are the same in $\Cat$, and therefore omitted.
\end{proof}
Altogether, we obtained:
\begin{thm}\label{catm is in wlp}
	The 2-category $\Cat_{m,sq}$ belongs to $\wLP$. Moreover, the forgetful functor $U_c\colon\Cat_{m,sq}\to\Cat$ is a morphism in $\wLP$.
\end{thm}
\begin{proof}
	We already know that $\Cat_{m,sq}$ is accessible, so it remains that it has flexible limits. 
	A direct consequence of the preceding lemmas is that $\Cat_{m,sq}$ has all 2-limits, especially all flexible. 
	The forgetful functor is in $\wLP$ as all the limits and colimits in question are actually computed in $\Cat$.
\end{proof}
Before, we move further, we prove two lemmas that will be useful throughout the chapter:
\begin{lemma}\label{sq id filtered}
	The functor $S_1\colon\Cat_{m,sq}\to\Set$ that sends a marked category with squares to the set of all chosen squares whose domain and codomain are identities preserves filtered colimits.
\end{lemma}
\begin{proof}
	Given $(\C,M,S)\in\Cat_{m,sq}$, we can construct the desired set as the equalizer of
\[\begin{tikzcd}
	{S} & {C_1\times C_1},
	\arrow["{{\alpha}}", shift left=2, from=1-1, to=1-2]
	\arrow["{{\beta}}"', shift right=2, from=1-1, to=1-2]
\end{tikzcd}\]
where $\alpha$ sends a square to its domain and codomain, whereas $\beta$ takes a square, discards everything except the objects in upper corners, and returns the pair of identities on those objects.

Formally, $\alpha$ is
	$$S\xrightarrow{\iota_s}(\C_1\times_{\C_0}\C_1)\times_{\C_1}(\C_1\times_{\C_0}\C_1)\xrightarrow{(d_s,c_s)}\C_1\times\C_1,$$
	and $\beta$ is
	$$S\xrightarrow{\iota_s}(\C_1\times_{\C_0}\C_1)\times_{\C_1}(\C_1\times_{\C_0}\C_1)\xrightarrow{\pi_2}\C_1\times_{\C_0}\C_1\xrightarrow{\pi_1}\C_1\xrightarrow{(d_c,c_c)}\C_0\times\C_0\xrightarrow{i_c\times i_c}\C_1\times\C_1.$$
	Now, as sending $(\C, M, S)$ to any of the objects $\C_1,\C_0,S$ is a functor preserving filtered colimits (as all of those are of the form $Mod(f)$ for $f\in\Lex$), we conclude that $S_1$ preserves filtered colimits as a finite limit of functors preserving filtered colimits.
\end{proof}

\begin{lemma}\label{triangle wlp}
	Let $\rightarrowtriangle$ be the marked category with squares, whose underlying category is $\mathbf{2}$, all its arrows are marked, and only the necessary squares (with identities in horizontal direction) are chosen. 
	Then the 2-functor $\Cat_{m,sq}(\rightarrowtriangle,-)\colon\Cat_{m,sq}\to\Cat$ preserves filtered colimits and flexible limits.
\end{lemma}
\begin{proof}
Flexible limits follow as we have a representable 2-functor (that preserves all 2-limits).

Since we have powers by $\mathbf{2}$, the  2-dimensional universal property of filtered colimits follows from the 1-dimensional. 
	Therefore, we can equivalently just prove that $\Cat_{m,sq}(\rightarrowtriangle,-)$ preserves filtered colimits as a 1-functor.

We gather a few facts:
\begin{enumerate}
	\item The functor $\Cat(\mathbf{2},-)\colon\Cat\to\Set$ is conservative:
    Whenever $F\colon\C\to\D$ is a functor such that its action on morphisms has an inverse $G_1$, we can extend $G_1$ to a functor $G\colon\D\to\C$ by setting $G(d)$ to be the domain (or codomain) of $G_1(id_c)$. The functor $G$ is an inverse to $F$.
\item The functor $\Cat(\mathbf{2},-)\colon\Cat\to\Set$ reflects filtered colimits:
    This follows from the previous item and \cite[Proposition 2.9.7]{Borceux_1994}.
\end{enumerate}
Using the second point, we can equivalently prove that the composite
	$$H:=\Cat_{m,sq}\xrightarrow{\Cat_{m,sq}(\rightarrowtriangle,-)}\Cat\xrightarrow{\Cat(\mathbf{2},-)}\Set$$
preserves filtered colimits. This composite sends a marked category with squares $(\C, M, S)$ to the set of all chosen squares in $\C$ such that both their domain and codomain are marked:
$$
\begin{tikzcd}
    a\ar[r, "f"]\ar[d, -tri] &b\ar[d, -tri]\\
    c\ar[r, "g"] & d,
	\arrow["\mathcal{S}"{anchor=center, style = {font=\normalsize}}, draw=none, from=1-1, to=2-2]
\end{tikzcd}
$$
and the following two squares are chosen:
$$
\begin{tikzcd}
    a\ar[r, "f"]\ar[d, "id"] &b\ar[d, "id"]\\
    a\ar[r, "f"'] & b
	\arrow["\mathcal{S}"{anchor=center, style = {font=\normalsize}}, draw=none, from=1-1, to=2-2]
\end{tikzcd}
\begin{tikzcd}
    c\ar[r, "g"]\ar[d, "id"] &d\ar[d, "id"]\\
    c\ar[r, "g"'] & d.
	\arrow["\mathcal{S}"{anchor=center, style = {font=\normalsize}}, draw=none, from=1-1, to=2-2]
\end{tikzcd}
$$

The functor $H$ is the limit of the following diagram of functors $\Cat_{m,sq}\to\Set$:
\[\begin{tikzcd}
	S_1\times S_1\ar[dr, "{\pi_2\cdot\pi_1\times\pi_2\cdot\pi_1}"'] && S\ar[dl, "{(\pi_2\cdot\pi_1,\pi_1\cdot\pi_2)}"']\ar[dr, "{(d_s, c_s)}"] && {M_1\times M_1}\ar[dl, "\iota_m\times\iota_m"] 
	\\
	&{C_1\times C_1}& & {C_1\times C_1.} &
\end{tikzcd}\]
	From the previous lemma \ref{sq id filtered}, we know that $S_1$ preserves filtered colimits. Therefore, $H$ preserves filtered colimits as a finite limit of functors preserving filtered colimits.
\end{proof}
\begin{nota}
	We write $(-)^\rightarrowtriangle$ for the functor $\Cat_{m,sq}(\rightarrowtriangle,-)$.
\end{nota}


\subsection{Stage 2: Marked Arrows Contain All Isomorphisms -- $\Cat_{m^+, sq}$}\label{sec:rep has isos}
In the second stage, we relate isomorphisms to marked arrows and chosen squares.
\begin{defi}
	Let $\M$ be in $\Cat_{m,sq}$. We say that $\M$ \emph{satisfies property} $\mathcal{I}$ if
	\begin{enumerate}
		\item all its isomorphisms are marked;
		\item all squares whose domain and codomain are isomorphisms are chosen.
	\end{enumerate}
\end{defi}

For every $\mathcal{M}\in\Cat_{m,sq}$, we have the following inclusion functors ($I$ is the free isomorphism):
% https://q.uiver.app/#q=WzAsMyxbMCwxLCJcXG1hdGhjYWwgTSJdLFsxLDEsIlVfY1xcbWF0aGNhbCBNXntcXG1hdGhiZjJ9LiJdLFsxLDAsIlVfY1xcbWF0aGNhbCBNXkkiXSxbMCwxLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsyLDEsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV1d
\[\begin{tikzcd}
	& {(U_c\mathcal M)^I} \\
	{\mathcal{M}^{\rightarrowtriangle}} & {(U_c\mathcal M)^{\mathbf2}.}
	\arrow[hook, from=1-2, to=2-2]
	\arrow[hook, from=2-1, to=2-2]
\end{tikzcd}\]
To say that $M$ satisfies property $\mathcal{I}$ is the same as asking for an existence of a (necessarily unique) factorisation 
% https://q.uiver.app/#q=WzAsMyxbMCwxLCJcXG1hdGhjYWwgTSJdLFsxLDEsIlVfY1xcbWF0aGNhbCBNXntcXG1hdGhiZjJ9LiJdLFsxLDAsIlVfY1xcbWF0aGNhbCBNXkkiXSxbMCwxLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsyLDEsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzIsMF1d
\[\begin{tikzcd}
	& {(U_c\mathcal M)^I} \\
	{\mathcal M^{\rightarrowtriangle}} & {(U_c\mathcal M)^{\mathbf2}.}
	\arrow[from=1-2, to=2-1]
	\arrow[hook, from=1-2, to=2-2]
	\arrow[hook, from=2-1, to=2-2]
\end{tikzcd}\]
Therefore, we can construct $\Cat_{m^+, sq}$ -- the 2-category of categories equipped with squares and a subcategory satisfying property $\mathcal{I}$ -- as the following pullback:
% https://q.uiver.app/#q=WzAsNCxbMCwyLCJcXENhdF9tIl0sWzIsMiwiW0Nvc3AsXFxDYXRdIl0sWzIsMCwiW0NvbXAsXFxDYXRdIl0sWzAsMCwiXFxDYXRfe21eK30iXSxbMCwxLCJWIiwyXSxbMiwxLCJpXioiXSxbMywwXSxbMywyXSxbMywxLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	{\Cat_{m^+,sq}} && {[Comp,\Cat]} \\
	\\
	{\Cat_{m,sq}} && {[Cosp,\Cat].}
	\arrow[from=1-1, to=1-3]
	\arrow[from=1-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
	\arrow["{i^*}", from=1-3, to=3-3]
	\arrow["V"', from=3-1, to=3-3]
\end{tikzcd}\]

The right 2-functor is the precomposition by the inclusion $i\colon Cosp\to Comp$. We define $V$ by
$$\mathcal{M}\mapsto\begin{tikzcd}
	& {(U_c\mathcal M)^I} \\
	{\mathcal M^{\rightarrowtriangle}} & {(U_c\mathcal M)^{\mathbf2}.}
	\arrow[hook, from=1-2, to=2-2]
	\arrow[hook, from=2-1, to=2-2]
\end{tikzcd}$$
\begin{lemma}
    The 2-functor $i^*$ is an isofibration.
\end{lemma}
\begin{proof}
Assume we have an isomorphism $\alpha\colon D\cong D'i$
$$\begin{tikzcd}
        \C\ar["\alpha_1", d]\ar[r]&\D\ar["\alpha_2", d] &\E\ar[l]\ar["\alpha_3", d]\\
        \C'\ar[r]&\D' &\E',\ar[l]
\end{tikzcd}$$
where $$D=\begin{tikzcd}
        \C\ar[r]&\D &\E\ar[l]
    \end{tikzcd}\in [Cosp,\Cat]$$ and $$D'=\begin{tikzcd}
        \C'\ar[r]&\D' &\E'\ar["F"', ll, curve={height=15pt}]\ar[l]
    \end{tikzcd}\in [Comp,\Cat].$$
    Then we can lift $D$ to $\overline{D}\in [Comp,\Cat]$ by setting the missing arrow $\E\to\C$ to $\alpha_1^{-1}\cdot F\cdot\alpha_3$. We clearly have that $\overline{D}i=D$ and components of $\alpha$ can be used as an isomorphism $\overline\alpha\colon\overline{D}\cong D'\in [Comp,\Cat]$. Thus, $i^*$ is an isofibration.
\end{proof}
All the functor categories are in $\mathbf{wLP}$ by the first item of Theorem \ref{lp}. 
Moreover, $i^*$ preserves all limits and colimits as it is both right and left 2-adjoint (to left and right Kan extensions). 
The 2-category $\Cat_{m,sq}$ is in $\mathbf{wLP}$ by Theorem \ref{catm is in wlp}. 
Therefore, it remains to show that the 2-functor $V$ preserves filtered colimits and flexible limits. 
As these are computed pointwise in $[Cosp,\Cat]$, we can prove that all its three components ($\mathcal{M}\mapsto {(U_c\mathcal M)^I},(U_c\mathcal M)^{\mathbf2},\mathcal M^{\rightarrowtriangle}$) preserve those.
\begin{lemma}
    All the following 2-functors preserve flexible limits and filtered colimits:
    $$
    \begin{tikzcd}[row sep=tiny]
		\Cat_{m,sq}\ar[r] & \Cat\\
		\mathcal M\ar[r, maps to] &(U_c\mathcal M)^I\\
		\mathcal M\ar[r, maps to] &(U_c\mathcal M)^{\mathbf2}\\
        \mathcal M\ar[r, maps to] &\mathcal M^{\rightarrowtriangle}.
    \end{tikzcd}
    $$
\end{lemma}
\begin{proof}
Properties of the last functor are proved in Lemma \ref{triangle wlp}.

	From Theorem \ref{catm is in wlp}, we know that the functor $U_c\colon\Cat_{m,sq}\to\Cat$ is a morphism in $\wLP$. 
	The functors $\Cat(\mathbf{2},-),\Cat(I,-)$ are represented by a finite category. 
	As such they also preserve all 2-limits and filtered colimits. 
	Hence, all the three considered functors are composites of functors preserving 2-limits and filtered colimits, as such, they preserve these as well.
\end{proof}
Therefore, we proved all the required properties mentioned in the beginning of this section. This implies that $\Cat_{m^+,sq}$ is in $\mathbf{wLP}$. 

\subsection{Stage 3: Categories with Finite Limits -- $\Lex$}\label{stage:lex}
As objects of $\Rep$ have finite limits, we also make use of the 2-category $\mathbf{Lex}$ of categories with finite limits, finite-limits preserving functors, and natural transformations as one of our building blocks. A category has finite limits if and only if it has terminal objects and pullbacks, therefore, it suffices to add these. A category $\C$ has a terminal object if and only if the functor $!\colon\C\to 1$ has a right adjoint $t\colon 1\to\C$. Assuming axiom of choice, $\C$ has pullbacks if and only if the diagonal functor $\Delta\colon\C\to [Cosp, \C]$ has a right adjoint $\lim\colon[Cosp, \C]\to\C$. Moreover a functor $F\colon\C\to\D$ preserves terminal object if and only if the diagram
$$\begin{tikzcd}
    \C\ar[d, "F"'] &1\ar[l, "t"']\ar[ld, "t"]\\
    \D \\
\end{tikzcd}$$ commutes up to an isomorphism. With pullbacks the situation is a bit more subtle -- preservation of pullbacks is not equivalent to having an isomorphism
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJbQ29zcCxcXENdIl0sWzEsMCwiXFxDIl0sWzAsMSwiW0Nvc3AsXFxEXSJdLFsxLDEsIlxcRCJdLFswLDEsImxpbSJdLFswLDIsIltDb3NwLCBGXSIsMl0sWzIsMywibGltIiwyXSxbMSwzLCJGIl0sWzIsMSwiXFxjb25nIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
\[\begin{tikzcd}
	{[Cosp,\C]} & \C \\
	{[Cosp,\D]} & \D;
	\arrow["\lim", from=1-1, to=1-2]
	\arrow["{[Cosp, F]}"', from=1-1, to=2-1]
	\arrow["F", from=1-2, to=2-2]
	\arrow["\cong"{description}, draw=none, from=2-1, to=1-2]
	\arrow["\lim"', from=2-1, to=2-2]
\end{tikzcd}\]
we need the specified arrow $\alpha\colon F\lim\Rightarrow\lim [Cosp, F]$ to be invertible. This arrow is in fact the mate of identity:
% https://q.uiver.app/#q=WzAsNixbMiwwLCJcXEMiXSxbNCwwLCJcXEQiXSxbMiwyLCJbQ29zcCxcXENdIl0sWzQsMiwiW0Nvc3AsXFxEXS4iXSxbMCwyLCJbQ29zcCxcXENdIl0sWzYsMCwiXFxEIl0sWzAsMSwiRiIsMl0sWzAsMiwiXFxEZWx0YSIsMl0sWzIsMywiW0Nvc3AsIEZdIiwyXSxbMSwzLCJcXERlbHRhIl0sWzQsMCwiXFxsaW0iXSxbNCwyLCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxLDUsIiIsMix7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzMsNSwiXFxsaW0iLDJdLFsxMiwzLCJcXGV0YSIsMix7InNob3J0ZW4iOnsic291cmNlIjoxMCwidGFyZ2V0IjoxMH19XSxbMCwxMSwiXFx2YXJlcHNpbG9uIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjEwLCJ0YXJnZXQiOjEwfX1dXQ==
\[\begin{tikzcd}
	&& \C && \D && \D \\
	\\
	{[Cosp,\C]} && {[Cosp,\C]} && {[Cosp,\D].}
	\arrow["F"', from=1-3, to=1-5]
	\arrow["\Delta"', from=1-3, to=3-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, Rightarrow, no head, from=1-5, to=1-7]
	\arrow["\Delta", from=1-5, to=3-5]
	\arrow["\lim", from=3-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, Rightarrow, no head, from=3-1, to=3-3]
	\arrow["{[Cosp, F]}"', from=3-3, to=3-5]
	\arrow["\lim"', from=3-5, to=1-7]
	\arrow["\varepsilon", shorten <=5pt, shorten >=5pt, Rightarrow, from=1-3, to=1]
	\arrow["\eta"', shorten <=5pt, shorten >=5pt, Rightarrow, from=0, to=3-5]
\end{tikzcd}\]
Being a mate of the identity yields that
% https://q.uiver.app/#q=WzAsNixbMCwwLCJcXEMiXSxbMSwwLCJbQ29zcCxcXENdIl0sWzIsMCwiXFxDIl0sWzAsMiwiXFxEIl0sWzEsMiwiW0Nvc3AsXFxEXSJdLFsyLDIsIlxcRCJdLFswLDEsIlxcRGVsdGEiLDJdLFsxLDIsIlxcbGltIiwyXSxbMCwzLCJGIiwyXSxbMyw0LCJcXERlbHRhIiwyXSxbNCw1LCJcXGxpbSIsMl0sWzIsNSwiRiJdLFsxLDQsIltDb3NwLEZdIiwxXSxbMCwyLCIxX3tcXEN9IiwwLHsiY3VydmUiOi01fV0sWzIsNCwiXFxhbHBoYSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoxMCwidGFyZ2V0IjoxMH0sImxldmVsIjoyfV0sWzEsMywiPSIsMCx7Im9mZnNldCI6NCwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEzLDEsIlxcZXRhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwfX1dXQ==
\[\begin{tikzcd}
	\C & {[Cosp,\C]} & \C \\
	\\
	\D & {[Cosp,\D]} & \D
	\arrow["\Delta"', from=1-1, to=1-2]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{1_{\C}}", curve={height=-30pt}, from=1-1, to=1-3]
	\arrow["F"', from=1-1, to=3-1]
	\arrow["\lim"', from=1-2, to=1-3]
	\arrow["{=}", shift right=4, draw=none, from=1-2, to=3-1]
	\arrow["{[Cosp,F]}"{description}, from=1-2, to=3-2]
	\arrow["\alpha", shorten <=4pt, shorten >=4pt, Rightarrow, from=1-3, to=3-2]
	\arrow["F", from=1-3, to=3-3]
	\arrow["\Delta"', from=3-1, to=3-2]
	\arrow["\lim"', from=3-2, to=3-3]
	\arrow["\eta", shorten <=3pt, Rightarrow, from=0, to=1-2]
\end{tikzcd}\]
can be rewritten as 
% https://q.uiver.app/#q=WzAsOCxbNCwwLCJcXEMiXSxbNCwyLCJcXEQiXSxbMiwyLCJbQ29zcCxcXENdIl0sWzIsNCwiW0Nvc3AsXFxEXSJdLFsyLDAsIltDb3NwLFxcQ10iXSxbNCw0LCJcXEQuIl0sWzAsMCwiXFxDIl0sWzAsNCwiXFxEIl0sWzAsMSwiRiIsMl0sWzAsMiwiXFxEZWx0YSJdLFsyLDMsIltDb3NwLCBGXSIsMl0sWzEsMywiXFxEZWx0YSIsMl0sWzQsMCwiXFxsaW0iXSxbNCwyLCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxLDUsIiIsMix7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzMsNSwiXFxsaW0iLDJdLFs2LDQsIlxcRGVsdGEiXSxbNiw3LCJGIiwyXSxbNywzLCJcXERlbHRhIiwyXSxbNiwwLCIxX1xcQyIsMCx7ImN1cnZlIjotNX1dLFsyLDEsIj0iLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTQsMywiXFxldGEiLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MTAsInRhcmdldCI6MTB9fV0sWzAsMTMsIlxcdmFyZXBzaWxvbiIsMCx7InNob3J0ZW4iOnsic291cmNlIjoxMCwidGFyZ2V0IjoxMH19XSxbMTksNCwiXFxldGEiLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjB9fV0sWzE3LDIsIj0iLDEseyJzaG9ydGVuIjp7InNvdXJjZSI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
\[\begin{tikzcd}
	\C && {[Cosp,\C]} && \C \\
	\\
	&& {[Cosp,\C]} && \D \\
	\\
	\D && {[Cosp,\D]} && {\D.}
	\arrow["\Delta", from=1-1, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{1_\C}", curve={height=-30pt}, from=1-1, to=1-5]
	\arrow[""{name=1, anchor=center, inner sep=0}, "F"', from=1-1, to=5-1]
	\arrow["\lim", from=1-3, to=1-5]
	\arrow[""{name=2, anchor=center, inner sep=0}, Rightarrow, no head, from=1-3, to=3-3]
	\arrow["\Delta", from=1-5, to=3-3]
	\arrow["F"', from=1-5, to=3-5]
	\arrow["{=}"{description}, draw=none, from=3-3, to=3-5]
	\arrow["{[Cosp, F]}"', from=3-3, to=5-3]
	\arrow["\Delta"', from=3-5, to=5-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, Rightarrow, no head, from=3-5, to=5-5]
	\arrow["\Delta"', from=5-1, to=5-3]
	\arrow["\lim"', from=5-3, to=5-5]
	\arrow["\eta"', shorten <=3pt, Rightarrow, from=0, to=1-3]
	\arrow["{=}"{description}, draw=none, from=1, to=3-3]
	\arrow["\varepsilon", shorten <=7pt, shorten >=7pt, Rightarrow, from=1-5, to=2]
	\arrow["\eta"', shorten <=6pt, shorten >=6pt, Rightarrow, from=3, to=5-3]
\end{tikzcd}\]
Using the triangle equality for the top $\eta$ and $\varepsilon$ in this diagram, we obtain
% https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXEMiXSxbMiwwLCJcXEMiXSxbMCwyLCJcXEQiXSxbMSwzLCJbQ29zcCxcXERdLiJdLFsyLDIsIlxcRCJdLFswLDIsIkYiLDJdLFsyLDMsIlxcRGVsdGEiLDJdLFszLDQsIlxcbGltIiwyXSxbMSw0LCJGIl0sWzAsMSwiMV97XFxDfSJdLFsyLDQsIjFfe1xcRH0iXSxbMTAsMywiXFxldGEiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjB9fV0sWzUsOCwiPSIsMSx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH0sInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==
\[\begin{tikzcd}
	\C && \C \\
	\\
	\D && \D \\
	& {[Cosp,\D].}
	\arrow["{1_{\C}}", from=1-1, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "F"', from=1-1, to=3-1]
	\arrow[""{name=1, anchor=center, inner sep=0}, "F", from=1-3, to=3-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{1_{\D}}", from=3-1, to=3-3]
	\arrow["\Delta"', from=3-1, to=4-2]
	\arrow["\lim"', from=4-2, to=3-3]
	\arrow["{=}"{description}, draw=none, from=0, to=1]
	\arrow["\eta", shorten <=3pt, Rightarrow, from=2, to=4-2]
\end{tikzcd}\]
We also have an analogous equality for $\varepsilon$. Therefore, if $F$ preserves pullbacks, then the data of $F,[Cosp,F]$, and $\alpha$ amount to a pseudonatural transformation from the 2-functor $Adj\to\Cat$ given by 
% https://q.uiver.app/#q=WzAsMixbMCwwLCJcXEMiXSxbMiwwLCJbQ29zcCxcXENdIl0sWzAsMSwiXFxEZWx0YSIsMix7Im9mZnNldCI6Mn1dLFsxLDAsIlxcbGltIiwyLHsib2Zmc2V0IjozfV0sWzIsMywiIiwwLHsibGV2ZWwiOjEsInN0eWxlIjp7Im5hbWUiOiJhZGp1bmN0aW9uIn19XV0=
\[\begin{tikzcd}
	\C && {[Cosp,\C]}
	\arrow[""{name=0, anchor=center, inner sep=0}, "\Delta"', shift right=2, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "\lim"', shift right=3, from=1-3, to=1-1]
	\arrow["\dashv"{anchor=center, rotate=90}, draw=none, from=0, to=1]
\end{tikzcd}\]
to the 2-functor
given by
% https://q.uiver.app/#q=WzAsMixbMCwwLCJcXEQiXSxbMiwwLCJbQ29zcCxcXERdLiJdLFswLDEsIlxcRGVsdGEiLDIseyJvZmZzZXQiOjJ9XSxbMSwwLCJcXGxpbSIsMix7Im9mZnNldCI6M31dLFsyLDMsIiIsMCx7ImxldmVsIjoxLCJzdHlsZSI6eyJuYW1lIjoiYWRqdW5jdGlvbiJ9fV1d
\[\begin{tikzcd}
	\D && {[Cosp,\D].}
	\arrow[""{name=0, anchor=center, inner sep=0}, "\Delta"', shift right=2, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "\lim"', shift right=3, from=1-3, to=1-1]
	\arrow["\dashv"{anchor=center, rotate=90}, draw=none, from=0, to=1]
\end{tikzcd}\]
Apart from $\alpha$, all its 2-cells at arrows generating $Adj$ are identities. Moreover, the process is reversible, i.e. any pseudonatural transformation, whose components at the generating data of $Adj$ are:
\begin{itemize}
    \item at the domain of the left adjoint: $F$;
    \item at the codomain of the left adjoint: $[Cosp, F]$;
    \item at identities of these two objects: identity;
    \item at the left adjoint: identity;
    \item at the right adjoint: $\alpha$,
\end{itemize}
satisfies that $\alpha$ has to be the mate of the identity $[Cosp, F]\Delta=\Delta F$. Therefore, we can construct the category $\mathbf{Lex}$ as the following pullback:
% https://q.uiver.app/#q=WzAsNCxbMCwyLCJcXENhdCJdLFsyLDIsIlBzKFxcbWF0aGJmezJ9LFxcQ2F0KV4yLCJdLFsyLDAsIlBzKEFkaixcXENhdCleMiJdLFswLDAsIlxcbWF0aGJme0xleH0iXSxbMCwxLCJWIiwyXSxbMiwxLCIoaV4qKV4yIl0sWzMsMF0sWzMsMl0sWzMsMSwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	{\mathbf{Lex}} && {Ps(Adj,\Cat)^2} \\
	\\
	\Cat && {Ps(\mathbf{2},\Cat)^2,}
	\arrow[from=1-1, to=1-3]
	\arrow[from=1-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
	\arrow["{(i^*)^2}", from=1-3, to=3-3]
	\arrow["V"', from=3-1, to=3-3]
\end{tikzcd}\]
where the functor $i\colon\mathbf{2}\to Adj$ picks the left adjoint, and $V$ is defined by
$$
\begin{tikzcd}
    \C\ar["F",d]\\
    \D
\end{tikzcd}
\mapsto
\left(\begin{tikzcd}
	\C\ar[r, "\Delta"]\ar["F",d]& {[Cosp,\C]}\ar["{[Cosp, F]}", d] \\
	\D\ar[r, "\Delta"]& {[Cosp,\D]},
\end{tikzcd}
\begin{tikzcd}
	\C\ar[r, "!"]\ar["F",d]& {1}\ar["{id}", d] \\
	\D\ar[r, "!"]& {1}
\end{tikzcd}\right).
$$
Now, we need to check all the desired properties of the pullback. By Theorem \ref{lp}, we know that all the categories are in $\mathbf{wLP}$ and that $i^*$ is an isofibration that preserves all the structure of $\mathbf{wLP}$. All that is missing is that $V$ preserves the structure as well. It suffices to check it pointwise (by \ref{lp}(2)) since evaluations jointly reflect them. As the components are identity, constantly terminal object, or powering by a finite category, it holds.

We can conclude that $\mathbf{Lex}$ belongs to $\mathbf{wLP}$.
\subsection{Stage 4: Marked Arrows, Chosen Squares and Finite Limits -- $\Rep_0$}
This time, we combine the two structures that we already created -- finite limits with marked arrows and squares (satisfying property $\mathcal{I}$) : 

We define $\Rep_0$ by the following pullback:
% https://q.uiver.app/#q=WzAsNCxbMCwyLCJcXENhdF97bV4rfSJdLFsyLDIsIlxcQ2F0Il0sWzIsMCwiXFxtYXRoYmZ7TGV4fSJdLFswLDAsIlxcUmVwXzAiXSxbMCwxXSxbMiwxXSxbMywwXSxbMywyXSxbMywxLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	{\Rep_0} && {\mathbf{Lex}} \\
	\\
	{\Cat_{m^+, sq}} && \Cat.
	\arrow[from=1-1, to=1-3]
	\arrow[from=1-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
	\arrow[from=1-3, to=3-3]
	\arrow[from=3-1, to=3-3]
\end{tikzcd}\]
The functors into $\Cat$ are the forgetful functors that we have by the previous constructions. From previous stages, we know that all the categories are in $\wLP$, and that both of them are morphisms in $\wLP$. Moreover, the functor $\Lex\to\Cat$ (in fact both considered functors) is an isofibration as these are pullback-stable. Thus, $\Rep_0$ is in $\wLP$. From now on, we call all the marked arrows representable.

\subsection{Stage 5: Pullback-stability of Representable Maps -- $\Rep_A$}
For a CwR, we require the representable arrows to be pullback-stable. 
We ensure this property in this stage. 
The idea is similar to the idea in Stage 2. 
Let us denote by $\C^{\rightarrowtriangle}$ the category of representable arrows in $\C$ (formally, we forget into $\Cat_{m,sq}$, and then apply $\Cat_{m,sq}(\rightarrowtriangle,-)$), and by $\C^{\to\raisebox{4pt}{\rotatebox[origin=c]{-90}{$\rightarrowtriangle$}}}$ the category of cospans with one arrow representable. 
As we have pullbacks, there is a functor $pb\colon\C^{\to\raisebox{4pt}{\rotatebox[origin=c]{-90}{$\rightarrowtriangle$}}}\to\C^{\mathbf{2}}$ given by considering the pullback of the cospan, and then choosing the left arrow (the opposite to the representable one). 
Having all the data, we consider the following diagram in $\Cat$:
\[\begin{tikzcd}
	& {\C^{\to \raisebox{4pt}{\rotatebox[origin=c]{-90}{$\rightarrowtriangle$}}}}\\
	{\C^{\rightarrowtriangle}} & {\C^\mathbf{2}}.
	\arrow["pb", from=1-2, to=2-2]
	\arrow[hook, from=2-1, to=2-2]
\end{tikzcd}\]
Now, $pb$ factors through the inclusion of representable arrows if and only if  representable arrows and chosen squares are pullback-stable (we do not care about pullback stability of chosen squares, because in the next stage, we ensure that chosen squares are in fact pullbacks and these are pullback stable).
Thus, we can construct $\Rep_A$ -- the 2-category of categories with finite limits, and a pullback-stable marked arrows and squares satisfying property $\mathcal{I}$ -- as the following pullback:
% https://q.uiver.app/#q=WzAsNCxbMCwyLCJcXFJlcF8wIl0sWzIsMiwiUHMoQ29zcCwgXFxDYXQpLiJdLFsyLDAsIlBzKENvbXAsIFxcQ2F0KSJdLFswLDAsIlxcUmVwX0EiXSxbMCwxLCJWIiwyXSxbMiwxLCJpXioiXSxbMywwXSxbMywyXSxbMywxLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	{\Rep_A} && {Ps(Comp, \Cat)} \\
	\\
	{\Rep_0} && {Ps(Cosp, \Cat),}
	\arrow[from=1-1, to=1-3]
	\arrow[from=1-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
	\arrow["{i^*}", from=1-3, to=3-3]
	\arrow["V"', from=3-1, to=3-3]
\end{tikzcd}\]
where the functor $V$ is defined by
$$
\begin{tikzcd}
    \C\ar["F"',d]&	\C^{\rightarrowtriangle}\ar[r, hook]\ar[d]& {\C^{\mathbf{2}}}\ar[d] & {\C^{\to \raisebox{4pt}{\rotatebox[origin=c]{-90}{$\rightarrowtriangle$}}}}\ar[l, "{pb}"]\ar[d]\\
    \D &    \D^{\rightarrowtriangle}\ar[r, hook]& {\D^{\mathbf{2}}}& {\D^{\to \raisebox{4pt}{\rotatebox[origin=c]{-90}{$\rightarrowtriangle$}}}}.\ar[l, "{pb}"]\\
 \ar["{\cong}"{anchor=center}, draw=none, from=1-3, to=2-4]
 \arrow[from=2-1, to=2-2, maps to, shift left=9]
\end{tikzcd}
$$
As before, all the 2-categories are in $\wLP$, and $i^*$ is an isofibration therein. It remains to prove that $V$ preserves flexible limits and filtered colimits; we prove that its components preserve these.
\begin{lemma}\label{V wlp}
    The functor $V$ is a morphism in $\wLP$.
\end{lemma}
\begin{proof}
    The first component, $\C\mapsto \C^{\rightarrowtriangle}$, is a composite of morphisms in $\wLP$
	$$\Rep_0\to\Cat_{m^+,sq}\to\Cat_{m,sq}\xrightarrow{\Cat_{m,sq}(\mathbf{\rightarrowtriangle,-})}\Cat,$$
    hence a morphism in $\wLP$.

	It is similar with the second component, we just switch $\Cat_{m,sq}(\mathbf{\rightarrowtriangle,-})$, and $\Cat(\mathbf{\mathbf{2},-})\cdot U_c$.

    The last component can be expressed as the following pullback:
    $$
    \begin{tikzcd}
        {\C^{\to \raisebox{4pt}{\rotatebox[origin=c]{-90}{$\rightarrowtriangle$}}}}\ar[r]\ar[d] & \C^{\mathbf{2}}\ar[d, "cod"]\\
        \C^{\rightarrowtriangle}\ar[r, "cod"'] & U_c\C.
        \arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
    \end{tikzcd}
    $$
    As all the functors used in building this pullback are morphisms in $\wLP$, and pullbacks commute with limits and filtered colimits (as they are finite limits), we obtain that also the last component of $V$ is in $\wLP$.
\end{proof}
Thus, we have:
\begin{thm}
The 2-category $\Rep_A$ is in $\wLP$.
\end{thm}

\subsection{Stage 6: Chosen Squares = Pullbacks -- $\Rep_B$}
In this stage, we ensure that chosen squares are precisely pullback squares. 
This gives us the desired notion of 2-cells.

The idea is to again proceed similarly to the stage 2. 
Given $\C\in\Rep_0$, we denote $\mathcal{S}(\C)$, $Sq(C)$, and $Pb(\C)$ the categories of chosen squares in $\C$, commutative squares, and pullback squares respectively (precise definitions will be given later).

Then pullbacks correspond to chosen squares in $\C$ if and only if we have factorisations in both directions in the following cospan:

\[
	\begin{tikzcd}
				& {\mathcal{S}}(\C)\ar[d, hook]\\
		{Pb(\C)}\ar[r, hook] & {Sq(C).}
	\end{tikzcd}
\]
If we manage to define all the three 2-functors such that the statement above holds, and the assignment $\C\mapsto \mathcal{S}(\C)$ (resp. $Sq(C)$, $Pb(\C)$) preserves flexible limits and filtered colimits, then we can construct $\Rep_B$ -- the 2-category of categories with finite limits, and representable arrows, where 2-cells are natural transformations whose components at representable arrows are pullback squares -- as the following pullback:

\[\begin{tikzcd}
	{\Rep_B} && {[Comp, \Cat]^2} \\
	\\
	{\Rep_0} && {[Cosp, \Cat]^2,}
	\arrow[from=1-1, to=1-3]
	\arrow[from=1-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
	\arrow["{(i^*)^2}", from=1-3, to=3-3]
	\arrow["V"', from=3-1, to=3-3]
\end{tikzcd}\]
where the first component of the 2-functor $V$ is defined by
$$
\begin{tikzcd}
	\C\ar["F"',d]&	{Pb(\C)}\ar[r, hook]\ar[d]& {Sq(C)}\ar[d] & {\mathcal{S}(\C)}\ar[l, hook]\ar[d]\\
	\D &    {Pb(\D)}\ar[r, hook]& {Sq(\D)}& {\mathcal{S}(\D)},\ar[l, hook]\\
 \arrow[from=2-1, to=2-2, maps to, shift left=9]
\end{tikzcd}
$$
and the second component is the same, just with swapped $Pb$ and $\mathcal{S}$.

\begin{nota}
	We denote $\square$ the marked category with squares whose underlying category is $\mathbf{2}\times\mathbf{2}$, whose marked arrows are only the trivial ones, and squares are freely generated by the only commutative square with four different vertices.
\end{nota}

\begin{defi}
	We define $\mathcal{S}\colon\Rep_0\to\Cat$ to be the composition of the forgetful 2-functor $\Rep_0\to\Cat_{m,sq}$ with $\Cat_{m,sq}(\square,-)$.
\end{defi}

\begin{defi}
	We define $Sq\colon\Rep_0\to\Cat$ to be the 2-functor defined as the composition of the forgetful 2-functor $\Rep_0\to\Cat$ with $\Cat(\mathbf{2}\times\mathbf{2}, -)$.
\end{defi}

The definition of $Pb$ is a bit more delicate.
We constructed $\Lex$ as the 2-category of categories with a specified choice of limits for every finite diagram. 
Therefore, the first proposal might be to define $Pb(\C)$ as the category of cospans in $\C$ and the inclusion $Pb(\C)\to Sq(\C)$ by computing the pullback. 
However, this would ensure only that the chosen pullbacks are among chosen squares in the end, but we would like all pullback squares to be marked. 
We fix this in two steps. Denote $U_{\Lex}\colon\Lex\to\Cat$ the forgetful 2-functor. First, we consider the following pullback (in $2$-$\CAT(\Lex,\Cat)$):
\[\begin{tikzcd}
	{Pb_{iso}}\ar[r]\ar[d] & \Cat(I,U_{\Lex}-)\ar[d]\\
	\Cat(\mathbf{2}\times\mathbf{2},U_{\Lex}-)\ar[r] & {U_{\Lex}^2,}
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
\end{tikzcd}\]
where the right arrow takes an isomorphism and returns its domain and codomain, and the bottom arrow takes a commutative square 
	\[\begin{tikzcd}
		a\ar[r]\ar[d] & b\ar[d]\\
		c\ar[r] & d
	\end{tikzcd}\]
and returns $(a, c\times_{d}b)$.

Second, we obtain $Pb$ as the equaliser of the following diagram:
\[\begin{tikzcd}
	{Pb_{iso}} & {\Cat(\mathbf{2},U_{\Lex}-)^2,}
	\arrow["{{\alpha}}", shift left=2, from=1-1, to=1-2]
	\arrow["{{\beta}}"', shift right=2, from=1-1, to=1-2]
\end{tikzcd}\]
where given the input
	\[\left(\begin{tikzcd}
		a\ar[r, "f"]\ar[d, "g"'] & b\ar[d]\\
		c\ar[r] & d
	\end{tikzcd},
		a\xrightarrow{h}c\times_d b\right),\]
\begin{itemize}
	\item $\alpha$ returns $(\pi_1h\colon a\to c, \pi_2h\colon a\to b)$ ($\pi_i$ being the pullback projections);
	\item $\beta$ returns $(g, f)$.
\end{itemize}

\begin{nota}
	We abuse the notation and denote $Pb$ also the 2-functor that is obtained as the composition of $Pb$ constructed above and the forgetful functor $\Rep_0\to\Lex$.
\end{nota}
\begin{rem}
	The desired inclusions $Pb(\C)\xhookrightarrow{} Sq(\C)$ and $\mathcal{S}(\C)\xhookrightarrow{} Sq(\C)$ come from forgetting the isomorphism and the inclusion $\mathbf{2}\times\mathbf{2}\xhookrightarrow{}\square$ respectively.
\end{rem}

\begin{prop}
	All the three functors $Pb,\mathcal{S}$ and $Sq$ are morphisms in $\wLP$.
\end{prop}
\begin{proof}
	The situation is the easiest with $Sq$ which is in $\wLP$ as a composite of morphisms in $\wLP$ ($\Cat(\mathbf{2}\times\mathbf{2},-)$ is in $\wLP$ as it is represented by a finite category).

	The 2-functor $Pb$ is in $\wLP$ because it is a composite of $\Rep_0\to\Lex$, which is in $\wLP$ by construction, and of a functor $\Lex\to\Cat$, which is in $\wLP$ as a finite limit of 2-funcors in $\wLP$.

	The last bit is $\mathcal{S}$. 
	It preserves flexible limits as a composite of a representable with a functor preserving flexible limits, so it remains to show that it preserves filtered colimits. 
	To show that it also preserve filtered colimits, we adopt the same strategy as in \ref{triangle wlp} and prove that its composition with $\Cat(\mathbf{2},-)\colon\Cat\to\Set$ preserves filtered colimits as a 1-functor.
	The set of morphisms in $\mathcal{S}(\C)$ is the set of commutative cubes in $\C$ such that the front and back face are chosen squares. 
	This can be expressed as two chosen squares and four commutative squares satisfying certain compatibility conditions -- this can be obtained as a finite limit of functors preserving filtered colimits similarly to many situations before.
	Thus, $\mathcal{S}$ is in $\wLP$.
\end{proof}
\begin{thm}
	The 2-category $\Rep_B$ is in $\wLP$.
\end{thm}
\begin{proof}
	From the previous proposition, we can derive that $V$ is in $\wLP$. Hence, $\Rep_B\in\wLP$ by Theorem \ref{lp}.
\end{proof}

\subsection{Stage 7: Representable Morphisms are Exponentiable -- $\Rep_C$}\label{sec:rep has exp}
In the last but one stage, we add exponentials along representable morphisms. That is, we need to add right adjoints to all the functors $f^*\colon\C/c\to\C/c'$ for a representable $f\colon c'\rightarrowtriangle c$. Since we cannot add these adjoints one by one, we choose a different approach. We consider the version of a pullback functor
$$pb\colon\C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
}\to\C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
}$$
that takes a cospan with one leg representable, computes its pullback square, and then forgets the top and right morphism.

Adding a right adjoint to this functor is still not sufficient as the right adjoint is not forced to preserve the representable arrow in any sense. 
Therefore, we consider the commutative triangle 
\begin{equation}\label{big triangle}
	\begin{tikzcd}
	\raisebox{6pt}{$\downarrow$}\underset{f}{\rightarrowtriangle} &&&& \underset{f}{\rightarrowtriangle}\raisebox{6pt}{$\downarrow$} \\
	& \C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
} && \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} \\
	\\
	&& \C^{\rightarrowtriangle} \\
	&& \underset{f}{\rightarrowtriangle},
	\arrow["\in"{marking, allow upside down}, draw=none, from=1-1, to=2-2]
	\arrow[curve={height=12pt}, maps to, from=1-1, to=5-3]
	\arrow[maps to, from=1-5, to=1-1]
	\arrow["\in"{marking, allow upside down}, draw=none, from=1-5, to=2-4]
	\arrow[curve={height=-12pt}, maps to, from=1-5, to=5-3]
	\arrow["{\pi_1}"', from=2-2, to=4-3]
	\arrow["pb"', from=2-4, to=2-2]
	\arrow["{\pi_0}", from=2-4, to=4-3]
	\arrow["\in"{marking, allow upside down}, draw=none, from=5-3, to=4-3]
\end{tikzcd}
\end{equation}
and prove:

\begin{prop}
	For $\C\in\Rep_B$, the following is equivalent:
	\begin{enumerate}
		\item all representable morphisms are exponentiable;
		\item $pb$ has a fibered right adjoint.
	\end{enumerate}
\end{prop}
\begin{proof}
	The functors $\pi_{0,1}$ are obtained by taking a pullback of the codomain fibration, therefore they are fibrations as well.
	Hence, we can apply \cite[Lemma 1.8.9]{jacBook} to obtain that $pb$ has a fibered right adjoint if and only if we have a right adjoint in all the fibres and the Beck-Chevalley condition (version for fibrations) holds.
	Having right adjoints in all the fibres precisely corresponds to exponentiability of representable morphisms.
	Therefore, to prove the equivalence, it suffices to prove that the Beck-Chevalley condition holds always.

	The Beck-Chevalley condition for fibrations in this case translates to:\linebreak
For every morphism in $\C^{\rightarrowtriangle}$

\begin{equation}\label{pullbacksquare}
		\begin{tikzcd}
	{a}\ar[r, "f"]\ar[d, -tri, "g"] & b\ar[d, -tri, "h"]\\
	c\ar[r, "k"] & d,
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
\end{tikzcd}
\end{equation}
	the square 
	% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXEMvYSJdLFswLDIsIlxcQy9jIl0sWzIsMCwiXFxDL2IiXSxbMiwyLCJcXEMvZCJdLFsxLDAsImdeKiIsMl0sWzIsMCwiZl4qIiwyXSxbMywyLCJoXioiLDJdLFszLDEsImteKiJdLFswLDEsIlxcUGlfZyIsMix7ImN1cnZlIjoyfV0sWzIsMywiXFxQaV9oIiwyLHsiY3VydmUiOjJ9XSxbNCw4LCIiLDMseyJsZXZlbCI6MSwic3R5bGUiOnsibmFtZSI6ImFkanVuY3Rpb24ifX1dLFs2LDksIiIsMyx7ImxldmVsIjoxLCJzdHlsZSI6eyJuYW1lIjoiYWRqdW5jdGlvbiJ9fV1d
\[\begin{tikzcd}
	{\C/a} && {\C/b} \\
	\\
	{\C/c} && {\C/d}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\Pi_g}"', curve={height=12pt}, from=1-1, to=3-1]
	\arrow["{f^*}"', from=1-3, to=1-1]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\Pi_h}"', curve={height=12pt}, from=1-3, to=3-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{g^*}"', from=3-1, to=1-1]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{h^*}"', from=3-3, to=1-3]
	\arrow["{k^*}", from=3-3, to=3-1]
	\arrow["\dashv"{anchor=center, rotate=-180}, draw=none, from=2, to=0]
	\arrow["\dashv"{anchor=center, rotate=-180}, draw=none, from=3, to=1]
\end{tikzcd}\]
satisfies the Beck-Chevalley condition as defined in \ref{def:BC}. 
	Since $f^*$ and $k^*$ have themselves left adjoints, we can equivalently prove that the dual Beck-Chevalley condition
	% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXEMvYSJdLFswLDIsIlxcQy9jIl0sWzIsMCwiXFxDL2IiXSxbMiwyLCJcXEMvZCJdLFsxLDAsImdeKiIsMl0sWzIsMCwiZl4qIiwyLHsiY3VydmUiOjJ9XSxbMywyLCJoXioiLDJdLFszLDEsImteKiIsMix7ImN1cnZlIjoyfV0sWzAsMiwiXFxTaWdtYV9mIiwyLHsiY3VydmUiOjJ9XSxbMSwzLCJcXFNpZ21hX2siLDIseyJjdXJ2ZSI6Mn1dLFs5LDcsIiIsMix7ImxldmVsIjoxLCJzdHlsZSI6eyJuYW1lIjoiYWRqdW5jdGlvbiJ9fV0sWzgsNSwiIiwyLHsibGV2ZWwiOjEsInN0eWxlIjp7Im5hbWUiOiJhZGp1bmN0aW9uIn19XV0=
\[\begin{tikzcd}
	{\C/a} && {\C/b} \\
	\\
	{\C/c} && {\C/d}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\Sigma_f}"', curve={height=12pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{f^*}"', curve={height=12pt}, from=1-3, to=1-1]
	\arrow["{g^*}"', from=3-1, to=1-1]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{\Sigma_k}"', curve={height=12pt}, from=3-1, to=3-3]
	\arrow["{h^*}"', from=3-3, to=1-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{k^*}"', curve={height=12pt}, from=3-3, to=3-1]
	\arrow["\dashv"{anchor=center, rotate=90}, draw=none, from=0, to=1]
	\arrow["\dashv"{anchor=center, rotate=90}, draw=none, from=2, to=3]
\end{tikzcd}\]
holds. But this is equivalent to asking for every $l\colon\bullet\to c$ that the canonical map
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGJ1bGxldCJdLFswLDEsImEiXSxbMCwyLCJiIl0sWzEsMCwiXFxidWxsZXQiXSxbMCwxLCJnXipsIiwyXSxbMSwyLCJmIiwyXSxbMywyLCJoXiooa1xcY2RvdCBsKSIsMCx7ImN1cnZlIjotMn1dLFswLDMsIiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
\[\begin{tikzcd}
	\bullet & \bullet \\
	a \\
	b
	\arrow[dashed, from=1-1, to=1-2]
	\arrow["{g^*l}"', from=1-1, to=2-1]
	\arrow["{h^*(k\cdot l)}", curve={height=-12pt}, from=1-2, to=3-1]
	\arrow["f"', from=2-1, to=3-1]
\end{tikzcd}\]
	is an isomorphism. It is so, because the square \ref{pullbacksquare} is a pullback.
\end{proof}

The last obstacle is that we cannot add a fibered adjoint to our structure (see Remark \ref{cellular}). Luckily, we can add a pseudo-fibered right adjoint, and use the following lemma:
\begin{lemma}
	In the commutative triangle \ref{big triangle} the functor $pb$ has a fibered right adjoint if and only if it has a pseudo-fibered right adjoint. 
	That is a right adjoint $$R\colon\C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
}\to\C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
}$$ to $pb$ together with an isomorphism $\varphi\colon\pi_1\cong\pi_0 R$ satisfying that unit and counit postcomposed with $\pi$s are $\varphi pb$ and $\varphi^{-1}$, respectively.
\end{lemma}
\begin{proof}
    Any fibered adjoint is also a pseudo-fibered adjoint, so this direction is trivial. Let $(R, \eta, \varepsilon, \varphi)$ be a pseudo-fibered right adjoint to $pb$. As $\pi_0\colon\C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
}\to \C^{\rightarrowtriangle}$ is an isofibration (it is a pullback of an isofibration \ref{V wlp}), there is a functor 
$$R'\colon\C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
}\to\C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
}$$
with an isomorphism $\alpha\colon R'\cong R$ such that
% https://q.uiver.app/#q=WzAsNixbMCwwLCJcXEMiXSxbMiwwLCJcXEMiXSxbMSwyLCJcXEMiXSxbMywwLCJcXEMiXSxbNSwwLCJcXEMiXSxbNCwyLCJcXEMiXSxbMCwxLCJSIl0sWzAsMiwiXFxwaV8xIiwyXSxbMSwyLCJcXHBpXzAiXSxbMyw0LCJSJyIsMl0sWzMsNSwiXFxwaV8xIiwyXSxbNCw1LCJcXHBpXzAiXSxbMyw0LCJSIiwwLHsiY3VydmUiOi0zfV0sWzEwLDExLCI9IiwxLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzksMTIsIlxcYWxwaGEiLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzgsMTAsIj0iLDEseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNywxLCJcXHZhcnBoaSIsMix7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	\C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
} && \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} & \C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
} && \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} \\
	\\
	& \C^{\rightarrowtriangle} &&& \C^{\rightarrowtriangle}.
	\arrow["R", from=1-1, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\pi_1}"', from=1-1, to=3-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\pi_0}", from=1-3, to=3-2]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{R'}"', from=1-4, to=1-6]
	\arrow[""{name=3, anchor=center, inner sep=0}, "R", curve={height=-18pt}, from=1-4, to=1-6]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{\pi_1}"', from=1-4, to=3-5]
	\arrow[""{name=5, anchor=center, inner sep=0}, "{\pi_0}", from=1-6, to=3-5]
	\arrow["\varphi"', shorten <=8pt, shorten >=8pt, Rightarrow, from=0, to=1-3]
	\arrow["{=}"{description}, draw=none, from=1, to=4]
	\arrow["\alpha"', shorten <=2pt, shorten >=2pt, Rightarrow, from=2, to=3]
	\arrow["{=}"{description}, draw=none, from=4, to=5]
\end{tikzcd}\]
The functor $R'$ is a fibered functor over $\C^{\rightarrowtriangle}$, and we may view it as a right adjoint to $pb$ with unit $\eta'$, and counit $\varepsilon'$ defined respectively by
% https://q.uiver.app/#q=WzAsNixbMCwxLCJcXEMiXSxbMiwwLCJcXEMiXSxbMiwyLCJcXEMiXSxbNCwxLCJcXEMiXSxbNiwwLCJcXEMiXSxbNiwyLCJcXEMuIl0sWzAsMSwicGIiXSxbMSwyLCJSIiwyLHsiY3VydmUiOjF9XSxbMCwyLCJpZCIsMl0sWzEsMiwiUiciLDAseyJjdXJ2ZSI6LTV9XSxbMyw0LCJSIiwyXSxbNCw1LCJwYiJdLFszLDUsImlkIiwyXSxbMyw0LCJSJyIsMCx7ImN1cnZlIjotNH1dLFs4LDEsIlxcZXRhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dLFs3LDksIlxcYWxwaGFeey0xfSIsMix7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XSxbNCwxMiwiXFx2YXJlcHNpbG9uIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dLFsxMywxMCwiXFxhbHBoYSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	&& \C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
} &&&& \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} \\
	\C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} &&&& \C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
} \\
	&& \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} &&&& {\C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
}.}
	\arrow[""{name=0, anchor=center, inner sep=0}, "R"', curve={height=6pt}, from=1-3, to=3-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{R'}", curve={height=-30pt}, from=1-3, to=3-3]
	\arrow["pb", from=1-7, to=3-7]
	\arrow["pb", from=2-1, to=1-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "id"', from=2-1, to=3-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, "R"', from=2-5, to=1-7]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{R'}", curve={height=-24pt}, from=2-5, to=1-7]
	\arrow[""{name=5, anchor=center, inner sep=0}, "id"', from=2-5, to=3-7]
	\arrow["{\alpha^{-1}}"', shorten <=7pt, shorten >=7pt, Rightarrow, from=0, to=1]
	\arrow["\varepsilon", shorten <=7pt, shorten >=7pt, Rightarrow, from=1-7, to=5]
	\arrow["\eta", shorten <=7pt, shorten >=7pt, Rightarrow, from=2, to=1-3]
	\arrow["\alpha", shorten <=3pt, shorten >=3pt, Rightarrow, from=4, to=3]
\end{tikzcd}\]
It is standard that $pb$ and $R'$ form an adjunction with these. It remains to show that $\pi\eta'=id$ (the similar equation for counit is analogous):
% https://q.uiver.app/#q=WzAsOCxbNCwxLCJcXEMiXSxbNiwwLCJcXEMiXSxbNiwyLCJcXEMiXSxbMCwxLCJcXEMiXSxbMiwwLCJcXEMiXSxbMiwyLCJcXEMiXSxbMywyLCJcXEMiXSxbOCwyLCJcXGJ1bGxldCJdLFswLDEsInBiIl0sWzEsMiwiUiIsMix7ImN1cnZlIjoxfV0sWzAsMiwiaWQiLDJdLFsxLDIsIlInIiwwLHsiY3VydmUiOi01fV0sWzMsNCwicGIiXSxbNCw1LCJSJyJdLFszLDUsImlkIiwyXSxbNSw2LCJcXHBpXzEiLDJdLFs0LDYsIlxccGlfMCJdLFsyLDcsIlxccGlfMSIsMl0sWzEsNywiXFxwaV8wIiwwLHsiY3VydmUiOi01fV0sWzEwLDEsIlxcZXRhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dLFs5LDExLCJcXGFscGhhXnstMX0iLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzE0LDQsIlxcZXRhJyIsMix7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XSxbMTMsMTYsIj0iLDIseyJsYWJlbF9wb3NpdGlvbiI6NzAsIm9mZnNldCI6Miwic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzE2LDAsIj0iLDEseyJzaG9ydGVuIjp7InNvdXJjZSI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTEsNywiPSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMH0sInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==
\[\begin{tikzcd}
	&& \C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
} &&&& \C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
} \\
	\C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} &&&& \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} \\
	&& \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} & \C^{\rightarrowtriangle} &&& \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} && \C^{\rightarrowtriangle}.
	\arrow[""{name=0, anchor=center, inner sep=0}, "{R'}", from=1-3, to=3-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\pi_0}", from=1-3, to=3-4]
	\arrow[""{name=2, anchor=center, inner sep=0}, "R"', curve={height=6pt}, from=1-7, to=3-7]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{R'}", curve={height=-30pt}, from=1-7, to=3-7]
	\arrow["{\pi_0}", curve={height=-30pt}, from=1-7, to=3-9]
	\arrow["pb", from=2-1, to=1-3]
	\arrow[""{name=4, anchor=center, inner sep=0}, "id"', from=2-1, to=3-3]
	\arrow["pb", from=2-5, to=1-7]
	\arrow[""{name=5, anchor=center, inner sep=0}, "id"', from=2-5, to=3-7]
	\arrow["{\pi_1}"', from=3-3, to=3-4]
	\arrow["{\pi_1}"', from=3-7, to=3-9]
	\arrow["{=}"{description}, draw=none, from=1, to=2-5]
	\arrow["{=}"'{pos=0.7}, shift right=2, draw=none, from=0, to=1]
	\arrow["{\alpha^{-1}}"', shorten <=7pt, shorten >=7pt, Rightarrow, from=2, to=3]
	\arrow["{=}", draw=none, from=3, to=3-9]
	\arrow["{\eta'}"', shorten <=7pt, shorten >=7pt, Rightarrow, from=4, to=1-3]
	\arrow["\eta", shorten <=7pt, shorten >=7pt, Rightarrow, from=5, to=1-7]
\end{tikzcd}\]
By the definition of $\alpha$, we obtain
% https://q.uiver.app/#q=WzAsOCxbMCwxLCJcXEMiXSxbMiwwLCJcXEMiXSxbMiwyLCJcXEMiXSxbNCwyLCJcXEMiXSxbNSwxLCJcXEMiXSxbNywyLCJcXEMiXSxbNywwLCJcXEMiXSxbOSwyLCJcXEMiXSxbMCwxLCJwYiJdLFsxLDIsIlIiLDIseyJjdXJ2ZSI6MX1dLFswLDIsImlkIiwyXSxbMSwyLCJSJyIsMCx7ImN1cnZlIjotNX1dLFsyLDMsIlxccGlfMSIsMl0sWzEsMywiXFxwaV8wIiwwLHsiY3VydmUiOi01fV0sWzQsNSwiaWQiLDJdLFs0LDYsInBiIl0sWzYsNSwiUiJdLFs1LDcsIlxccGlfMSIsMl0sWzYsNywiXFxwaV8wIl0sWzEwLDEsIlxcZXRhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dLFs5LDExLCJcXGFscGhhXnstMX0iLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzExLDMsIj0iLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTQsNiwiXFxldGEiLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzUsMTgsIlxcdmFycGhpXnstMX0iLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzEzLDQsIiIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMH0sInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxMSw0LCI9IiwxLHsibGFiZWxfcG9zaXRpb24iOjgwLCJzaG9ydGVuIjp7InNvdXJjZSI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
\[\begin{tikzcd}
	&& \C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
} &&&&& \C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
} \\
	\C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} &&&&& \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} \\
	&& \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} && \C^{\rightarrowtriangle} &&& \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
} && \C^{\rightarrowtriangle}.
	\arrow[""{name=0, anchor=center, inner sep=0}, "R"', curve={height=6pt}, from=1-3, to=3-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{R'}", curve={height=-30pt}, from=1-3, to=3-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{\pi_0}", curve={height=-30pt}, from=1-3, to=3-5]
	\arrow["R", from=1-8, to=3-8]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{\pi_0}", from=1-8, to=3-10]
	\arrow["pb", from=2-1, to=1-3]
	\arrow[""{name=4, anchor=center, inner sep=0}, "id"', from=2-1, to=3-3]
	\arrow["pb", from=2-6, to=1-8]
	\arrow[""{name=5, anchor=center, inner sep=0}, "id"', from=2-6, to=3-8]
	\arrow["{\pi_1}"', from=3-3, to=3-5]
	\arrow["{\pi_1}"', from=3-8, to=3-10]
	\arrow[draw=none, from=2, to=2-6]
	\arrow["{=}"{description, pos=0.8}, draw=none, from=1, to=2-6]
	\arrow["{\alpha^{-1}}"', shorten <=7pt, shorten >=7pt, Rightarrow, from=0, to=1]
	\arrow["{=}", draw=none, from=1, to=3-5]
	\arrow["\eta", shorten <=7pt, shorten >=7pt, Rightarrow, from=4, to=1-3]
	\arrow["\eta"', shorten <=7pt, shorten >=7pt, Rightarrow, from=5, to=1-8]
	\arrow["{\varphi^{-1}}"', shorten <=6pt, shorten >=6pt, Rightarrow, from=3-8, to=3]
\end{tikzcd}\]
By assumption, we have $\pi_1\eta=\varphi pb$, therefore the last diagram is actually the identity, and we can conclude that $R'$ is a fibered right adjoint to $pb$.
\end{proof}

The desired category $\Rep_C$ with exponentiable representable morphisms fits the following pullback:
% https://q.uiver.app/#q=WzAsNCxbMCwyLCJcXFJlcF8wIl0sWzIsMiwiUHMoQ29tcCxcXENhdCksIl0sWzIsMCwiUHMoZlxcIUFkaixcXENhdCkiXSxbMCwwLCJcXFJlcF9CIl0sWzAsMSwiViIsMl0sWzIsMSwiaV4qIl0sWzMsMF0sWzMsMl0sWzMsMSwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	{\Rep_C} && {Ps(f\!Adj,\Cat)} \\
	\\
	{\Rep_B} && {Ps(Comp,\Cat),}
	\arrow[from=1-1, to=1-3]
	\arrow[from=1-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
	\arrow["{i^*}", from=1-3, to=3-3]
	\arrow["V"', from=3-1, to=3-3]
\end{tikzcd}\]
where $i$ is the inclusion choosing the triangle with the left adjoint, and $V$ is defined by
$$\C\mapsto\begin{tikzcd}
    \C^{
\rightarrowtriangle\raisebox{4pt}{$\downarrow$}
}\ar[dd, "pb"', ""{name=0, anchor=center, inner sep=0}]\ar[dr] &\\
&\C^{\rightarrowtriangle}.\\
\C^{
\raisebox{4pt}{$\downarrow$}\rightarrowtriangle
}\ar[ur] & 
\arrow[from=0, to=2-2, draw=none, "="{anchor=center}]
\end{tikzcd}$$
We already know that $i^*$ is an isofibration in $\wLP$. Moreover, $V$ is in $\wLP$ as all its components can be constructed using finite limits of functors that are in $\wLP$; details are the same as in \ref{V wlp}. We conclude that $\Rep_C$ is in $\wLP$.
\subsection{Stage 8: $\Rep$}
Finally, we add together all the built structure, and obtain the category of interest $\Rep$:
% https://q.uiver.app/#q=WzAsNCxbMCwyLCJcXFJlcF9BIl0sWzIsMiwiXFxSZXBfMCJdLFsyLDAsIlxcUmVwX0IiXSxbMCwwLCJcXFJlcCJdLFswLDFdLFszLDBdLFszLDJdLFszLDEsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFsyLDFdXQ==
\[\begin{tikzcd}
	\Rep && {\Rep_C} \\
	\\
	{\Rep_A} && {\Rep_0.}
	\arrow[from=1-1, to=1-3]
	\arrow[from=1-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
	\arrow[from=1-3, to=3-3]
	\arrow[from=3-1, to=3-3]
\end{tikzcd}\]
\begin{thm}\label{rep is perfect}
    The 2-category $\Rep$ is in $\wLP$.
\end{thm}
\begin{proof}
    All the objects and morphisms in the defining cospan are morphisms in $\wLP$. As both functors are pullbacks of isofibrations, they are isofibrations as well. Therefore, the pullback is a bipullback. The result then follows from \ref{lp}.
\end{proof}
This theorem has very useful consequences:
\begin{cor}\label{rep colims}
    The 2-category $\Rep$ has all bicolimits.
\end{cor}
\begin{proof}
    From Theorem \ref{rep is perfect}, we know that $\Rep$ is an accessible 2-category with flexible limits. This is sufficient for $\Rep$ to have all bicolimits as is explained in \cite[Section 9.3]{BOURKE2023108812}.
\end{proof}

\begin{cor}\label{biadjoint_exists}
	The forgetful 2-functor $U\colon\Rep\to\Cat_{m,sq}$ has a left biadjoint $F$.
\end{cor}
\begin{proof}
    From \cite[Section 9.3]{BOURKE2023108812}, we know that all morphisms in $\wLP$ have a left biadjoint $F$.
\end{proof}

\begin{rem}
    Let us mention differences with the construction of $\Rep$ in \cite[Section 5.3.2]{taichiThesis}. The first difference is the treatment of squares which is necessary to have the 2-cells that we actually use. 

	Another difference is Section \ref{sec:rep has isos}, where we force that all isomorphisms are representable maps, which is part of the definition of CwR. This is omitted in \cite[Proposition 5.3.3]{taichiThesis}, but seems necessary to us. (One would expect it to follow from `pullback-stability of representable maps', encoded at a later stage, but since the construction uses a single choice of pullback functor, it seems that one needs to force the closure under isomorphisms separately.)
    
The last difference is in Section \ref{sec:rep has exp}. Uemura obtains exponentials along representable maps by adding just a right adjoint and not a fibered right adjoint. In his setting, this is possible by modifying $V$ so that it uses the 1-functor $(-)_g\colon\Cat\to\Cat$ that takes a category and forgets its non-invertible morphisms. Even though this is a 2-functor $(2,1)$-$\Cat\to\Cat$, it cannot be extended to a 2-functor $\Cat\to\Cat$, so it is not applicable in our setting. 
\end{rem}

\chapter{Models of Type Theories}\label{chap:models}
In the previous chapter, we proved that we can construct CwRs in various ways:
\begin{enumerate}
    \item we have the pseudofunctor $F\colon\Cat_m\to\Rep$ -- left biadjoint to the forgetful functor $\Rep\to\Cat_m$ (Corollary \ref{biadjoint_exists});
    \item $\Rep$ has all bicolimits (Corollary \ref{rep colims}).
\end{enumerate}
In this chapter, we show that these constructions interact well with the operation of forming models of a CwR. In Section \ref{sec:freemod}, we prove that models of a free CwR $F\T$ are the same as models of the generating marked category $\T$. In Section \ref{sec:colimmod}, we discuss models of bicolimits in terms of models of individual operands. This is then applied in Section \ref{sec:examples}, to construct type theories (CwRs) such that their category of models is a category of natural models with some constructors. Specifically, we construct unit types with $\eta$-law, empty types, and inductive unit types.

We should mention that until Remark \ref{size issues}, we do not distinguish between small and big collections. Remark \ref{size issues} explains why.

\section{Models of Free CwRs}\label{sec:freemod}
Denote $U$ the forgetful 2-functor $U\colon\Rep\to\Cat_m$. The goal of this section is to show that the existence of $F$ -- the left biadjoint to $U$ -- yields an equivalence of categories $Mod_m(\T)\simeq Mod_{\Rep}(F\T)$ (the first one being models of marked categories, whereas the second one being models of $F\T\in\Rep$).

First, we explain how to prove the result if $F$ were a left adjoint. This cannot happen (as proven in Lemma \ref{noadjoint}), but it prepares for the general case of a biadjoint, which is much more technical.

We begin with definitions of categories of models of marked categories. As for CwRs, we automatically consider $\DFib{\C}$ as a marked category such that marked are precisely representable arrows.

\begin{defi}
    Let $\T$ be a marked category and $\C$ an arbitrary category with a terminal object. Then a \emph{model of $\T$ in $\C$} is a functor $M\in\Cat_m(\T, \DFib{\C})$.
\end{defi}

\begin{defi} \label{mod_mark}
Let $\T$ be a marked category. Then $Mod_m(\T)$ -- its \emph{category of models} -- consists of the following:
\begin{itemize}
    \item objects are models;
    \item 1-cell between $M\colon\T\to \DFib{\C}$ and $N\colon\T\to \DFib{D}$ is a terminal object preserving functor $F\colon \C\to \D$ and a natural transformation $\alpha\colon M\Rightarrow F^*N$ satisfying the Beck-Chevalley condition for representable arrows.
\end{itemize}
\end{defi}

\begin{comment}
    
\begin{lemma}
     The definition of 2-cells from the definition \ref{mod_mark} is equivalent to Taichi's definition.
\end{lemma}
\end{comment}

\begin{comment}
    
\begin{rem} %TODO reference
 Uemura defines 2-cells with the additional condition that for every $t\in\T$, we have:
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJNdCJdLFswLDIsIlxcQyJdLFsyLDIsIlxcRCJdLFsyLDAsIk50Il0sWzQsMCwiTXQiXSxbNCwyLCJcXEMiXSxbNiwwLCJOdCJdLFs2LDIsIlxcRCJdLFswLDFdLFsxLDIsIkYiLDAseyJjdXJ2ZSI6LTJ9XSxbMSwyLCJHIiwyLHsiY3VydmUiOjJ9XSxbMywyXSxbMCwzLCJcXGFscGhhX3QiLDAseyJjdXJ2ZSI6LTJ9XSxbNCw1XSxbNCw2LCJcXGFscGhhX3QiLDAseyJjdXJ2ZSI6LTJ9XSxbNiw3XSxbNSw3LCJHIiwyLHsiY3VydmUiOjJ9XSxbNCw2LCJcXGJldGFfdCIsMix7ImN1cnZlIjoyfV0sWzksMTAsIlxcR2FtbWEiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzE0LDE3LCJcXEdhbW1hX3QiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzExLDEzLCI9IiwxLHsic2hvcnRlbiI6eyJzb3VyY2UiOjQwLCJ0YXJnZXQiOjQwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
\[\begin{tikzcd}
	dMt && dNt && dMt && dNt \\
	\\
	\C && \D && \C && \D,
	\arrow[from=1-1, to=3-1]
	\arrow[""{name=0, anchor=center, inner sep=0}, "F", curve={height=-12pt}, from=3-1, to=3-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "G"', curve={height=12pt}, from=3-1, to=3-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, from=1-3, to=3-3]
	\arrow["{\alpha_t}", curve={height=-12pt}, from=1-1, to=1-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, from=1-5, to=3-5]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{\alpha_t}", curve={height=-12pt}, from=1-5, to=1-7]
	\arrow[from=1-7, to=3-7]
	\arrow["G"', curve={height=12pt}, from=3-5, to=3-7]
	\arrow[""{name=5, anchor=center, inner sep=0}, "{\beta_t}"', curve={height=12pt}, from=1-5, to=1-7]
	\arrow["\Gamma", shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
	\arrow["{\Gamma_t}", shorten <=3pt, shorten >=3pt, Rightarrow, from=4, to=5]
	\arrow["{=}"{description}, draw=none, from=2, to=3]
\end{tikzcd}\]
    where $\Gamma_t$ is the unique transformation induced by $\Gamma$ satisfying this equation.

    However, as for every $\Gamma$ and $t$ there always exists a unique $\Gamma_t$ satisfying the previous equation, it seemed reasonable not to add it inside the definition \ref{mod_mark}.
    
    Let us explain the definition of $\Gamma_t$. Any such a natural transformation can be decomposed as 
    % https://q.uiver.app/#q=WzAsNixbMCwwLCJkTXQiXSxbMiwwLCJkTnQiXSxbMywwLCI9Il0sWzQsMCwiZE10Il0sWzUsMCwiZE50XntcXG1hdGhiYnsyfX0iXSxbNiwwLCJkTnQiXSxbMCwxLCJcXGFscGhhX3QiLDAseyJjdXJ2ZSI6LTJ9XSxbMCwxLCJcXGJldGFfdCIsMix7ImN1cnZlIjoyfV0sWzMsNCwiXFxvdmVybGluZXtcXEdhbW1hX3R9Il0sWzQsNSwiZCIsMCx7ImN1cnZlIjotMn1dLFs0LDUsImMiLDIseyJjdXJ2ZSI6Mn1dLFs2LDcsIlxcR2FtbWFfdCIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XSxbOSwxMCwiIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	dMt && dNt & {=} & dMt & {dNt^{\mathbb{2}}} & dNt.
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\alpha_t}", curve={height=-12pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\beta_t}"', curve={height=12pt}, from=1-1, to=1-3]
	\arrow["{\overline{\Gamma_t}}", from=1-5, to=1-6]
	\arrow[""{name=2, anchor=center, inner sep=0}, "d", curve={height=-12pt}, from=1-6, to=1-7]
	\arrow[""{name=3, anchor=center, inner sep=0}, "c"', curve={height=12pt}, from=1-6, to=1-7]
	\arrow["{\Gamma_t}", shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
	\arrow["ar", shorten <=3pt, shorten >=3pt, Rightarrow, from=2, to=3]
\end{tikzcd}\]
    As $Nt\colon dNt\to \D$ is a discrete fibration, we know that 
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJkTnRee1xcbWF0aGJiezJ9fSJdLFsyLDEsImROVCJdLFsyLDMsIlxcRCJdLFswLDEsImMiXSxbMSwyLCJOdCJdLFswLDIsIk50XFxjZG90IGQiLDJdLFs1LDEsIk50XFwsIGFyIiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwfX1dXQ==
\[\begin{tikzcd}
	{dNt^{\mathbb{2}}} \\
	&& dNT \\
	\\
	&& \D
	\arrow["c", from=1-1, to=2-3]
	\arrow["Nt", from=2-3, to=4-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{Nt\cdot d}"', from=1-1, to=4-3]
	\arrow["{Nt\cdot ar}"', shorten <=4pt, Rightarrow, from=0, to=2-3]
\end{tikzcd}\]
    is the limiting cone. Hence, to give $\overline{\Gamma_t}$, it suffices to give functors $F_1\colon dMt\to dNt$ and $F_2\colon dMt\to\D$ together with a natural transformation $F_2\Rightarrow Nt\cdot F_1$. This can be easily done using the data that we already have (we are using the fact that $Nt\cdot\beta_t=G\cdot Mt$):
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJkTnRee1xcbWF0aGJiezJ9fSJdLFsyLDEsImROVCJdLFsyLDMsIlxcRCJdLFs0LDAsImRNdCJdLFswLDEsImMiXSxbMSwyLCJOdCJdLFswLDIsIk50XFxjZG90IGQiLDJdLFszLDEsIlxcYmV0YV90IiwyXSxbMywyLCJGXFxjZG90IE10Il0sWzMsMCwiXFxvdmVybGluZXtcXEdhbW1hX3R9IiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzYsMSwiTnRcXCxhciIsMix7InNob3J0ZW4iOnsic291cmNlIjoyMH19XSxbOCwxLCJcXEdhbW1hX3tNdH0iLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjB9fV1d
\[\begin{tikzcd}
	{dNt^{\mathbb{2}}} &&&& dMt \\
	&& dNT \\
	\\
	&& \D
	\arrow["c", from=1-1, to=2-3]
	\arrow["Nt", from=2-3, to=4-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{Nt\cdot d}"', from=1-1, to=4-3]
	\arrow["{\beta_t}"', from=1-5, to=2-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{F\cdot Mt}", from=1-5, to=4-3]
	\arrow["{\overline{\Gamma_t}}"', dashed, from=1-5, to=1-1]
	\arrow["{Nt\cdot ar}"', shorten <=4pt, Rightarrow, from=0, to=2-3]
	\arrow["{\Gamma_{Mt}}"', shorten <=4pt, Rightarrow, from=1, to=2-3]
\end{tikzcd}\]
    By the definition of $\overline{\Gamma_t}$, we now have 
    $$Nt\cdot ar\cdot\overline{\Gamma_t}=\Gamma_{Mt},$$
    which is exactly the required equation.
\end{rem}
\end{comment}

Given all the definitions, we can now state the desired theorem:
\begin{thm}\label{modismod}
    Assume $F\colon \Cat_m\to\Rep$ is a left 2-adjoint to $U$ and $\T\in\Cat_m$. Then $Mod_m(\T)\simeq Mod_{\Rep}(F\T)$.
\end{thm}
The first approach to the proof might be the following: Assume $(G,\alpha)\colon M\to N$ is a morphism of models in $Mod_{\Rep}(F\T)$:
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXFQiXSxbMiwwLCJcXERGaWJ7Q30iXSxbMiwyLCJcXERGaWJ7RH0iXSxbMCwxLCJNIl0sWzAsMiwiTiIsMl0sWzIsMSwiRl4qIiwyXSxbMywyLCJcXGFscGhhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	F\T && {\DFib{\C}} \\
	\\
	&& {\DFib{D}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "M", from=1-1, to=1-3]
	\arrow["N"', from=1-1, to=3-3]
	\arrow["{G^*}"', from=3-3, to=1-3]
	\arrow["\alpha", shorten <=9pt, shorten >=9pt, Rightarrow, from=0, to=3-3]
\end{tikzcd}\]
Now, applying $U$ and precomposing with $\eta_\T$ yields a morphism of models in $Mod_m(\T)$:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXFQiXSxbMSwwLCJVRlxcVCJdLFsyLDAsIlVcXERGaWJ7Q30iXSxbMiwxLCJVXFxERmlie0R9Il0sWzAsMSwiXFxldGFfXFxUIl0sWzEsMiwiVU0iXSxbMSwzLCJVTiIsMl0sWzMsMiwiVUdeKiIsMl0sWzUsMywiVVxcYWxwaGEiLDAseyJsYWJlbF9wb3NpdGlvbiI6NjAsInNob3J0ZW4iOnsic291cmNlIjoyMH19XV0=
\[\begin{tikzcd}
	\T & UF\T & {U\DFib{\C}} \\
	&& {U\DFib{D}}
	\arrow["{\eta_\T}", from=1-1, to=1-2]
	\arrow[""{name=0, anchor=center, inner sep=0}, "UM", from=1-2, to=1-3]
	\arrow["UN"', from=1-2, to=2-3]
	\arrow["{UG^*}"', from=2-3, to=1-3]
	\arrow["U\alpha"{pos=0.6}, shorten <=5pt, Rightarrow, from=0, to=2-3]
\end{tikzcd}\]
It is easily seen that this mapping is functorial and as $F\dashv U$ is a 2-adjunction, we obtained even an isomorphism of categories. However, this approach is not applicable as $G^*$ and $\alpha$ are not, in general, members of $\Rep$ (see Example \ref{notamorphism})! Therefore, it does not make sense to write $U\alpha$ and $UG^*$. We solve this issue by transferring morphisms of models into the category $\Rep$ via lax limits of arrows. The following description slightly differs from the one in Example \ref{ex:limits}, but is a bit more convenient for our purposes, and is easily seen to be equivalent:

\begin{defi}
    Let $F\colon\C\to\D$ be a morphism of categories with terminal object. Then we define a category $\mathbf{DFib}^{\to}_F$ as follows:
    \begin{itemize}
        \item objects are commuting squares
        \[
        \begin{tikzcd}
            \mathcal{A}\ar[r, "G"]\ar[d, "{p_{\mathcal A}}"]&\mathcal{B}\ar[d, "{p_{\mathcal B}}"]\\
            \C\ar[r, "F"]&\D
        \end{tikzcd}
        \]
        such that $p_{\A}, p_{\B}$ are discrete fibrations;
        \item a morphism from $(p_\A, p_\B, G)\to (p_{\A'}, p_{\B'}, G') $ is a commuting square
        \[
        \begin{tikzcd}
            \A\ar[r, "G"]\ar[d, "f"] &\B\ar[d, "g"]\\
            \A'\ar[r, "G'"] &\B'
        \end{tikzcd}
        \]
        such that $f$ and $g$ are morphisms of discrete fibrations over $\C$ and $\D$ respectively.
    \end{itemize}
    We say that a morphism $(f,g)\colon(p_\A, p_\B, G)\to (p_{\A'}, p_{\B'}, G')$ is \emph{representable} if both $f$ and $g$ are representable, and the square above satisfies the Beck-Chevalley condition.
    
    Moreover, we define $\mathbf{dom}\colon{{\DFib{}}^{\to}_F}\to\DFib{\C}$ and $\mathbf{cod}\colon{{\DFib{}}^{\to}_F}\to\DFib{\D}$ as the `first' and `second' projections respectively. 

    Finally, we denote by $ar\colon\mathbf{dom}\Rightarrow F^*\cdot\mathbf{cod}$ the natural transformation whose component at $(p_\A, p_\B, G)$ is the functor $(p_{\A}, G)\colon\A\to F^*\B$ that we obtain from the universal property of pullbacks.
\end{defi}

\begin{lemma}
    For any terminal object preserving functor $F\colon\C\to\D$, the category ${{\DFib{}}^{\to}_F}$ is a CwR. 
\end{lemma}
\begin{proof}
Let us start with proving that ${{\DFib{}}^{\to}_F}$ is finitely complete. ${{\DFib{}}^{\to}_F}$ (as an ordinary category) is a lax limit of the diagram 
\[
\begin{tikzcd}
    \DFib{\D}\ar[r, "{F^*}"]&\DFib{\C},
\end{tikzcd}
\]
$F^*$ is a functor preserving finite limits. From Subsection \ref{stage:lex}, we know that $\Lex$ has flexible limits, and these are computed in $\Cat$. Since lax limits of arrows are flexible limits \cite[Proposition 2.1]{BIRD19891}, we see that $\Lex$ is closed under lax limits of arrows in $\Cat$; ${\DFib{}}^{\to}_F$ is thus a lex category.

It remains to check that representable morphisms are stable under pullbacks and that they are exponentiable. Both claims are proved in \cite[Section 4.3]{Uemura_2023}.
\end{proof}


\begin{lemma}\label{domcod work}
    The functors $\mathbf{dom}$ and $\mathbf{cod}$ are morphisms of CwRs.
\end{lemma}
\begin{proof}
This follows from \cite[Corollary 4.19]{Uemura_2023}.
\end{proof}

\begin{prop}\label{dfibar}
    The category ${{\DFib{}}^{\to}_F}$ together with $ar\colon\mathbf{dom}\Rightarrow\mathbf{cod}$ form the universal CwR equipped with a lax cone over
    \[
\begin{tikzcd}
    \DFib{\D}\ar[r, "{F^*}"]&\DFib{\C},
\end{tikzcd}
\] such that its projections are representable map functors, and the cone satisfies the Beck-Chevalley condition for representable arrows.
\end{prop}
\begin{proof}
Assume, we have another lax cone satisfying the Beck-Chevalley condition (a morphism of models):
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXFQiXSxbMiwwLCJcXERGaWJ7XFxDfSJdLFsyLDIsIlxcREZpYntcXER9LiJdLFswLDEsIk0iXSxbMiwxLCJGXioiLDJdLFswLDIsIk4iLDJdLFszLDIsIlxcYWxwaGEiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV1d
\[\begin{tikzcd}
	\T && {\DFib{\C}} \\
	\\
	&& {\DFib{\D}.}
	\arrow[""{name=0, anchor=center, inner sep=0}, "M", from=1-1, to=1-3]
	\arrow["N"', from=1-1, to=3-3]
	\arrow["{F^*}"', from=3-3, to=1-3]
	\arrow["\alpha", shorten <=10pt, shorten >=10pt, Rightarrow, from=0, to=3-3]
\end{tikzcd}\]
Since ${{\DFib{}}^{\to}_F}$ is a lax limit in $\Lex$, we have a unique lex morphism $G\colon\T\to{{\DFib{}}^{\to}_F}$ such that $arG=\alpha$. Moreover, we have an explicit description for $G$ (coming from $\Cat$):
% https://q.uiver.app/#q=WzAsNixbMCwxXSxbMSwxLCJcXEMiXSxbMSwwLCJkTXQiXSxbMywxLCJcXEQuIl0sWzIsMCwiRl4qZE50Il0sWzMsMCwiZE50Il0sWzIsMSwiTXQiLDJdLFsxLDMsIkYiLDJdLFsyLDQsIlxcYWxwaGFfdCJdLFs1LDMsIk50Il0sWzQsMSwiRl4qTnQiLDAseyJsYWJlbF9wb3NpdGlvbiI6MzB9XSxbNCw1LCJcXHBpIl1d
\[t\mapsto\begin{tikzcd}
	& dMt & {F^*dNt} & dNt \\
	{} & \C && {\D.}
	\arrow["{\alpha_t}", from=1-2, to=1-3]
	\arrow["Mt"', from=1-2, to=2-2]
	\arrow["\pi", from=1-3, to=1-4]
	\arrow["{F^*Nt}"{pos=0.3}, from=1-3, to=2-2]
	\arrow["Nt", from=1-4, to=2-4]
	\arrow["F"', from=2-2, to=2-4]
\end{tikzcd}\]
Using the explicit description and the fact that exponentials in ${{\DFib{}}^{\to}_F}$ are computed pointwise (which follows from Lemma \ref{domcod work}), we see that this functor also preserves representable arrows and exponentials along representable morphisms.
\end{proof}
\begin{nota}
    Let $F\colon\C\to\D$ be a terminal object preserving functor and assume we have a morphism of models $\alpha\colon M\Rightarrow F^*\cdot N\colon\T\to\DFib{\C}$. Then we denote $\overline{\alpha}\colon\T\to{\DFib{}}^{\to}_F$ the unique arrow such that $ar\overline{\alpha}=\alpha$. 
\end{nota}
\begin{lemma}\label{barcomp}
    Let $G\colon\A\to\T$ be a morphism of CwRs, and $\alpha\colon M\Rightarrow F^*\cdot N\colon\T\to\DFib{\C}$ a morphism of models. Then $\alpha G\colon MG\Rightarrow F^*\cdot NG$ is a morphism of models and $\overline{\alpha G}=\overline{\alpha}G$.
\end{lemma}
\begin{proof}
To prove that $\alpha G$ is a morphism of models, we need to check that the Beck-Chevalley condition for representable morphisms hold. This is trivial as $G$ preserves representable arrows, and $\alpha$ satisfies the Beck-Chevalley condition.

The equality $\overline{\alpha G}=\overline{\alpha}G$ is clear as both sides give $\alpha G$ after postcomposing with $ar$.
\end{proof}
\begin{rem}\label{dfibarm}
Since the construction of ${{\DFib{}}^{\to}_F}$ does not interact with structure of $\Rep$ that is not present in $\Cat_m$ (limits, exponentials along representable arrows), an analogous statements to Proposition \ref{dfibar} and Lemma \ref{barcomp} work also for marked categories, and we will use them for these.
\end{rem}

\begin{proof}[Proof of Theorem \ref{modismod}]
Let $\eta$ be the unit of the adjunction. From the adjunction, we have an isomorphism of categories for any $\C$:
    $$U(-)\eta_\T\colon\Rep(F\T, \DFib{\C})\cong \Cat_m(\T, U\DFib{\C})\colon(-)^\#$$
given just by precomposition with $\eta_\T$ in one direction.

We show that the functor given by precomposition with the unit:
\begin{align*}
    -\cdot\eta_{\T}\colon Mod_{\Rep}(F\T)\;&\to\;Mod_{m}(\T)\\
    M\colon F\T\to\DFib{\C}\;&\mapsto\; M\cdot\eta_{\T}
\end{align*}
is an equivalence of categories. It is clearly essentially surjective (actually, it yields a bijection between objects of $Mod_{\Rep}(F\T)$ and $Mod_m(\T)$). To obtain the equivalence, it suffices to prove that this is a fully faithful functor.

Assume that $(G,\alpha)\colon UM\eta_\T\to UN\eta_\T\in Mod_m(\T)$ is a morphism of models:
\[\begin{tikzcd}
	\T && {U\DFib{\C}} \\
	\\
	&& {U\DFib{\D}}.
	\arrow[""{name=0, anchor=center, inner sep=0}, "UM\eta_\T", from=1-1, to=1-3]
	\arrow["UN\eta_\T"', from=1-1, to=3-3]
	\arrow["{G^*}"', from=3-3, to=1-3]
	\arrow["\alpha", shorten <=9pt, shorten >=9pt, Rightarrow, from=0, to=3-3]
\end{tikzcd}\]
Then for a $(G,\beta)\colon M\to N\in Mod_{\Rep}(F\T)$, we have
\begin{align*}
            \beta\eta_\T=\alpha &\iff ar\overline{\beta\eta_\T}=ar\overline{\alpha}\qquad\text{(corresponding sides are equal)} \\
                                    &\iff \overline{\beta\eta_\T}=\overline{\alpha}\qquad\text{(by the universal property of }{\DFib{}}^{\to}_G)\\
                                    &\iff U\overline{\beta}\eta_\T=\overline{\alpha}\qquad\text{(by Lemma \ref{barcomp})}\\
                                    &\iff \overline{\beta}=\overline{\alpha}^\#\qquad\text{(applying $(-)^\#$ is a bijection)}\\
                                    &\iff ar\overline{\beta}=ar\overline{\alpha}^\#\qquad\text{(by the universal property of }{\DFib{}}^{\to}_G)\\
                                    &\iff \beta = ar\overline{\alpha}^\#.
\end{align*}
Therefore, applying $-\cdot\eta_\T$ yields a bijection on hom-sets and we indeed obtained an equivalence of categories.
\end{proof}
As indicated in the beginning of this section, this theorem does not help us because we actually have the following:
\begin{lemma}\label{noadjoint}
    The 2-functor $U$ does not have a left 2-adjoint.
\end{lemma}
\begin{proof}
    Suppose $F$ is such an adjoint for a contradiction. As $\emptyset$ is the initial marked category, we see that $F\emptyset$ is an initial object of $\Rep$.

    Let $I=\{A\cong B\}$ be the category with two objects and a single arrow in each hom-set. Then both $\mathbf{1}$ (the terminal category) and $I$ have finite limits, and if we mark all arrows, they can be viewed as objects in $\Rep$. Clearly, $\mathbf{1}$ is a terminal object also in $\Rep$, and both functors $A,B\colon\mathbf{1}\to I$ are morphisms in $\Rep$. However, as $F\emptyset$ has finite limits, we see that it has at least one (terminal) object $c$. Since $A!c\neq B!c$, we obtain that $A!\neq B!\in \Rep (F\emptyset, I)$. This is a contradiction with the existence of $F$.
\end{proof}
Luckily, to obtain the equivalence $Mod_m(\T)\simeq Mod_{\Rep}(F\T)$, we do not need the whole adjunction. Before finally proving the equivalence, let us prove two lemmas:

\begin{lemma}\label{isosBC}
    Let $\T$ be a representable map category and $\alpha\colon M\cong N\colon\T\to\DFib{\C}$ a natural isomorphism between representable map functors. Then $(\alpha, 1_\DFib{\C})$ is a morphism $M\to N$ in $Mod_\Rep$.
\end{lemma}
\begin{proof}
    We just need to check that the Beck-Chevalley condition holds. Let $r\colon t\to t'$ be a representable arrow in $\T$. By abusing notation and identifying a discrete fibration with its domain, we obtain the diagram
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJNdCJdLFsyLDAsIk50Il0sWzAsMiwiTXQnIl0sWzIsMiwiTnQnIl0sWzAsMSwiXFxhbHBoYV90Il0sWzAsMiwiTXIiLDJdLFsyLDMsIlxcYWxwaGFfe3QnfSIsMl0sWzEsMywiTnIiLDJdLFsyLDAsIk1yJyIsMix7ImN1cnZlIjoyfV0sWzMsMSwiTnInIiwyLHsiY3VydmUiOjJ9XSxbNSw4LCIiLDIseyJsZXZlbCI6MSwic3R5bGUiOnsibmFtZSI6ImFkanVuY3Rpb24ifX1dLFs3LDksIiIsMix7ImxldmVsIjoxLCJzdHlsZSI6eyJuYW1lIjoiYWRqdW5jdGlvbiJ9fV1d
\[\begin{tikzcd}
	Mt && Nt \\
	\\
	{Mt'} && {Nt',}
	\arrow["{\alpha_t}", from=1-1, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "Mr"', from=1-1, to=3-1]
	\arrow["{\alpha_{t'}}"', from=3-1, to=3-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "Nr"', from=1-3, to=3-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{Mr'}"', curve={height=12pt}, from=3-1, to=1-1]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{Nr'}"', curve={height=12pt}, from=3-3, to=1-3]
	\arrow["\dashv"{anchor=center}, draw=none, from=0, to=2]
	\arrow["\dashv"{anchor=center}, draw=none, from=1, to=3]
\end{tikzcd}\]
where the left square commutes. Let $\eta_M,\epsilon_M,\eta_N,\epsilon_N$ be the unit and counit respectively of the adjunctions $Mr\dashv Mr'$ and $Nr\dashv Nr'$. We need to prove that the following 2-cell is an isomorphism:
% https://q.uiver.app/#q=WzAsNixbMiwwLCJNdCJdLFs0LDAsIk50Il0sWzIsMiwiTXQnIl0sWzQsMiwiTnQnIl0sWzAsMiwiTXQnIl0sWzYsMCwiTnQiXSxbMCwxLCJcXGFscGhhX3QiXSxbMCwyLCJNciJdLFsyLDMsIlxcYWxwaGFfe3QnfSIsMl0sWzEsMywiTnIiLDJdLFs0LDAsIk1yJyJdLFs0LDIsIiIsMix7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsNSwiIiwyLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMyw1LCJOciciLDJdLFswLDExLCJcXGVwc2lsb25fTSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XSxbMTIsMywiXFxldGFfTiIsMix7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	&& Mt && Nt && Nt \\
	\\
	{Mt'} && {Mt'} && {Nt'.}
	\arrow["{\alpha_t}", from=1-3, to=1-5]
	\arrow["Mr", from=1-3, to=3-3]
	\arrow["{\alpha_{t'}}"', from=3-3, to=3-5]
	\arrow["Nr"', from=1-5, to=3-5]
	\arrow["{Mr'}", from=3-1, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, Rightarrow, no head, from=3-1, to=3-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, Rightarrow, no head, from=1-5, to=1-7]
	\arrow["{Nr'}"', from=3-5, to=1-7]
	\arrow["{\epsilon_M}", shorten <=9pt, shorten >=9pt, Rightarrow, from=1-3, to=0]
	\arrow["{\eta_N}"', shorten <=9pt, shorten >=9pt, Rightarrow, from=1, to=3-5]
\end{tikzcd}\]
One can easily check (using the triangle identities) that the following 2-cell serves as its inverse:
% https://q.uiver.app/#q=WzAsOCxbMCwyLCJNdCciXSxbMiwyLCJOdCciXSxbNCwwLCJOdCJdLFs0LDIsIk50JyJdLFs2LDAsIk10Il0sWzYsMiwiTXQnIl0sWzgsMCwiTXQiXSxbMTAsMCwiTnQiXSxbMCwxLCJcXGFscGhhX3t0J30iLDJdLFsxLDIsIk5yJyJdLFsxLDMsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzIsMywiTnIiXSxbMiw0LCJcXGFscGhhX3Reey0xfSIsMl0sWzMsNSwiXFxhbHBoYV97dCd9XnstMX0iLDJdLFs0LDUsIk1yIiwyXSxbNCw2LCIiLDIseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs1LDYsIk1yJyIsMl0sWzYsNywiXFxhbHBoYV90IiwyXSxbMiwxMCwiXFxlcHNpbG9uX04iLDIseyJsYWJlbF9wb3NpdGlvbiI6NjAsInNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XSxbMTUsNSwiXFxldGFfTSIsMix7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	&&&& Nt && Mt && Mt && Nt \\
	\\
	{Mt'} && {Nt'} && {Nt'} && {Mt'.}
	\arrow["{\alpha_{t'}}"', from=3-1, to=3-3]
	\arrow["{Nr'}", from=3-3, to=1-5]
	\arrow[""{name=0, anchor=center, inner sep=0}, Rightarrow, no head, from=3-3, to=3-5]
	\arrow["Nr", from=1-5, to=3-5]
	\arrow["{\alpha_t^{-1}}"', from=1-5, to=1-7]
	\arrow["{\alpha_{t'}^{-1}}"', from=3-5, to=3-7]
	\arrow["Mr"', from=1-7, to=3-7]
	\arrow[""{name=1, anchor=center, inner sep=0}, Rightarrow, no head, from=1-7, to=1-9]
	\arrow["{Mr'}"', from=3-7, to=1-9]
	\arrow["{\alpha_t}"', from=1-9, to=1-11]
	\arrow["{\epsilon_N}"'{pos=0.6}, shorten <=9pt, shorten >=9pt, Rightarrow, from=1-5, to=0]
	\arrow["{\eta_M}"', shorten <=9pt, shorten >=9pt, Rightarrow, from=1, to=3-7]
\end{tikzcd}\]
\end{proof}

\begin{lemma}\label{dcdisiso}
    Let $G\colon\C\to\D$ be a terminal object preserving functor. Then the functor $(\mathbf{dom},\mathbf{cod})\colon\DFib{}^\to_G\to\DFib{\C}\times\DFib{D}$ is a discrete isofibration in the 2-category $\Rep$.
\end{lemma}
\begin{proof}
We can mimic the proof of \cite[Proposition 5.2]{BOURKE2021106519}.
\end{proof}
\begin{rem}
    As we do not interact with limits or exponentials along morphisms, both lemmas hold also in $\Cat_m$.
\end{rem}
\begin{thm}\label{bimodismod}
    Assume $F\colon \Cat_m\to\Rep$ is a left biadjoint to $U$ and $\T\in\Cat_m$. Then $Mod_m(\T)\simeq Mod_{\Rep}(F\T)$.
\end{thm}
\begin{proof}
    The idea of the proof is still the same; however, the details are more difficult:
    We consider $\eta$ the unit of the biadjunction. From the biadjunction, we have an equivalence of categories for any $\C\in\Rep$:
    $$U(-)\cdot\eta_{\T}\colon\Rep(F\T, \C)\simeq \Cat_m(\T, U\C)\colon(-)^\#.$$
We show that the functor given by precomposition with the unit:
\begin{align*}
    U(-)\cdot\eta_{\T}\colon Mod_{\Rep}(F\T)\;&\to\;Mod_{m}(\T)\\
    M\colon F\T\to\DFib{\C}\;&\mapsto\; UM\cdot\eta_{\T}
\end{align*}
is an equivalence of categories.

Essential surjectivity holds as $U(-)\cdot\eta_{\T}$ is essentially surjective and by Lemma \ref{isosBC}. Let us prove fullness: Assume that $(G,\alpha)\colon UM\eta_\T\to UN\eta_\T$ is a morphism of models:
\[\begin{tikzcd}
	\T && {U\DFib{\C}} \\
	\\
	&& {U\DFib{D}}.
	\arrow[""{name=0, anchor=center, inner sep=0}, "UM\eta_\T", from=1-1, to=1-3]
	\arrow["UN\eta_\T"', from=1-1, to=3-3]
	\arrow["{G^*}"', from=3-3, to=1-3]
	\arrow["\alpha", shorten <=9pt, shorten >=9pt, Rightarrow, from=0, to=3-3]
\end{tikzcd}\]
This yields a morphism $\overline{\alpha}^\#\colon F\T\to{\DFib{}}^{\to}_G$. However, as $(-)^\#$ is just an equivalence, we do not know that $arU\overline{\alpha}^\#\eta_\T$ is $\alpha$, so the method from the previous proof does not work. Moreover, we do not even have that $\mathbf{dom}\overline{\alpha}^\#=M$, so the candidate morphism of models does not have to have the right domain (neither codomain). We start looking for the preimage of $\alpha$ by fixing this issue of incorrect (co)domain of $arU\overline{\alpha}^\#\eta_\T$. Let us denote $\Omega\colon\overline{\alpha}\cong U\overline{\alpha}^\#\eta_\T$ the isomorphism from the equivalence $\Rep(F\T, {\DFib{}}^{\to}_G)\simeq \Cat_m(\T, U{\DFib{}}^{\to}_G).$ This gives us a natural isomorphism:
% https://q.uiver.app/#q=WzAsNSxbMCwxLCJcXFQiXSxbMiwwLCJVRlxcVCJdLFs0LDEsIlV7XFxERmlie319XntcXHRvfV9HIl0sWzQsMywiVVxcREZpYntDfSJdLFsxLDIsIlVGXFxUIl0sWzAsMSwiXFxldGFfXFxUIl0sWzEsMiwiVVxcb3ZlcmxpbmV7XFxhbHBoYX1eXFwjIl0sWzAsMiwiXFxvdmVybGluZXtcXGFscGhhfSIsMix7ImN1cnZlIjoxfV0sWzIsMywiVVxcbWF0aGJme2RvbX0iLDJdLFswLDQsIlxcZXRhX1xcVCIsMl0sWzQsMywiVU0iLDJdLFs3LDEsIlxcT21lZ2EiLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjB9LCJlZGdlX2FsaWdubWVudCI6eyJzb3VyY2UiOmZhbHNlfX1dLFsxMCwyLCI9IiwwLHsibGFiZWxfcG9zaXRpb24iOjMwLCJzaG9ydGVuIjp7InNvdXJjZSI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
\[\begin{tikzcd}
	&& UF\T \\
	\T &&&& {U{\DFib{}}^{\to}_G} \\
	& UF\T \\
	&&&& {U(\DFib{\C}\times\DFib{\C}).}
	\arrow["{\eta_\T}", from=2-1, to=1-3]
	\arrow["{U\overline{\alpha}^\#}", from=1-3, to=2-5]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\overline{\alpha}}"', curve={height=6pt}, from=2-1, to=2-5]
	\arrow[""{name=0p, anchor=center, inner sep=0}, phantom, from=2-1, to=2-5, start anchor=center, end anchor=center, curve={height=6pt}]
	\arrow["{U(\mathbf{dom},\mathbf{cod})}", from=2-5, to=4-5]
	\arrow["{\eta_\T}"', from=2-1, to=3-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{U(M,N)}"', from=3-2, to=4-5]
	\arrow["\Omega"', shorten <=4pt, Rightarrow, from=0p, to=1-3]
	\arrow["{=}"{pos=0.3}, draw=none, from=1, to=2-5]
\end{tikzcd}\]
Let us denote this isomorphism $\sigma$:
% https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXFQiXSxbMiwwLCJVRlxcVCJdLFs0LDAsIlV7XFxERmlie319XntcXHRvfV9HIl0sWzQsMiwiVVxcREZpYntDfVxcdGltZXMgVVxcREZpYntEfSJdLFsxLDIsIlVGXFxUIl0sWzAsMSwiXFxldGFfXFxUIl0sWzEsMiwiVVxcb3ZlcmxpbmV7XFxhbHBoYX1eXFwjIl0sWzIsMywiKFVcXG1hdGhiZntkb219LCBVXFxtYXRoYmZ7Y29kfSkiXSxbMCw0LCJcXGV0YV9cXFQiLDJdLFs0LDMsIihVTSwgVU4pIiwyXSxbNCwyLCJcXHNpZ21hIiwwLHsic2hvcnRlbiI6eyJ0YXJnZXQiOjIwfSwibGV2ZWwiOjJ9XV0=
\[\begin{tikzcd}
	\T && UF\T && {U{\DFib{}}^{\to}_G} \\
	\\
	& UF\T &&& {U(\DFib{\C}\times \DFib{D}).}
	\arrow["{\eta_\T}", from=1-1, to=1-3]
	\arrow["{U\overline{\alpha}^\#}", from=1-3, to=1-5]
	\arrow["{U(\mathbf{dom}, \mathbf{cod})}", from=1-5, to=3-5]
	\arrow["{\eta_\T}"', from=1-1, to=3-2]
	\arrow["{U(M, N)}"', from=3-2, to=3-5]
	\arrow["\sigma", shorten >=21pt, Rightarrow, from=3-2, to=1-5]
\end{tikzcd}\]

Since $U(-)\eta_\T$ is a fully-faithful functor (as a part of an equivalence), we know that there is a natural isomorphism 
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJGXFxUIl0sWzIsMCwie1xcREZpYnt9fV57XFx0b31fRyJdLFsyLDIsIlxcREZpYntDfVxcdGltZXMgXFxERmlie0R9Il0sWzAsMSwiXFxvdmVybGluZXtcXGFscGhhfV5cXCMiXSxbMSwyLCIoXFxtYXRoYmZ7ZG9tfSwgXFxtYXRoYmZ7Y29kfSkiXSxbMCwyLCIoTSwgTikiLDJdLFs1LDEsIlxcc2lnbWEnIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwfX1dXQ==
\[\begin{tikzcd}
	F\T && {{\DFib{}}^{\to}_G} \\
	\\
	&& {\DFib{\C}\times \DFib{D}}
	\arrow["{\overline{\alpha}^\#}", from=1-1, to=1-3]
	\arrow["{(\mathbf{dom}, \mathbf{cod})}", from=1-3, to=3-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{(M, N)}"', from=1-1, to=3-3]
	\arrow["{\sigma'}", shorten <=7pt, Rightarrow, from=0, to=1-3]
\end{tikzcd}\]
such that $U(\sigma')\eta_\T=\sigma$. By Lemma \ref{dcdisiso}, $(\mathbf{dom},\mathbf{cod})$ is a discrete isofibration, therefore there is a unique isomorphism $\Gamma\colon\overline{\alpha}^\#\cong\gamma$ such that 
\begin{equation}\label{gammadef}
% https://q.uiver.app/#q=WzAsNixbMCwwLCJGXFxUIl0sWzEsMCwie1xcREZpYnt9fV57XFx0b31fRyJdLFsxLDIsIlxcREZpYntDfVxcdGltZXNcXERGaWJ7RH0iXSxbMiwwLCJGXFxUIl0sWzMsMCwie1xcREZpYnt9fV57XFx0b31fRyJdLFszLDIsIlxcREZpYntDfVxcdGltZXNcXERGaWJ7RH0iXSxbMCwxLCJcXG92ZXJsaW5le1xcYWxwaGF9XlxcIyJdLFsxLDIsIihcXG1hdGhiZntkb219LFxcbWF0aGJme2NvZH0pIl0sWzAsMiwiKE0sIE4pIiwyLHsiY3VydmUiOjJ9XSxbMyw0LCJcXGdhbW1hIiwyLHsiY3VydmUiOjJ9XSxbNCw1LCIoXFxtYXRoYmZ7ZG9tfSxcXG1hdGhiZntjb2R9KSJdLFszLDUsIihNLE4pIiwyLHsiY3VydmUiOjJ9XSxbMyw0LCJcXG92ZXJsaW5le1xcYWxwaGF9XlxcIyIsMCx7ImN1cnZlIjotMn1dLFs5LDUsIj0iLDEseyJzaG9ydGVuIjp7InNvdXJjZSI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTIsOSwiXFxHYW1tYSIsMix7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XSxbNywxMSwiPSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH0sInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxLDgsIlxcc2lnbWEnXnstMX0iLDAseyJzaG9ydGVuIjp7InRhcmdldCI6MjB9fV1d
\begin{tikzcd}
	F\T & {{\DFib{}}^{\to}_G} & F\T & {{\DFib{}}^{\to}_G} \\
	\\
	& {\DFib{\C}\times\DFib{D}} && {\DFib{\C}\times\DFib{D}.}
	\arrow["{\overline{\alpha}^\#}", from=1-1, to=1-2]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{(\mathbf{dom},\mathbf{cod})}", from=1-2, to=3-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{(M, N)}"', curve={height=12pt}, from=1-1, to=3-2]
	\arrow[""{name=2, anchor=center, inner sep=0}, "\gamma"', curve={height=12pt}, from=1-3, to=1-4]
	\arrow["{(\mathbf{dom},\mathbf{cod})}", from=1-4, to=3-4]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{(M,N)}"', curve={height=12pt}, from=1-3, to=3-4]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{\overline{\alpha}^\#}", curve={height=-12pt}, from=1-3, to=1-4]
	\arrow["{=}"{description}, draw=none, from=2, to=3-4]
	\arrow["\Gamma"', shorten <=3pt, shorten >=3pt, Rightarrow, from=4, to=2]
	\arrow["{=}", draw=none, from=0, to=3]
	\arrow["{\sigma'^{-1}}", shorten >=7pt, Rightarrow, from=1-2, to=1]
\end{tikzcd}
\end{equation}

Now, we claim that $ar\gamma\colon M\Rightarrow G^*N$ satisfies that $arU(\gamma)\eta_\T=\alpha$. We show just $U(\gamma)\eta_\T=\overline{\alpha}$, and the required equality then follows by precomposing with $ar$. Using the data that we have defined so far, we can construct a natural isomorphism $\overline{\alpha}\cong U(\gamma)\eta_\T$:
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXFQiXSxbMiwwLCJVRlxcVCJdLFs0LDAsIntcXERGaWJ7fX1ee1xcdG99X0ciXSxbMCwxLCJcXGV0YV9cXFQiXSxbMSwyLCJVXFxvdmVybGluZVxcYWxwaGFcXCMiXSxbMCwyLCJcXG92ZXJsaW5lXFxhbHBoYSIsMCx7ImN1cnZlIjotNX1dLFsxLDIsIlVcXGdhbW1hIiwyLHsiY3VydmUiOjR9XSxbNSwxLCJcXE9tZWdhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwfX1dLFs0LDYsIlVcXEdhbW1hIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	\T && UF\T && {U{\DFib{}}^{\to}_G.}
	\arrow["{\eta_\T}", from=1-1, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{U\overline\alpha\#}", from=1-3, to=1-5]
	\arrow[""{name=1, anchor=center, inner sep=0}, "\overline\alpha", curve={height=-30pt}, from=1-1, to=1-5]
	\arrow[""{name=2, anchor=center, inner sep=0}, "U\gamma"', curve={height=24pt}, from=1-3, to=1-5]
	\arrow["\Omega"{pos=0.3}, shorten <=3pt, Rightarrow, from=1, to=1-3]
	\arrow["U\Gamma"{pos=0.7}, shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=2]
\end{tikzcd}\]
We will show that this isomorphism is actually the identity on $\overline{\alpha}$; this will prove fullness. Since discrete isofibrations reflect identities, it is enough to show that its postcomposition with $U(\mathbf{dom},\mathbf{cod})$ is an identity. Applying $U$ to \ref{gammadef} yields: 
% https://q.uiver.app/#q=WzAsOCxbMCwwLCJcXFQiXSxbMSwwLCJVRlxcVCJdLFsyLDAsIlV7XFxERmlie319XntcXHRvfV9HIl0sWzIsMiwiVShcXERGaWJ7Q31cXHRpbWVzIFxcREZpYntEfSkiXSxbMywwLCJcXFQiXSxbNCwwLCJVRlxcVCJdLFs1LDAsIlV7XFxERmlie319XntcXHRvfV9HIl0sWzUsMiwiVShcXERGaWJ7Q31cXHRpbWVzIFxcREZpYntEfSkiXSxbMCwxLCJcXGV0YV9cXFQiXSxbMSwyLCJVXFxvdmVybGluZVxcYWxwaGFcXCMiXSxbMCwyLCJcXG92ZXJsaW5lXFxhbHBoYSIsMCx7ImN1cnZlIjotNX1dLFsxLDIsIlVcXGdhbW1hIiwyLHsiY3VydmUiOjR9XSxbMiwzLCJVKFxcbWF0aGJme2RvbX0sXFxtYXRoYmZ7Y29kfSkiXSxbMSwzLCJVKE0sIE4pIiwyLHsiY3VydmUiOjN9XSxbNCw1LCJcXGV0YV9cXFQiXSxbNSw2LCJVXFxvdmVybGluZVxcYWxwaGFcXCMiXSxbNiw3LCJVKFxcbWF0aGJme2RvbX0sXFxtYXRoYmZ7Y29kfSkiXSxbNSw3LCJVKE0sTikiLDIseyJjdXJ2ZSI6M31dLFs0LDYsIlxcb3ZlcmxpbmVcXGFscGhhIiwwLHsiY3VydmUiOi01fV0sWzEwLDEsIlxcT21lZ2EiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjB9fV0sWzksMTEsIlVcXEdhbW1hIiwwLHsibGFiZWxfcG9zaXRpb24iOjYwLCJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzEzLDEyLCI9IiwxLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzYsMTcsIlVcXHNpZ21hJ157LTF9IiwwLHsic2hvcnRlbiI6eyJ0YXJnZXQiOjIwfX1dLFsxOCw1LCJcXE9tZWdhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwfX1dLFsxMiwyMiwiPSIsMSx7ImxhYmVsX3Bvc2l0aW9uIjo0MCwic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwibGV2ZWwiOjIsInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==
\[\begin{tikzcd}
	\T & UF\T & {U{\DFib{}}^{\to}_G} & \T & UF\T & {U{\DFib{}}^{\to}_G} \\
	\\
	&& {U(\DFib{\C}\times \DFib{D})} &&& {U(\DFib{\C}\times \DFib{D}).}
	\arrow["{\eta_\T}", from=1-1, to=1-2]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{U\overline\alpha\#}", from=1-2, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "\overline\alpha", curve={height=-30pt}, from=1-1, to=1-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "U\gamma"', curve={height=24pt}, from=1-2, to=1-3]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{U(\mathbf{dom},\mathbf{cod})}", from=1-3, to=3-3]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{U(M, N)}"', curve={height=18pt}, from=1-2, to=3-3]
	\arrow["{\eta_\T}", from=1-4, to=1-5]
	\arrow["{U\overline\alpha\#}", from=1-5, to=1-6]
	\arrow["{U(\mathbf{dom},\mathbf{cod})}", from=1-6, to=3-6]
	\arrow[""{name=5, anchor=center, inner sep=0}, "{U(M,N)}"', curve={height=18pt}, from=1-5, to=3-6]
	\arrow[""{name=6, anchor=center, inner sep=0}, "\overline\alpha", curve={height=-30pt}, from=1-4, to=1-6]
	\arrow["\Omega", shorten <=3pt, Rightarrow, from=1, to=1-2]
	\arrow["U\Gamma"{pos=0.6}, shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=2]
	\arrow["{=}"{description}, draw=none, from=4, to=3]
	\arrow[""{name=7, anchor=center, inner sep=0}, "{U\sigma'^{-1}}", shorten >=8pt, Rightarrow, from=1-6, to=5]
	\arrow["\Omega", shorten <=3pt, Rightarrow, from=6, to=1-5]
	\arrow["{=}"{description, pos=0.4}, draw=none, from=3, to=7]
\end{tikzcd}\]
Since the definition of $\sigma'$, we have:

% https://q.uiver.app/#q=WzAsOSxbMCwwLCJcXFQiXSxbMSwwLCJVRlxcVCJdLFsyLDAsIlV7XFxERmlie319XntcXHRvfV9HIl0sWzIsMiwiVShcXERGaWJ7Q31cXHRpbWVzIFxcREZpYntEfSkiXSxbMywwLCJcXFQiXSxbNCwwLCJVRlxcVCJdLFs1LDAsIlV7XFxERmlie319XntcXHRvfV9HIl0sWzQsMiwiVUZcXFQiXSxbNSwyLCJVKFxcREZpYntDfVxcdGltZXMgXFxERmlie0R9KSJdLFswLDEsIlxcZXRhX1xcVCJdLFsxLDIsIlVcXG92ZXJsaW5lXFxhbHBoYVxcIyJdLFsyLDMsIlUoXFxtYXRoYmZ7ZG9tfSxcXG1hdGhiZntjb2R9KSJdLFsxLDMsIlUoTSwgTikiLDIseyJjdXJ2ZSI6M31dLFswLDIsIlxcb3ZlcmxpbmVcXGFscGhhIiwwLHsiY3VydmUiOi01fV0sWzQsNSwiXFxldGFfXFxUIl0sWzUsNiwiVVxcb3ZlcmxpbmVcXGFscGhhXFwjIl0sWzQsNiwiXFxvdmVybGluZVxcYWxwaGEiLDAseyJjdXJ2ZSI6LTV9XSxbNCw3LCJcXGV0YV9cXFQiLDJdLFs3LDgsIlUoTSwgTikiLDJdLFs2LDgsIlUoXFxtYXRoYmZ7ZG9tfSxcXG1hdGhiZntjb2R9KSJdLFs2LDcsIlxcc2lnbWFeey0xfSIsMix7ImxldmVsIjoyfV0sWzIsMTIsIlVcXHNpZ21hJ157LTF9IiwwLHsic2hvcnRlbiI6eyJ0YXJnZXQiOjIwfX1dLFsxMywxLCJcXE9tZWdhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwfX1dLFsxNiw1LCJcXE9tZWdhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwfX1dLFsxMSwxNywiPSIsMSx7ImxhYmVsX3Bvc2l0aW9uIjo3MCwic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
\[\begin{tikzcd}
	\T & UF\T & {U{\DFib{}}^{\to}_G} & \T & UF\T & {U{\DFib{}}^{\to}_G} \\
	\\
	&& {U(\DFib{\C}\times \DFib{D})} && UF\T & {U(\DFib{\C}\times \DFib{D}).}
	\arrow["{\eta_\T}", from=1-1, to=1-2]
	\arrow["{U\overline\alpha\#}", from=1-2, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{U(\mathbf{dom},\mathbf{cod})}", from=1-3, to=3-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{U(M, N)}"', curve={height=18pt}, from=1-2, to=3-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "\overline\alpha", curve={height=-30pt}, from=1-1, to=1-3]
	\arrow["{\eta_\T}", from=1-4, to=1-5]
	\arrow["{U\overline\alpha\#}", from=1-5, to=1-6]
	\arrow[""{name=3, anchor=center, inner sep=0}, "\overline\alpha", curve={height=-30pt}, from=1-4, to=1-6]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{\eta_\T}"', from=1-4, to=3-5]
	\arrow["{U(M, N)}"', from=3-5, to=3-6]
	\arrow["{U(\mathbf{dom},\mathbf{cod})}", from=1-6, to=3-6]
	\arrow["{\sigma^{-1}}"', Rightarrow, from=1-6, to=3-5]
	\arrow["{U\sigma'^{-1}}", shorten >=8pt, Rightarrow, from=1-3, to=1]
	\arrow["\Omega", shorten <=3pt, Rightarrow, from=2, to=1-2]
	\arrow["\Omega", shorten <=3pt, Rightarrow, from=3, to=1-5]
	\arrow["{=}"{description, pos=0.7}, draw=none, from=0, to=4]
\end{tikzcd}\]
Unpacking the definition of $\sigma$ gives us:
% https://q.uiver.app/#q=WzAsMTAsWzAsMCwiXFxUIl0sWzEsMCwiVUZcXFQiXSxbMiwwLCJVe1xcREZpYnt9fV57XFx0b31fRyJdLFsxLDIsIlVGXFxUIl0sWzIsMiwiVShcXERGaWJ7Q31cXHRpbWVzIFxcREZpYntEfSkiXSxbMywwLCJcXFQiXSxbNCwwLCJVRlxcVCJdLFs1LDAsIlV7XFxERmlie319XntcXHRvfV9HIl0sWzUsMiwiVShcXERGaWJ7Q31cXHRpbWVzIFxcREZpYntEfSkiXSxbNCwyLCJVRlxcVCJdLFswLDEsIlxcZXRhX1xcVCJdLFsxLDIsIlVcXG92ZXJsaW5lXFxhbHBoYVxcIyJdLFswLDIsIlxcb3ZlcmxpbmVcXGFscGhhIiwwLHsiY3VydmUiOi01fV0sWzAsMywiXFxldGFfXFxUIiwyXSxbMyw0LCJVKE0sIE4pIiwyXSxbMiw0LCJVKFxcbWF0aGJme2RvbX0sXFxtYXRoYmZ7Y29kfSkiXSxbMiwzLCJcXHNpZ21hXnstMX0iLDIseyJsZXZlbCI6Mn1dLFs1LDYsIlxcZXRhX1xcVCJdLFs2LDcsIlVcXG92ZXJsaW5lXFxhbHBoYVxcIyJdLFs1LDcsIlxcb3ZlcmxpbmVcXGFscGhhIiwwLHsiY3VydmUiOi01fV0sWzUsNywiXFxvdmVybGluZVxcYWxwaGEiLDIseyJjdXJ2ZSI6NX1dLFs3LDgsIlUoXFxtYXRoYmZ7ZG9tfSxcXG1hdGhiZntjb2R9KSJdLFs1LDksIlxcZXRhX1xcVCIsMl0sWzksOCwiVShNLE4pIiwyXSxbMTIsMSwiXFxPbWVnYSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMH19XSxbMTksNiwiXFxPbWVnYSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMH19XSxbNiwyMCwiXFxPbWVnYV57LTF9IiwyLHsibGFiZWxfcG9zaXRpb24iOjQwLCJzaG9ydGVuIjp7InRhcmdldCI6MjB9fV0sWzE1LDIwLCI9IiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzIyLDIxLCI9IiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
\[\begin{tikzcd}
	\T & UF\T & {U{\DFib{}}^{\to}_G} & \T & UF\T & {U{\DFib{}}^{\to}_G} \\
	\\
	& UF\T & {U(\DFib{\C}\times \DFib{D})} && UF\T & {U(\DFib{\C}\times \DFib{D}),}
	\arrow["{\eta_\T}", from=1-1, to=1-2]
	\arrow["{U\overline\alpha\#}", from=1-2, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "\overline\alpha", curve={height=-30pt}, from=1-1, to=1-3]
	\arrow["{\eta_\T}"', from=1-1, to=3-2]
	\arrow["{U(M, N)}"', from=3-2, to=3-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{U(\mathbf{dom},\mathbf{cod})}", from=1-3, to=3-3]
	\arrow["{\sigma^{-1}}"', Rightarrow, from=1-3, to=3-2]
	\arrow["{\eta_\T}", from=1-4, to=1-5]
	\arrow["{U\overline\alpha\#}", from=1-5, to=1-6]
	\arrow[""{name=2, anchor=center, inner sep=0}, "\overline\alpha", curve={height=-30pt}, from=1-4, to=1-6]
	\arrow[""{name=3, anchor=center, inner sep=0}, "\overline\alpha"', curve={height=30pt}, from=1-4, to=1-6]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{U(\mathbf{dom},\mathbf{cod})}", from=1-6, to=3-6]
	\arrow[""{name=5, anchor=center, inner sep=0}, "{\eta_\T}"', from=1-4, to=3-5]
	\arrow["{U(M,N)}"', from=3-5, to=3-6]
	\arrow["\Omega", shorten <=3pt, Rightarrow, from=0, to=1-2]
	\arrow["\Omega", shorten <=3pt, Rightarrow, from=2, to=1-5]
	\arrow["{\Omega^{-1}}"{pos=0.5}, shorten >=3pt, Rightarrow, from=1-5, to=3]
	\arrow["{=}", draw=none, from=1, to=3]
	\arrow["{=}"', draw=none, from=5, to=4]
\end{tikzcd}\]
which is clearly the identity transformation. This completes the proof of fullness.

To conclude that we have an equivalence, it suffices to prove faithfulness. Assume $\alpha,\beta\colon M\Rightarrow G^*N$ are two morphisms of models such that $\alpha\eta=\beta\eta$. We want to show that $\alpha=\beta$. Using the universal property of $$ar\colon\mathbf{dom}\Rightarrow G^*\mathbf{cod}\colon{\DFib{}}^{\to}_G\to\DFib{\C},$$ it is equivalent to showing that 
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXFQiXSxbMSwwLCJVRlxcVCJdLFsyLDAsIlV7XFxERmlie319XntcXHRvfV9HIl0sWzEsMSwiVUZcXFQiXSxbMCwxLCJcXGV0YV9cXFQiXSxbMSwyLCJVXFxvdmVybGluZVxcYWxwaGEiXSxbMCwzLCJcXGV0YV9cXFQiLDJdLFszLDIsIlVcXG92ZXJsaW5lXFxiZXRhIiwyXSxbMSwzLCI9IiwxLHsibGFiZWxfcG9zaXRpb24iOjQwLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=
\[\begin{tikzcd}
	\T & UF\T & {U{\DFib{}}^{\to}_G} \\
	& UF\T
	\arrow["{\eta_\T}", from=1-1, to=1-2]
	\arrow["U\overline\alpha", from=1-2, to=1-3]
	\arrow["{\eta_\T}"', from=1-1, to=2-2]
	\arrow["U\overline\beta"', from=2-2, to=1-3]
	\arrow["{=}"{description, pos=0.4}, draw=none, from=1-2, to=2-2]
\end{tikzcd}\]
implies that $\overline{\alpha}=\overline{\beta}$. As $U(-)\eta_\T$ is fully-faithful, there is an isomorphism $\Phi\colon\overline{\alpha}\Rightarrow\overline{\beta}$ such that 
% https://q.uiver.app/#q=WzAsNyxbMCwwLCJcXFQiXSxbMSwwLCJVRlxcVCJdLFsyLDAsIlV7XFxERmlie319XntcXHRvfV9HIl0sWzEsMSwiVUZcXFQiXSxbMywwLCJcXFQiXSxbNCwwLCJVRlxcVCJdLFs1LDAsIlV7XFxERmlie319XntcXHRvfV9HIl0sWzAsMSwiXFxldGFfXFxUIl0sWzEsMiwiVVxcb3ZlcmxpbmVcXGFscGhhIl0sWzAsMywiXFxldGFfXFxUIiwyXSxbMywyLCJVXFxvdmVybGluZVxcYmV0YSIsMl0sWzEsMywiPSIsMSx7ImxhYmVsX3Bvc2l0aW9uIjo0MCwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzQsNSwiXFxldGFfXFxUIl0sWzUsNiwiVVxcb3ZlcmxpbmVcXGFscGhhIiwwLHsiY3VydmUiOi0yfV0sWzUsNiwiVVxcb3ZlcmxpbmVcXGJldGEiLDIseyJjdXJ2ZSI6Mn1dLFsyLDQsIj0iLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTMsMTQsIlVcXFBoaSIsMix7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	\T & UF\T & {U{\DFib{}}^{\to}_G} & \T & UF\T & {U{\DFib{}}^{\to}_G.} \\
	& UF\T
	\arrow["{\eta_\T}", from=1-1, to=1-2]
	\arrow["U\overline\alpha", from=1-2, to=1-3]
	\arrow["{\eta_\T}"', from=1-1, to=2-2]
	\arrow["U\overline\beta"', from=2-2, to=1-3]
	\arrow["{=}"{description, pos=0.4}, draw=none, from=1-2, to=2-2]
	\arrow["{\eta_\T}", from=1-4, to=1-5]
	\arrow[""{name=0, anchor=center, inner sep=0}, "U\overline\alpha", curve={height=-12pt}, from=1-5, to=1-6]
	\arrow[""{name=1, anchor=center, inner sep=0}, "U\overline\beta"', curve={height=12pt}, from=1-5, to=1-6]
	\arrow["{=}"', draw=none, from=1-3, to=1-4]
	\arrow["U\Phi"', shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
\end{tikzcd}\]
We show that $\Phi$ is actually the identity on $\overline\alpha$. Now, we can again use that $(\mathbf{dom},\mathbf{cod})$ is a discrete isofibration: $\Phi$ is the identity if and only if 
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJGXFxUIl0sWzEsMCwie1xcREZpYnt9fV57XFx0b31fRyJdLFsxLDEsIlxcREZpYntDfVxcdGltZXNcXERGaWJ7RH0iXSxbMCwxLCJcXG92ZXJsaW5lXFxhbHBoYSIsMCx7ImN1cnZlIjotMn1dLFsxLDIsIihcXG1hdGhiZntkb219LFxcbWF0aGJme2NvZH0pIl0sWzAsMSwiXFxvdmVybGluZVxcYmV0YSIsMix7ImN1cnZlIjoyfV0sWzMsNSwiXFxQaGkiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV1d
\[\begin{tikzcd}
	F\T & {{\DFib{}}^{\to}_G} \\
	& {\DFib{\C}\times\DFib{D}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "\overline\alpha", curve={height=-12pt}, from=1-1, to=1-2]
	\arrow["{(\mathbf{dom},\mathbf{cod})}", from=1-2, to=2-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "\overline\beta"', curve={height=12pt}, from=1-1, to=1-2]
	\arrow["\Phi", shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
\end{tikzcd}\]
is the identity on $(M, N)$. Since $U(-)\eta_\T$ is a bijection on hom-sets, it suffices that we obtain an identity after applying $U(-)\eta_\T$:
% https://q.uiver.app/#q=WzAsNCxbMSwwLCJVRlxcVCJdLFsyLDAsIlV7XFxERmlie319XntcXHRvfV9HIl0sWzIsMSwiVVxcREZpYntDfVxcdGltZXNcXERGaWJ7RH0iXSxbMCwwLCJcXFQiXSxbMCwxLCJVXFxvdmVybGluZVxcYWxwaGEiLDAseyJjdXJ2ZSI6LTJ9XSxbMSwyLCJVKFxcbWF0aGJme2RvbX0sXFxtYXRoYmZ7Y29kfSkiXSxbMCwxLCJVXFxvdmVybGluZVxcYmV0YSIsMix7ImN1cnZlIjoyfV0sWzMsMCwiXFxldGFfXFxUIl0sWzQsNiwiVVxcUGhpIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	\T & UF\T & {U{\DFib{}}^{\to}_G} \\
	&& {U(\DFib{\C}\times\DFib{D}).}
	\arrow[""{name=0, anchor=center, inner sep=0}, "U\overline\alpha", curve={height=-12pt}, from=1-2, to=1-3]
	\arrow["{U(\mathbf{dom},\mathbf{cod})}", from=1-3, to=2-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "U\overline\beta"', curve={height=12pt}, from=1-2, to=1-3]
	\arrow["{\eta_\T}", from=1-1, to=1-2]
	\arrow["U\Phi", shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
\end{tikzcd}\]
Since this is the identity by the definition of $\Phi$, we indeed obtained $\overline\alpha=\overline\beta$ and this concludes the proof of faithfulness.
\end{proof}
\begin{rem}\label{size issues}
    The proof above has a foundational issue: $\DFib{\C}$ is not a small category. We see two possible solutions: 
    \begin{enumerate}
        \item The first is foundational, i.e. we pass to a higher set-theoretical universe, where for a category $\C$ with a small set of objects, the category $\DFib{\C}$ still has a set of objects, just not necessarily small.
        \item However, we claim that the issue can be solved even without changing foundations. The idea is to factor every model $M\colon\T\to\DFib{\C}$ through a small CwR that is generated by the image of $M$. A proper examination of this possibility is left to future work.
    \end{enumerate}
\end{rem}
\begin{ex}\label{naturalModelsAsCwR}
    These results allow us to create a CwR such that its models are precisely natural models. Let $$NM=\{Tm\overset{p}{\rightarrowtriangle} Ty\}$$ be a marked category such that the only non-displayed morphisms are identities.

    We describe its category of models explicitly. Objects are functors $\CAT_m(NM,\DFib{\C})$ -- that is, choices of a representable arrow in $\DFib{\C}$, i.e. natural models.

    Morphism of natural models $M\colon NM\to\DFib{\C}, N\colon NM\to\DFib{\D}$ consists of a terminal-object preserving functor $F\colon\C\to\D$, and a natural transformations $\alpha\colon M\Rightarrow F^*N$ satisfying the Beck-Chevalley condition. The natural transformation is just a commutative square in $\DFib{\C}$:
% https://q.uiver.app/#q=WzAsNCxbMCwxLCJNKFR5KSJdLFsyLDEsIkZeKk4oVHkpIl0sWzAsMCwiTShUbSkiXSxbMiwwLCJGXipOKFRtKSJdLFswLDEsIlxcYWxwaGFfe1R5fSJdLFsyLDAsIk1wIiwyXSxbMiwzLCJcXGFscGhhX3tUbX0iXSxbMywxLCJGXipOcCJdXQ==
\[\begin{tikzcd}
	{M(Tm)} && {F^*N(Tm)} \\
	{M(Ty)} && {F^*N(Ty)},
	\arrow["{\alpha_{Tm}}", from=1-1, to=1-3]
	\arrow["Mp"', from=1-1, to=2-1]
	\arrow["{F^*Np}", from=1-3, to=2-3]
	\arrow["{\alpha_{Ty}}", from=2-1, to=2-3]
\end{tikzcd}\]
    or, equivalently, a bigger commutative diagram in $\Cat$:

% https://q.uiver.app/#q=WzAsNSxbMCwxLCJkTShUeSkiXSxbMSwzLCJcXEMiXSxbMiwxLCJkRl4qTihUeSkiXSxbMCwwLCJkTShUbSkiXSxbMiwwLCJkRl4qTihUbSkiXSxbMCwxLCJNKFR5KSIsMl0sWzAsMiwiXFxhbHBoYV97VHl9Il0sWzIsMSwiTihUeSkiXSxbMywwLCJkTXAiLDJdLFszLDQsIlxcYWxwaGFfe1RtfSJdLFs0LDIsImRGXipOcCJdXQ==
\[\begin{tikzcd}
	{dM(Tm)} && {dF^*N(Tm)} \\
	{dM(Ty)} && {dF^*N(Ty)} \\
	\\
	& \C.
	\arrow["{\alpha_{Tm}}", from=1-1, to=1-3]
	\arrow["dMp"', from=1-1, to=2-1]
	\arrow["{dF^*Np}", from=1-3, to=2-3]
	\arrow["{\alpha_{Ty}}", from=2-1, to=2-3]
	\arrow["{M(Ty)}"', from=2-1, to=4-2]
	\arrow["{N(Ty)}", from=2-3, to=4-2]
\end{tikzcd}\]
The Beck-Chevalley condition happens for the following square (see Remark \ref{taichis_morphism_is_our_morphism}):
% https://q.uiver.app/#q=WzAsNixbMCwxLCJkTShUeSkiXSxbMSwxLCJkRl4qTihUeSkiXSxbMCwwLCJkTShUbSkiXSxbMSwwLCJkRl4qTihUbSkiXSxbMiwwLCJkTihUbSkiXSxbMiwxLCJkTihUeSkiXSxbMCwxLCJcXGFscGhhX3tUeX0iXSxbMiwwLCJkTXAiLDJdLFsyLDMsIlxcYWxwaGFfe1RtfSJdLFszLDQsIlxccGkiXSxbMSw1LCJcXHBpIl0sWzQsNSwiZE5wIl1d
\[\begin{tikzcd}
	{dM(Tm)} & {dF^*N(Tm)} & {dN(Tm)} \\
	{dM(Ty)} & {dF^*N(Ty)} & {dN(Ty)}.
	\arrow["{\alpha_{Tm}}", from=1-1, to=1-2]
	\arrow["dMp"', from=1-1, to=2-1]
	\arrow["\pi", from=1-2, to=1-3]
	\arrow["dNp", from=1-3, to=2-3]
	\arrow["{\alpha_{Ty}}", from=2-1, to=2-2]
	\arrow["\pi", from=2-2, to=2-3]
\end{tikzcd}\]
By Theorem \ref{bimodismod}, we see that this category is (up to an equivalence) also the category of models of $F(NM)$.

According to \cite[Remark 4.15]{Uemura_2023}, this is equivalent to other morphisms of natural models considered in literature: pseudomorphisms of categories with families \cite[Definition 3.1]{CLAIRAMBAULT_DYBJER_2014}, and weak morphisms of natural models \cite[Definition 2.3.9]{Newstead2018}.
\end{ex}
\section{Models of (Bi)Colimits of Type Theories}\label{sec:colimmod}
In this section, we examine bicolimits of type theories (small categories with representable maps). These allow us to form complicated theories out of a simpler ones in a controlled way -- as category of models can be made into a contravariant $2$-functor that turns bicolimits into bilimits, we can understand a category of models of such a bicolimit. This turns out to be very useful with concrete examples in Section \ref{sec:examples}. We start with defining $Mod$:
\begin{nota}
    Let us denote $\CatT$ the $(2,1)$-category of all small categories with terminal objects, terminal objects preserving functors and natural isomorphisms.
\end{nota}
\begin{defi}
    Let $\T$ be a CwR. We define a functor $U_\T\colon Mod_{\Rep}(\T)\to\CatT$ as follows:
    \begin{itemize}
        \item for a model $M\colon\T\to\DFib{\C}$, we set $U_\T(M):=\C$;
        \item for a morphism $(F, \alpha )\colon M\to N$, we set $U_\T(F,\alpha):=F$.
    \end{itemize}
\end{defi}
Unfortunately, the functor cannot be made a $2$-functor from $\Rep$ in an easy way. We, hence, consider it as a $2$-functor from $(2,1)$-$\Rep$:

\begin{defi}
    We define a $2$-functor $Mod\colon\text{(2,1)-}\Rep^{op}\to(2,1)\text{-}\CAT/\CatT$ as follows:
    \begin{itemize}
        \item for $\T\in\Rep$, we define $Mod(\T)$ as the functor $U_T\colon Mod_{\Rep}(\T)\to\CatT$;
        \item for $F\colon\T\to\T'$, we define $Mod(F)\colon Mod(\T')\to Mod(\T)$ by precomposition with $F$, i.e. $Mod(F)M:=MF$;
        \item for $\alpha\colon F\cong G\colon\T\to\T'$, we define a component of $Mod(\alpha)\colon Mod(F)\cong Mod(G)$ at a model $M\colon\T'\to\DFib{\C}$ by $Mod(\alpha)_M:=(M\alpha, 1_{\C})$.
    \end{itemize}
\end{defi}
\begin{rem}
    Correctness of the action on objects and morphisms is clear. Correctness of the action on 2-cells follows from Lemma \ref{isosBC} (natural isomorphisms are always morphisms of models).
\end{rem}
Now that we have defined the functor $Mod$, we can state the promised theorem:
\begin{thm}\label{mod is continuous}
The functor $Mod$ maps all $(2,1)$-bicolimits to bilimits.
\end{thm}
\begin{proof}
    This appears in \cite[Corollary 5.2.12]{taichiThesis}.%TODO: FIND AN EASIER PROOF AS THIS ONE IS VERY SKETCHY
\end{proof}
\begin{rem}
    Let us explain that we really need to consider the slice $(2,1)\text{-}\CAT/\CatT$, i.e. that the functor $(2,1)$-$\Rep^{op}\to(2,1)\text{-}\CAT$ sending a representable map category to its models does not preserve bilimits. In particular, we show that this functor does not even preserve biterminal object.

    (Bi)terminal object in $(2,1)\text{-}\CAT$ is the category with one object and only identity. Thus, $Mod$ preserves biterminal object, if its image is equivalent with that category, i.e. if it is a contractible groupoid. Biinitial object of $\Rep$ is the category with one object and only the identity arrow. Therefore, its model in a category $\DFib{\C}$ is just a choice of the terminal object in $\DFib{\C}$. Hence, the biinitial object of $\Rep$ has a model in every $\C\in\CatT$. In particular, it has models in the terminal category $\mathbf{1}$ and in the category $\mathbf{2}$. As a morphism of models consists of a morphism of the underlying categories, models in these two categories can never be isomorphic (as the categories are not isomorphic). However, this means that the category of models is not a contractible groupoid, therefore $Mod$ does not preserve bilimits as a functor into $(2,1)\text{-}\CAT$.
\end{rem}
\begin{thm}\label{pushouts work}
    Consider a bipushout
    % https://q.uiver.app/#q=WzAsNCxbMCwxLCJcXEMiXSxbMSwxLCJcXEQiXSxbMCwwLCJcXEEiXSxbMSwwLCJcXEIiXSxbMCwxXSxbMiwwXSxbMiwzXSxbMywxXSxbMSwyLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	\A & \B \\
	\C & \D
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-2, to=1-1]
\end{tikzcd}\]
in $\Rep$. Then the square 
% https://q.uiver.app/#q=WzAsNCxbMSwwLCJNb2Rfe1xcUmVwfVxcQyJdLFswLDAsIk1vZF97XFxSZXB9XFxEIl0sWzEsMSwiTW9kX3tcXFJlcH1cXEEiXSxbMCwxLCJNb2Rfe1xcUmVwfVxcQiJdLFsxLDBdLFswLDJdLFszLDJdLFsxLDNdLFsxLDIsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dXQ==
\[\begin{tikzcd}
	{Mod_{\Rep}\D} & {Mod_{\Rep}\C} \\
	{Mod_{\Rep}\B} & {Mod_{\Rep}\A}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
\end{tikzcd}\]
is a bipullback in $\CAT$.
\end{thm}
\begin{proof}
    Let $\E$ be a complete 2-category. From the proof of \cite[Proposition 3.1]{Kelly1989ElementaryOO}, we know that bipullbacks in $\E$ are also bipullbacks in $(2,1)$-$\E$. Therefore the bipushout above is also a bipushout in $(2,1)$-$\Rep$ and as such is sent by $Mod$ to a bipullback in $(2,1)\text{-}\CAT/\CatT$. Since pullbacks are connected limits, this is further sent by the domain functor to the bipullback above in $(2,1)\text{-}\CAT$. But this is also a bipullback in $\CAT$.
\end{proof}
\section{Examples of Type Theories}\label{sec:examples}
In this section, we construct concrete examples of type theories via colimit presentations (bicolimits of free type theories). This is possible using the technology from the end of Chapter \ref{chap:prop}. Using the results of Sections \ref{sec:freemod} and \ref{sec:colimmod}, we are able to recognise category of models of such presentations. Specifically, we build CwRs such that their categories of models consist of natural models with 
\begin{enumerate}
    \item unit type with $\eta$-law,
    \item empty type,
    \item unit type as an inductive type.
\end{enumerate}
After remarks in Chapter \ref{chap:semantics}, a reader might expect also $\Pi$-types. We do not treat these as the construction does not provide any new insights, and, after the three examples, $\Pi$-types should be just a technical exercise.

As we aim for examples that are just a classical dependent type theory with some constructors, the models should be especially models of dependent type theory without any constructors, i.e. natural models. Therefore, our cornerstone is the CwR 
 $F(NM)$ from Example \ref{naturalModelsAsCwR} whose models are precisely natural models. 
\begin{nota}
    By $\mathbf{NM}$, we denote the CwR $F(NM)$.
\end{nota}
The unit of the biadjunction $F\dashv U$ at $NM$ is an arrow 
$$\eta_{NM}\colon\{Tm\overset{p}{\rightarrowtriangle} Ty\}\to U\mathbf{NM}.$$ 
Thus, we know that in $\mathbf{NM}$ we have a representable arrow -- the image of $p\in NM$. We abuse the notation:
\begin{nota}
    We denote by $Tm\overset{p}{\rightarrowtriangle} Ty$ the representable arrow in $\mathbf{NM}$ that is in the image of the functor $\eta_{TM}$ above.
\end{nota}

The last bits of notation that we need to introduce are various simple categories that are used in later constructions:
\begin{nota} We denote
    \begin{itemize}
        \item $Sec$ the category with two objects $0,1$, a morphism $0\to1$ together with a freely added section of this arrow;
        \item $Par$ the category with two objects $0,1$, and two parallel morphisms $0\to 1$.
    \end{itemize}
    All the categories are considered as marked categories with only a minimal possible amount of marked arrows.
\end{nota}
Whenever we consider functors between categories that have the same set of objects, we mean identity-on-objects functors.
\subsection{Unit Type with $\eta$-law}\label{unit eta}
The first example that we construct is a CwR such that its models are precisely natural models supporting unit types with $\eta$-law. We remind the reader (Definition \ref{unit types}) that we need to model the following rules:
\begin{multicols}{2}
    \begin{prooftree}
        \AxiomC{}
        \RightLabel{$\mathbb{1}$-form}
        \UnaryInfC{$\Gamma\vdash \mathbb{1}\; Ty$}
    \end{prooftree}
    \begin{prooftree}
        \AxiomC{}
        \RightLabel{$\mathbb{1}$-intro}
        \UnaryInfC{$\Gamma\vdash\star : \mathbb{1}$}
    \end{prooftree}      
\end{multicols}

\begin{prooftree}
    \AxiomC{$\Gamma\vdash t : \mathbb{1}$}
    \RightLabel{$\mathbb{1}$-$\eta$}
    \UnaryInfC{$\Gamma\vdash t\equiv\star : \mathbb{1}$}
\end{prooftree}

The formation rule is simple: we need to add to $\mathbf{NM}$ an arrow $\mathbb1\colon 1\to Ty$. We can do that via the following bipushout in $\Rep$:

% https://q.uiver.app/#q=WzAsNCxbMCwwLCJGXFx7MCwxXFx9Il0sWzEsMCwiTk0iXSxbMCwxLCJGXFx7MFxcdG8xXFx9Il0sWzEsMSwiTk1fe1xcbWF0aGJiezF9fSJdLFswLDEsIigxLCBUeSkiXSxbMCwyXSxbMiwzXSxbMSwzXSxbMywwLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	{F\{0,1\}} & NM \\
	{F\{0\to1\}} & {NM_{\mathbb{1}}.}
	\arrow["{(1, Ty)}", from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-2, to=1-1]
\end{tikzcd}\]
The left arrow is just $F$ applied to inclusion. The top arrow is the image of $(1, Ty)\colon \{0,1\}\to U\mathbf{NM}$ in the equivalence $\Cat_m(\{0,1\}, U\NM)\simeq\Rep(F\{0,1\}, \NM)$. By the universal property of bipushouts and by Theorem \ref{pushouts work}, we know that to give a model in $\C$ is (essentially) the same as to give a natural model in $\C$ together with a chosen arrow from $1$ to $Ty$; more precisely, we have the following bipullback:

% https://q.uiver.app/#q=WzAsNCxbMSwxLCJNb2QoRlxcezAsMVxcfSkiXSxbMCwxLCJNb2QoXFxOTSkiXSxbMSwwLCJNb2QoRlxcezBcXHRvMVxcfSkiXSxbMCwwLCJNb2QoXFxOTV97XFxtYXRoYmIxfSkiXSxbMSwwLCJNb2QoKDEsIFR5KSkiLDJdLFsyLDBdLFszLDJdLFszLDFdLFszLDAsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dXQ==
\[\begin{tikzcd}
	{Mod(\NM_{\mathbb1})} & {Mod(F\{0\to1\})} \\
	{Mod(\NM)} & {Mod(F\{0,1\})}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\arrow[from=1-2, to=2-2]
	\arrow["{Mod((1, Ty))}"', from=2-1, to=2-2]
\end{tikzcd}\]
To model the introduction rule, we have two equivalent options. The first one is to add an arrow $\star\colon1\to Tm$ such that
% https://q.uiver.app/#q=WzAsMyxbMCwxLCIxIl0sWzEsMSwiVHkiXSxbMSwwLCJUbSJdLFswLDEsIlxcbWF0aGJiMSIsMl0sWzAsMiwiXFxzdGFyIl0sWzIsMSwicCJdXQ==
\[\begin{tikzcd}
	& Tm \\
	1 & Ty
	\arrow["p", from=1-2, to=2-2]
	\arrow["\star", from=2-1, to=1-2]
	\arrow["\mathbb1"', from=2-1, to=2-2]
\end{tikzcd}\]
commutes. Or, equivalently, we can take a pullback of the cospan $1\to Ty \leftarrow Tm$, and add a section of its projection to $1$:
% https://q.uiver.app/#q=WzAsNSxbMSwyLCIxIl0sWzIsMiwiVHkiXSxbMiwxLCJUbSJdLFsxLDEsIlRtKFxcbWF0aGJiMSkiXSxbMCwwLCIxIl0sWzAsMSwiXFxtYXRoYmIxIiwyXSxbMiwxLCJwIl0sWzMsMl0sWzMsMCwiISIsMl0sWzMsMSwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzQsMywiXFxzdGFyIl0sWzQsMCwiIiwwLHsiY3VydmUiOjMsImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
\[\begin{tikzcd}
	1 \\
	& {Tm(\mathbb1)} & Tm \\
	& 1 & Ty
	\arrow["\star", from=1-1, to=2-2]
	\arrow[curve={height=18pt}, Rightarrow, no head, from=1-1, to=3-2]
	\arrow[from=2-2, to=2-3]
	\arrow["{!}"', from=2-2, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=3-3]
	\arrow["p", from=2-3, to=3-3]
	\arrow["\mathbb1"', from=3-2, to=3-3]
\end{tikzcd}\]
The approaches are equivalent by the universal property of pullbacks. For the purposes of this thesis, the latter approach seems more convenient. Therefore, we construct the type theory $\NM_{\mathbb1, \star}$ as the following bipushout:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJGXFx7MFxcdG8xXFx9Il0sWzIsMCwiXFxOTV97XFxtYXRoYmIxfSJdLFswLDIsIkZTZWMiXSxbMiwyLCJcXE5NX3tcXG1hdGhiYjEsXFxzdGFyfSJdLFswLDEsIihUbShcXG1hdGhiYjEpXFx0bzEpIl0sWzAsMl0sWzIsM10sWzEsM10sWzMsMCwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	{F\{0\to1\}} && {\NM_{\mathbb1}} \\
	\\
	FSec && {\NM_{\mathbb1,\star}.}
	\arrow["{(Tm(\mathbb1)\to1)}", from=1-1, to=1-3]
	\arrow[from=1-1, to=3-1]
	\arrow[from=1-3, to=3-3]
	\arrow[from=3-1, to=3-3]
	\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=3-3, to=1-1]
\end{tikzcd}\]
The last missing bit is the $\eta$-law that is saying that $\star$ is not only a section, but also a retraction of $!\colon Tm(\mathbb1)\to1$. We can force it via the following bipushout:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJGUGFyIl0sWzEsMCwiXFxOTV97XFxtYXRoYmIxLFxcc3Rhcn0iXSxbMCwxLCJGXFx7MFxcdG8xXFx9Il0sWzEsMSwiXFxOTV97XFxtYXRoYmIxLFxcc3RhcixcXGV0YX0iXSxbMCwxXSxbMCwyXSxbMiwzXSxbMSwzXSxbMywwLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	FPar & {\NM_{\mathbb1,\star}} \\
	{F\{0\to1\}} & {\NM_{\mathbb1,\star,\eta}}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-2, to=1-1]
\end{tikzcd}\]
where the top arrow chooses the identity on $Tm(\mathbb1)$ and the arrow $Tm(\mathbb1)\overset{!}{\to}1\overset{\star}{\to}Tm(\mathbb1)$.

Since $1\cong Tm(\mathbb1)$, we can instead model $\eta$-law by saying that the square 
% https://q.uiver.app/#q=WzAsNSxbMCwxLCIxIl0sWzIsMSwiVHkiXSxbMiwwLCJUbSJdLFswLDAsIjEiXSxbMSwwLCJUbShcXG1hdGhiYjEpIl0sWzAsMSwiXFxtYXRoYmIxIiwyXSxbMiwxLCJwIl0sWzMsMCwiaWRfMSIsMl0sWzMsNCwiXFxzdGFyIl0sWzQsMl1d
\[\begin{tikzcd}
	1 & {Tm(\mathbb1)} & Tm \\
	1 && Ty
	\arrow["\star", from=1-1, to=1-2]
	\arrow["{id_1}"', from=1-1, to=2-1]
	\arrow[from=1-2, to=1-3]
	\arrow["p", from=1-3, to=2-3]
	\arrow["\mathbb1"', from=2-1, to=2-3]
\end{tikzcd}\]
is a pullback.

To summarise: a model of $\NM_{\mathbb1,\star,\eta}$ in $\C$ is
\begin{itemize}
    \item a representable map of discrete fibrations $Tm_\C\rightarrowtriangle Ty_\C$;
    \item a map of discrete fibrations $\mathbb1\colon\C\to Ty_\C$;
    \item a map of discrete fibrations $\star\colon1\to Tm_\C$;
    \item such that the square
    \[\begin{tikzcd}
        1\ar[d, "id_1"']\ar[r,"\star"] & Tm_\C\ar[-tri, d]\\
        1\ar[r, "\mathbb1"] & Ty_\C
    \end{tikzcd}
    \]
    is a pullback in $\DFib{\C}$.
\end{itemize}
These are exactly models of dependent type theory with unit types as considered in \cite[Definition 2.3.8.1]{gretaThesis}.

\subsection{Empty Type}
We describe a type theory with the empty type, i.e. we need to model these two rules:
\begin{multicols}{2}
    \begin{prooftree}
        \AxiomC{ {\color{white} B}}
        \RightLabel{$\mathbb{0}$-form}
        \UnaryInfC{$\Gamma\vdash \mathbb{0}\; Ty$}
    \end{prooftree}
    \begin{prooftree}
        \AxiomC{$\Gamma, x: \mathbb{0}\vdash\; A(x)\; Ty$}
        \AxiomC{$\Gamma\vdash\; \lightning :\mathbb0$}
        \RightLabel{$\mathbb{0}$-elim}
        \BinaryInfC{$\Gamma\vdash\ ind_{\mathbb0}(\lightning) : A(\lightning)$.}
    \end{prooftree}      
\end{multicols}
The difference between this subsection and the previous one is that we need to deal with variable binding from the elimination rule. 

Modelling the formation rule is the same as with unit types:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJGXFx7MCwxXFx9Il0sWzIsMCwiTk0iXSxbMCwyLCJGXFx7MFxcdG8xXFx9Il0sWzIsMiwiTk1fe1xcbWF0aGJiezF9fSJdLFswLDEsIigxLCBUeSkiXSxbMCwyXSxbMiwzXSxbMSwzXSxbMywwLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	{F\{0,1\}} & \mathbf{NM} \\
	{F\{0\to1\}} & {\mathbf{NM}_{\mathbb{0}}.}
	\arrow["{(1, Ty)}", from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-2, to=1-1]
\end{tikzcd}\]
For the elimination, we start with creating an object that correspond to the judgement form
$$\Gamma, x: \mathbb{0}\vdash\; \_\; Ty.$$
The first diagram below depicts objects and arrows of $\NM_{\mathbb0}$. The arrow $!\colon Tm(\mathbb0)\to 1$ is representable as it is a pullback of the representable map $p$. The second diagram shows the intuitive meaning of these objects and arrows as described in Remark \ref{intuition}.
% https://q.uiver.app/#q=WzAsNixbMSwxLCJUbShcXG1hdGhiYjApIl0sWzIsMSwiVG0iXSxbMSwyLCIxIl0sWzIsMiwiVHkiXSxbMCwwLCJUeVxcdGltZXMgVG0oXFxtYXRoYmIwKSJdLFswLDEsIlxccHJvZF8hVHlcXHRpbWVzIFRtKFxcbWF0aGJiMCkiXSxbMCwxXSxbMCwyLCIhIiwyXSxbMiwzLCJcXG1hdGhiYjAiLDJdLFsxLDMsInAiXSxbMCwzLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbNCwwLCJcXHBpXzIiLDFdLFs1LDIsIlxccHJvZF8hXFxwaV8yIiwxXV0=
\[\begin{tikzcd}
	{Ty\times Tm(\mathbb0)} \\
	{\prod_!Ty\times Tm(\mathbb0)} & {Tm(\mathbb0)} & Tm \\
	& 1 & Ty
	\arrow["{\pi_2}"{description}, from=1-1, to=2-2]
	\arrow["{\prod_!\pi_2}"{description}, from=2-1, to=3-2]
	\arrow[from=2-2, to=2-3]
	\arrow[-tri, "{!}"', from=2-2, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=3-3]
	\arrow[-tri, "p", from=2-3, to=3-3]
	\arrow["\mathbb0"', from=3-2, to=3-3]
\end{tikzcd}\]

% https://q.uiver.app/#q=WzAsNixbMSwxLCJcXEdhbW1hXFx2ZGFzaCBhOlxcbWF0aGJiMCJdLFsyLDEsIlxcR2FtbWFcXHZkYXNoIGE6XFxfIl0sWzEsMiwiKCkiXSxbMiwyLCJcXEdhbW1hXFx2ZGFzaCBcXG1hdGhiYjBcXDtUeSJdLFswLDAsIlxcR2FtbWFcXHZkYXNoIEFcXDtUeVxcaHNwYWNlezAuM2NtfVxcR2FtbWFcXHZkYXNoIGE6XFxtYXRoYmIwIl0sWzAsMSwiXFxHYW1tYSx4OlxcbWF0aGJiMFxcdmRhc2ggQSh4KVxcO1R5Il0sWzAsMSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFswLDIsIiEiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzIsMywiXFxtYXRoYmIwIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFsxLDMsInAiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzAsMywiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV0sWzQsMCwiXFxwaV8yIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDIsIlxccHJvZF8hXFxwaV8yIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==
\[\begin{tikzcd}
	{\Gamma\vdash A\;Ty\hspace{0.3cm}\Gamma\vdash a:\mathbb0} \\
	{\Gamma,x:\mathbb0\vdash A(x)\;Ty} & {\Gamma\vdash a:\mathbb0} & {\Gamma\vdash a:\_} \\
	& {()} & {\Gamma\vdash \mathbb0\;Ty}
	\arrow["{\pi_2}"{description}, maps to, from=1-1, to=2-2]
	\arrow["{\prod_!\pi_2}"{description}, maps to, from=2-1, to=3-2]
	\arrow[maps to, from=2-2, to=2-3]
	\arrow["{!}"', maps to, from=2-2, to=3-2]
	\arrow["p", maps to, from=2-3, to=3-3]
	\arrow["\mathbb0"', maps to, from=3-2, to=3-3]
\end{tikzcd}\]
To shorten our expressions, we set $Ty^{Tm(\mathbb0)}:=\prod_!Ty\times Tm(\mathbb0)$.

To construct the object corresponding to the premise of the elimination rule is now simple, it is $Tm(\mathbb0)\times Ty^{Tm(\mathbb0)}$. Now, we need to construct the object $C$ representing the conclusion $\Gamma\vdash \_:A(\lightning)$. This is done via the counit of $Tm(\mathbb0)\times-\dashv\prod_!$. Again, in the first diagram, we depict objects and arrows of $\NM_\mathbb0$, and, in the second, we show the type theoretic intuition from Remark \ref{intuition}.
% https://q.uiver.app/#q=WzAsNixbMCwxLCJUbShcXG1hdGhiYjApXFx0aW1lcyBUeV57VG0oXFxtYXRoYmIwKX0iXSxbMSwyLCJUbShcXG1hdGhiYjApIl0sWzIsMSwiVHlcXHRpbWVzIFRtKFxcbWF0aGJiMCkiXSxbMywxLCJUeSJdLFszLDAsIlRtIl0sWzAsMCwiQyJdLFswLDEsIlxccGlfMSIsMV0sWzAsMiwiXFx2YXJlcHNpbG9uX3tcXHBpXzJ9IiwxXSxbMiwxLCJcXHBpXzIiLDFdLFsyLDMsIlxccGlfMSIsMV0sWzQsMywicCJdLFs1LDBdLFs1LDRdLFs1LDcsIiIsMSx7ImxldmVsIjoxLCJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	C &&& Tm \\
	{Tm(\mathbb0)\times Ty^{Tm(\mathbb0)}} && {Ty\times Tm(\mathbb0)} & Ty \\
	& {Tm(\mathbb0)}
	\arrow[from=1-1, to=1-4]
	\arrow[from=1-1, to=2-1]
	\arrow["p", from=1-4, to=2-4]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\varepsilon_{\pi_2}}"{description}, from=2-1, to=2-3]
	\arrow["{\pi_1}"{description}, from=2-1, to=3-2]
	\arrow["{\pi_1}"{description}, from=2-3, to=2-4]
	\arrow["{\pi_2}"{description}, from=2-3, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=0]
\end{tikzcd}\]
% https://q.uiver.app/#q=WzAsNixbMCwxLCJcXEdhbW1hXFx2ZGFzaCBcXGxpZ2h0bmluZzpcXG1hdGhiYjBcXGhzcGFjZXswLjNjbX1cXEdhbW1hLHg6XFxtYXRoYmIwXFx2ZGFzaCBBKHgpXFw7VHkiXSxbMSwyLCJcXEdhbW1hXFx2ZGFzaCBcXGxpZ2h0bmluZzpcXG1hdGhiYjAiXSxbMiwxLCJcXEdhbW1hXFx2ZGFzaCBBKFxcbGlnaHRuaW5nKVxcO1R5XFxoc3BhY2V7MC4zY219XFxHYW1tYVxcdmRhc2ggXFxsaWdodG5pbmcgOlxcbWF0aGJiMCJdLFszLDEsIlxcR2FtbWFcXHZkYXNoIEEoXFxsaWdodG5pbmcpXFw7VHkiXSxbMywwLCJcXEdhbW1hXFx2ZGFzaCBhOlxcXyJdLFswLDAsIlxcR2FtbWFcXHZkYXNoIGE6QShcXGxpZ2h0bmluZykiXSxbMCwxLCJcXHBpXzEiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzAsMiwiXFx2YXJlcHNpbG9uX3tcXHBpXzJ9IiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFsyLDEsIlxccGlfMiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbMiwzLCJcXHBpXzEiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsMywicCIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSwwLCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNCwiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==
\[\begin{tikzcd}
	{\Gamma\vdash a:A(\lightning)} &&& {\Gamma\vdash a:\_} \\
	{\Gamma\vdash \lightning:\mathbb0\hspace{0.3cm}\Gamma,x:\mathbb0\vdash A(x)\;Ty} && {\Gamma\vdash A(\lightning)\;Ty\hspace{0.3cm}\Gamma\vdash \lightning :\mathbb0} & {\Gamma\vdash A(\lightning)\;Ty} \\
	& {\Gamma\vdash \lightning:\mathbb0}
	\arrow[maps to, from=1-1, to=1-4]
	\arrow[maps to, from=1-1, to=2-1]
	\arrow["p", maps to, from=1-4, to=2-4]
	\arrow["{\varepsilon_{\pi_2}}"{description}, maps to, from=2-1, to=2-3]
	\arrow["{\pi_1}"{description}, maps to, from=2-1, to=3-2]
	\arrow["{\pi_1}"{description}, maps to, from=2-3, to=2-4]
	\arrow["{\pi_2}"{description}, maps to, from=2-3, to=3-2]
\end{tikzcd}\]
To model the elimination rule, we need to add a section of the arrow $C\to Tm(\mathbb0)\times Ty^{Tm(\mathbb0)}$. This can be done as for the introduction rule of the unit type:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJGXFx7MFxcdG8xXFx9Il0sWzMsMCwiXFxOTV97XFxtYXRoYmIwfSJdLFszLDIsIlxcTk1fe1xcbWF0aGJiMCxpbmR9Il0sWzAsMiwiRlNlYyJdLFswLDEsIihDXFx0byBUbShcXG1hdGhiYjApXFx0aW1lcyBUeV57VG0oXFxtYXRoYmIwKX0pIl0sWzEsMl0sWzAsM10sWzMsMl0sWzIsMCwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	{F\{0\to1\}} &&& {\NM_{\mathbb0}} \\
	\\
	FSec &&& {\NM_{\mathbb0,ind}}.
	\arrow["{(C\to Tm(\mathbb0)\times Ty^{Tm(\mathbb0)})}", from=1-1, to=1-4]
	\arrow[from=1-1, to=3-1]
	\arrow[from=1-4, to=3-4]
	\arrow[from=3-1, to=3-4]
	\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=3-4, to=1-1]
\end{tikzcd}\]

\subsection{Unit Type as an Inductive Type}
There are other possible definitions of the unit type than the one presented in Subsection \ref{unit eta}. In this subsection, we describe a CwR such that its models are natural models with the inductive unit type, i.e. an inductive type with a single nullary constructor. We need to encode the following rules:
\begin{figure}[!htb]
    \centering
    \makebox[0cm][c]{%
    \begin{minipage}{.6\textwidth}
        \centering
        \begin{prooftree}
            \AxiomC{}
            \RightLabel{$\mathbb{1}$-form}
            \UnaryInfC{$\Gamma\vdash \mathbb{1}\; Ty$}
        \end{prooftree}%
        \begin{prooftree}
            \AxiomC{$\Gamma,x : \mathbb{1}\vdash A(x)\; Ty$}
            \AxiomC{$\Gamma\vdash a_\star : A(\star)$}
            \AxiomC{$\Gamma\vdash t : \mathbb{1}$}
            \RightLabel{$\mathbb{1}$-elim}
            \TrinaryInfC{$\Gamma\vdash ind_{\mathbb{1}}(t, a_{\star}) : A(t)$}
        \end{prooftree}    
    \end{minipage}
    \begin{minipage}{0.5\textwidth}
        \centering
        \begin{prooftree}
            \AxiomC{}
            \RightLabel{$\mathbb{1}$-intro}
            \UnaryInfC{$\Gamma\vdash\star : \mathbb{1}$}
        \end{prooftree}%
        \begin{prooftree}
            \AxiomC{$\Gamma,x : \mathbb{1}\vdash A(x)\; Ty$}
            \AxiomC{$\Gamma\vdash a_\star : A(\star)$}
            \RightLabel{$\mathbb{1}$-comp}
            \BinaryInfC{$\Gamma\vdash ind_\mathbb1(\star, a_\star)\equiv a_\star : A(\star)$.}
        \end{prooftree}  
    \end{minipage}
    }%
\end{figure}

We can start with the CwR $\NM_{\mathbb1,\star}$ constructed in \ref{unit eta} as it models formation and introduction rules. The hardest part is again construction of the object that represents the premise of the elimination rule. We can notice that except the middle premise of the elimination rule, we have very similar premises to premises of the elimination rule for the empty type. Therefore, the construction may start similarly:
% https://q.uiver.app/#q=WzAsNixbMSwyLCIxIl0sWzIsMiwiVHkiXSxbMiwxLCJUbSJdLFsxLDEsIlRtKFxcbWF0aGJiMSkiXSxbMCwwLCJUeVxcdGltZXMgVG0oXFxtYXRoYmIxKSJdLFswLDEsIlxccHJvZF8hVHlcXHRpbWVzIFRtKFxcbWF0aGJiMSkiXSxbMCwxLCJcXG1hdGhiYjEiLDJdLFsyLDEsInAiXSxbMywyXSxbMywwLCIhIiwyXSxbNCwzLCJcXHBpXzIiLDFdLFs1LDAsIlxccHJvZF8hXFxwaV8yIiwxXSxbMywxLCIiLDAseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
\[\begin{tikzcd}
	{Ty\times Tm(\mathbb1)} \\
	{\prod_!Ty\times Tm(\mathbb1)} & {Tm(\mathbb1)} & Tm \\
	& 1 & Ty.
	\arrow["{\pi_2}"{description}, from=1-1, to=2-2]
	\arrow["{\prod_!\pi_2}"{description}, from=2-1, to=3-2]
	\arrow[from=2-2, to=2-3]
	\arrow[-tri, "{!}"', from=2-2, to=3-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=3-3]
	\arrow[-tri, "p", from=2-3, to=3-3]
	\arrow["\mathbb1"', from=3-2, to=3-3]
\end{tikzcd}\]
Again, we set $Ty^{Tm(\mathbb1)}:=\prod_!Ty\times Tm(\mathbb1)$. The type $A(\star)$ may be constructed similarly as $A(\lightning)$ above:
% https://q.uiver.app/#q=WzAsNyxbMiwxLCJUbShcXG1hdGhiYjEpXFx0aW1lcyBUeV57VG0oXFxtYXRoYmIxKX0iXSxbMywyLCJUbShcXG1hdGhiYjEpLiJdLFs0LDEsIlR5XFx0aW1lcyBUbShcXG1hdGhiYjEpIl0sWzUsMSwiVHkiXSxbNSwwLCJUbSJdLFswLDEsIlR5XntUbShcXG1hdGhiYjEpfSJdLFswLDAsIlRtKFxcXyhcXHN0YXIpKSJdLFswLDEsIlxccGlfMSIsMV0sWzAsMiwiXFx2YXJlcHNpbG9uX3tcXHBpXzJ9IiwxXSxbMiwxLCJcXHBpXzIiLDFdLFsyLDMsIlxccGlfMSIsMV0sWzQsMywicCJdLFs1LDAsIihcXHN0YXIsaWQpIiwxXSxbNiw1LCJcXHBpXzEiLDJdLFs2LDQsIlxccGlfMiJdLFs2LDEyLCIiLDEseyJsZXZlbCI6MSwic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	{Tm(\_(\star))} &&&&& Tm \\
	{Ty^{Tm(\mathbb1)}} && {Tm(\mathbb1)\times Ty^{Tm(\mathbb1)}} && {Ty\times Tm(\mathbb1)} & Ty \\
	&&& {Tm(\mathbb1).}
	\arrow["{\pi_2}", from=1-1, to=1-6]
	\arrow["{\pi_1}"', from=1-1, to=2-1]
	\arrow["p", from=1-6, to=2-6]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{(\star,id)}"{description}, from=2-1, to=2-3]
	\arrow["{\varepsilon_{\pi_2}}"{description}, from=2-3, to=2-5]
	\arrow["{\pi_1}"{description}, from=2-3, to=3-4]
	\arrow["{\pi_1}"{description}, from=2-5, to=2-6]
	\arrow["{\pi_2}"{description}, from=2-5, to=3-4]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=0]
\end{tikzcd}\]
This allows us to put the object $P$ modelling the premises of the elimination rule as $$P:= Tm(\_(\star))\times Tm(\mathbb1).$$ The conclusion $C$ can be constructed as follows (it is again very similar to the conclusion of the elimination for the empty type):
% https://q.uiver.app/#q=WzAsNyxbMiwxLCJUbShcXG1hdGhiYjEpXFx0aW1lcyBUeV57VG0oXFxtYXRoYmIxKX0iXSxbMywyLCJUbShcXG1hdGhiYjEpLiJdLFs0LDEsIlR5XFx0aW1lcyBUbShcXG1hdGhiYjEpIl0sWzUsMSwiVHkiXSxbNSwwLCJUbSJdLFswLDEsIlAiXSxbMCwwLCJDIl0sWzAsMSwiXFxwaV8xIiwxXSxbMCwyLCJcXHZhcmVwc2lsb25fe1xccGlfMn0iLDFdLFsyLDEsIlxccGlfMiIsMV0sWzIsMywiXFxwaV8xIiwyXSxbNCwzLCJwIl0sWzUsMCwiKFxccGlfMixcXHBpXzFcXGNkb3RcXHBpXzEpIiwyXSxbNiw1LCJcXHBpXzEiLDJdLFs2LDQsIlxccGlfMiJdLFs2LDEyLCIiLDEseyJsZXZlbCI6MSwic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	C &&&&& Tm \\
	P && {Tm(\mathbb1)\times Ty^{Tm(\mathbb1)}} && {Ty\times Tm(\mathbb1)} & Ty \\
	&&& {Tm(\mathbb1).}
	\arrow["{\pi_2}", from=1-1, to=1-6]
	\arrow["{\pi_1}"', from=1-1, to=2-1]
	\arrow["p", from=1-6, to=2-6]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{(\pi_2,\pi_1\cdot\pi_1)}"', from=2-1, to=2-3]
	\arrow["{\varepsilon_{\pi_2}}"{description}, from=2-3, to=2-5]
	\arrow["{\pi_1}"{description}, from=2-3, to=3-4]
	\arrow["{\pi_1}"', from=2-5, to=2-6]
	\arrow["{\pi_2}"{description}, from=2-5, to=3-4]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=0]
\end{tikzcd}\]
The elimination rule now just corresponds to adding a section to the arrow $C\to P$:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJGXFx7MFxcdG8xXFx9Il0sWzMsMCwiXFxOTV97XFxtYXRoYmIxLFxcc3Rhcn0iXSxbMywyLCJcXE5NX3tcXG1hdGhiYjEsXFxzdGFyLGluZH0iXSxbMCwyLCJGU2VjIl0sWzAsMSwiKENcXHRvIFApIl0sWzEsMl0sWzAsM10sWzMsMl0sWzIsMCwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	{F\{0\to1\}} &&& {\NM_{\mathbb1,\star}} \\
	\\
	FSec &&& {\NM_{\mathbb1,\star,ind}.}
	\arrow["{(C\to P)}", from=1-1, to=1-4]
	\arrow[from=1-1, to=3-1]
	\arrow[from=1-4, to=3-4]
	\arrow[from=3-1, to=3-4]
	\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=3-4, to=1-1]
\end{tikzcd}\]

It remains to encode the computation rule. This is done by equalising the two arrows that correspond to these two possible derivations:
\begin{multicols}{2}
    \begin{prooftree}
            \AxiomC{$\Gamma,x : \mathbb{1}\vdash A(x)\; Ty$}
            \AxiomC{$\Gamma\vdash a_\star : A(\star)$}
            \RightLabel{$\mathbb{1}$-comp}
            \BinaryInfC{$\Gamma\vdash ind_\mathbb1(\star, a_\star) : A(\star)$}
    \end{prooftree}
    \begin{prooftree}
            \AxiomC{$\Gamma,x : \mathbb{1}\vdash A(x)\; Ty$}
            \AxiomC{$\Gamma\vdash a_\star : A(\star)$}
            \RightLabel{$\mathbb{1}$-comp}
            \BinaryInfC{$\Gamma\vdash  a_\star : A(\star)$.}
    \end{prooftree}      
\end{multicols}
We denote the section added in the previous stage by $ind_{\mathbb1}$. The first derivation then corresponds to the following arrow:
% https://q.uiver.app/#q=WzAsNSxbMiwwLCJUbShcXF8oXFxzdGFyKSlcXHRpbWVzIFRtKFxcbWF0aGJiMSkiXSxbMSwwLCJUbShcXF8oXFxzdGFyKSkiXSxbMywwLCJDIl0sWzQsMCwiVG0sIl0sWzAsMCwiZF8xOiJdLFsxLDAsIihpZCxcXHN0YXIpIl0sWzAsMiwiaW5kX3tcXG1hdGhiYjF9Il0sWzIsMywiXFxwaV8yIl1d
\[\begin{tikzcd}
	{d_1:} & {Tm(\_(\star))} & {Tm(\_(\star))\times Tm(\mathbb1)} & C & {Tm,}
	\arrow["{(id,\star)}", from=1-2, to=1-3]
	\arrow["{ind_{\mathbb1}}", from=1-3, to=1-4]
	\arrow["{\pi_2}", from=1-4, to=1-5]
\end{tikzcd}\]
where the last arrow is the pullback projection from $C$ to $Tm$ (corresponding to the inclusion of terms of some chosen types to all terms).

The second derivation corresponds to 
% https://q.uiver.app/#q=WzAsMyxbMSwwLCJUbShcXF8oXFxzdGFyKSkiXSxbMiwwLCJUbS4iXSxbMCwwLCJkXzI6Il0sWzAsMSwiXFxwaV8yIl1d
\[\begin{tikzcd}
	{d_2:} & {Tm(\_(\star))} & {Tm.}
	\arrow["{\pi_2}", from=1-2, to=1-3]
\end{tikzcd}\]
We need to check that the resulting type is the same in both cases:
\begin{lemma}
For the arrows $d_1, d_2$, we have $pd_1=pd_2$.    
\end{lemma}
\begin{proof}
After looking at both pullback squares defining $C$ and $Tm(\_(\star))$, we see that it suffices to prove that the following two arrows are the same:
% https://q.uiver.app/#q=WzAsOCxbMCwwLCJUbShcXF8oXFxzdGFyKSkiXSxbMSwwLCJUbShcXF8oXFxzdGFyKSlcXHRpbWVzIFRtKFxcbWF0aGJiMSkiXSxbMiwwLCJDIl0sWzMsMCwiVG0oXFxfKFxcc3RhcikpXFx0aW1lcyBUbShcXG1hdGhiYjEpIl0sWzQsMCwiVG0oXFxtYXRoYmIxKVxcdGltZXMgVHlee1RtKFxcbWF0aGJiMSl9Il0sWzAsMSwiVG0oXFxfKFxcc3RhcikpIl0sWzIsMSwiVHlee1RtKFxcbWF0aGJiMSl9Il0sWzQsMSwiVG0oXFxtYXRoYmIxKVxcdGltZXMgVHlee1RtKFxcbWF0aGJiMSl9Il0sWzAsMSwiKGlkLFxcc3RhcikiXSxbMSwyLCJpbmRfXFxtYXRoYmIxIl0sWzIsMywiXFxwaV8xIl0sWzMsNCwiKFxccGlfMixcXHBpXzFcXGNkb3RcXHBpXzEpIl0sWzUsNiwiXFxwaV8xIl0sWzYsNywiKFxcc3RhcixpZCkiXV0=
\[\begin{tikzcd}
	{Tm(\_(\star))} & {Tm(\_(\star))\times Tm(\mathbb1)} & C & {Tm(\_(\star))\times Tm(\mathbb1)} & {Tm(\mathbb1)\times Ty^{Tm(\mathbb1)}} \\
	{Tm(\_(\star))} && {Ty^{Tm(\mathbb1)}} && {Tm(\mathbb1)\times Ty^{Tm(\mathbb1)}}
	\arrow["{(id,\star)}", from=1-1, to=1-2]
	\arrow["{ind_\mathbb1}", from=1-2, to=1-3]
	\arrow["{\pi_1}", from=1-3, to=1-4]
	\arrow["{(\pi_2,\pi_1\cdot\pi_1)}", from=1-4, to=1-5]
	\arrow["{\pi_1}", from=2-1, to=2-3]
	\arrow["{(\star,id)}", from=2-3, to=2-5]
\end{tikzcd}\]
The first arrow simplifies as $\pi_1\cdot ind_\mathbb1=id$. To prove that the two arrows into the product are the same, we can check that their postcompositions with product projections coincide. 

Let us start with the first projection. For the first arrow:
$$ \pi_1\cdot(\pi_2,\pi_1\cdot\pi_1)\cdot(id, \star)=\pi_2\cdot(id, \star)=\star.$$

For the second arrow:
$$\pi_1\cdot(\star, id)\cdot\pi_1=\star\cdot\pi_1.$$
These two arrows are equal as they can be decomposed as an arrow into $1$ followed by $\star$. Such two arrows are definitely equal. 

Now, we move to the second projection. For the first arrow:
$$ \pi_2\cdot(\pi_2,\pi_1\cdot\pi_1)\cdot(id, \star)=\pi_1\cdot\pi_1\cdot(id, \star)=\pi_1.$$
For the second arrow, we obviously obtain also the arrow $\pi_1$.
\end{proof}
The type theory with inductive unit types therefore can be constructed as the following bipushout:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJGUGFyIl0sWzMsMCwiXFxOTV97XFxtYXRoYmIxLFxcc3RhcixpbmR9Il0sWzMsMiwiXFxOTV97XFxtYXRoYmIxLFxcc3RhcixpbmQsIGNvbXB9Il0sWzAsMiwiRlxcezBcXHRvMVxcfSJdLFswLDEsIihkXzEsZF8yKSJdLFsxLDJdLFswLDNdLFszLDJdLFsyLDAsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dXQ==
\[\begin{tikzcd}
	FPar &&& {\NM_{\mathbb1,\star,ind}} \\
	\\
	{F\{0\to1\}} &&& {\NM_{\mathbb1,\star,ind, comp}.}
	\arrow["{(d_1,d_2)}", from=1-1, to=1-4]
	\arrow[from=1-1, to=3-1]
	\arrow[from=1-4, to=3-4]
	\arrow[from=3-1, to=3-4]
	\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=3-4, to=1-1]
\end{tikzcd}\]
\chapter*{Conclusions}
We studied categories with representable maps (CwR) -- a categorical suggestion by Uemura \cite{Uemura_2023} for a definition of dependent type theory with functorial semantics à la Lawvere \cite{lawvereThesis}. The first two chapters served as an introduction to the topic. Relevant notions from (2-)category theory were introduced in Chapter \ref{chap:prelims}, whereas Chapter \ref{chap:semantics} introduced semantics of type theory, and explained how CwRs can be used to have type theories with functorial semantics. The key parts were Chapters \ref{chap:prop} and \ref{chap:models}.

In the third chapter, we examined 2-categorical properties of the 2-category $\Rep$ (of all CwRs). We constructed $\Rep$ in several stages using other 2-categories. As a result of the construction, we obtained that $\Rep$ is an accessible 2-category with flexible limits, and bicolimits. Another consequence of the construction is that we can freely generate CwR using a category with a specified class of maps, i.e. the forgetful 2-functor $U\colon\Rep\to\Cat_m$ has a left biadjoint $F$. Importance of these results is that bicolimits and $F$ are tools that can be used to construct CwRs in a controlled way. This slightly improved a result by Uemura, who proved in \cite{taichiThesis} that the $(2,1)$-category of CwRs has similar properties.

In the last chapter, we studied interactions between models and CwRs constructed via $F$ or via bicolimits. We proved that there is an equivalence of categories between models of $F\T$ (a CwR freely generated by $\T$) and models of $\T$. Then we proved that models of bipushouts are bipullbacks of models. Using this, we constructed CwRs such that their models are natural models with unit types or empty types.

There are a few possible future directions. An unsatisfying point is that we were not able to define models as a 2-functor from $\Rep$ (we had to use $(2,1)$-$\Rep$). We believe that it should be possible to shift a bit the definition of 2-cells of $\Rep$ such that all the results remain valid, and we could define models as a 2-functor preserving all bicolimits. Another unfinished problem that might be worth studying touches size issues and is explained in Remark \ref{size issues}. One could also study the 2-categorical aspects of the category of models. Lastly, we omitted applications of the theory around CwRs to problems arising from syntax. Uemura suggested \cite{taichiSlides} a generalisation of his framework that could lead to modular proofs of normalisation; it might be interesting to look for other applications.

\addcontentsline{toc}{chapter}{Summary}  

\begingroup
\raggedright
\sloppy
\printbibliography
\endgroup
\end{document}
